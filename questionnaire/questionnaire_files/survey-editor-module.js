webpackJsonp([33,7],{1004:function(e,t,i){"use strict";var n=i(0),o=i(4),s=i(7),a=i(53),r=i.n(a),l=i(280),c={lookAndFeelQWin:null,skin:null,skinType:null,skinLibrary:null,libraryId:null,nextButtonMid:null,previousButtonMid:null,headerMid:null,footerMid:null,NextButtonText:"  >>  ",PreviousButtonText:"  <<  ",headerText:"",footerText:"",autofocus:!1,autoadvanceQuestions:!1,autoadvancePages:!1,loadingThemes:!1,openDialog:function(e){var t=this,i=o.a.getAjaxURL("GetLookAndFeel",null,{SurveyID:s.a.User.currentSurveyId});e&&(i+="&IncludeDepricatedSkins=true");var a=window.QBuilder("div",{id:"LookAndFeelPopupWindow",style:"width: 1000px;",className:"lookAndFeelQWin"},[window.QBuilder("div",{className:"loadingPadding"},[window.QAjaxWaiter.showMediumRing()])]),r="";s.a.System.brandId&&"qualtrics"!=s.a.System.brandId&&"Qualtrics"!=s.a.System.brandId&&(r=window.QBuilder("option",{value:s.a.System.brandId},[s.a.System.brandId]));var l=window.QBuilder("div",{id:"skinBrandsDropDown"},[window.QBuilder("select",{onchange:"LookAndFeel.updateSkinsMenu(this)",id:"skinBrandSelector"},[window.QBuilder("option",{value:"Qualtrics"},["Qualtrics"]),r])]),c={},d=document.createDocumentFragment();d.appendChild(window.QBuilder("div",{},[window.Survey.getInstance().surveyNameObj.text])),d.appendChild(window.QBuilder("div",{className:"subtitle"},Object(n.default)("Messages","MLF_S")));var u={id:"LookAndFeel_Popup",width:"1000px",height:"90%",title:d,closeButton:!1,buttons:[{text:Object(n.default)("SiteWide","Cancel"),className:"btn-hover",click:"LookAndFeel.cancelLookAndFeel"},{text:Object(n.default)("SiteWide","Save"),className:"btn-success",id:"LookAndFeel_PopupSaveButton",click:"LookAndFeel.saveLookAndFeelOptions",icon:"btn-icon-check"}]};window.Survey.getInstance()&&window.Survey.getInstance().versionId&&(c.Revision=window.Survey.getInstance().versionId,u.banner=Object(n.default)("EditSection","VersionViewingPrevious"),u.disableSave=!0,u.buttons[1].className+="Disabled",u.buttons[1].click=""),new window.Ajax.Updater(a,i,{parameters:c,evalScripts:!0,onComplete:function(){window.$("skinSelector").insert({top:l}),t.updateColors(),t.lookAndFeelQWin.center(),window.$("LookAndFeel_PopupSaveButton")&&window.$("LookAndFeel_PopupSaveButton").focus()}}),this.lookAndFeelQWin=new window.Q_Window(u),this.lookAndFeelQWin.setContent(a),this.lookAndFeelQWin.center()},upgradeToV2:function(){Object(l.a)("JFE","ControlPanel.LookAndFeelV2.SwitchLFEVersion",{version:"v2"}),this.cancelLookAndFeel(),window.QES_Global.openLookAndFeelV2()},center:function(){this.lookAndFeelQWin.center()},initialize:function(e,t,i,n,o,s,a,r,l,d,u,h,p){var w=!(arguments.length>13&&void 0!==arguments[13])||arguments[13],f=arguments.length>14&&void 0!==arguments[14]&&arguments[14],v=arguments.length>15&&void 0!==arguments[15]&&arguments[15],b=arguments.length>16&&void 0!==arguments[16]&&arguments[16];this.brandHasSkins=s,this.allowQualtricsThemes=w;var g=document.createElement("iframe");g.setAttribute("id","lookAndFeelSurveyFrame"),g.setAttribute("name","lookAndFeelSurveyFrame"),g.setAttribute("src",window.BaseForm.getInstance().getSurveyPreviewURL(!0)),g.setAttribute("frameborder","0"),window.$("lookAndFeelSurveyFrameHolder").appendChild(g);var y=window.getPageSize(),S=(y[3],window.$("LookAndFeel_Popup").getHeight());g.style.height=S-window.$("LookAndFeelEditor").getHeight()+"px",c.center();var m=window.$("skinBrandSelector");this.initializeSelectedBrand(m,a,i,r,s),s&&!w&&m.removeChild(m.options[0]),e&&1==e&&c.toggleStyles(window.$("version1skinWarning"),"active"),c.skin=t,c.skinLibrary=i,c.skinType=n,c.libraryId=l,c.nextButtonMid=d,c.previousButtonMid=u,c.headerMid=h,c.footerMid=p,c.autofocus=!!f,c.autoadvanceQuestions=!!v,c.autoadvancePages=!!b,this.initializeMessageSelector("NextButton",l,d),this.initializeMessageSelector("PreviousButton",l,u),this.initializeMessageSelector("header",l,h),this.initializeMessageSelector("footer",l,p),window.SkinStyler.initialize(),window.SkinStyler.loadStyleValues(o),window.Event.observe(g,"load",function(){c.toggleStyles(window.$("optionsTableCenterLoading"),"active"),-1==g.src.indexOf("loadingSurvey.html")&&window.SkinStyler.cleanUpPreview()})},initializeMessageSelector:function(e,t,i){var n=this,o="";i?this.getMessageDescription(t,i).then(function(e){o=e}).catch(function(t){window.$(e+"Text")&&(window.$(e+"Text").style.display="initial")}).then(function(){n.addMessageSelector(e,t,i,o)}):(this.setDefaultText(e),"header"!=e&&"footer"!=e&&window.$(e+"Text").show(),this.addMessageSelector(e,t,i,""))},initializeSelectedBrand:function(e,t,i,n,o){e.options[1]&&t&&""!=t&&"Qualtrics"!=t&&o?(e.options[1].text=t,e.options[1].selected=n):e.options[1]&&o&&"Qualtrics"!==i&&i===e.options[1].text?e.options[1].selected=n:e.options[1]&&!o&&e.removeChild(e.options[1])},saveLookAndFeelOptions:function(){if(window.SkinStyler.skinStyles.customCSS&&"string"==typeof window.SkinStyler.skinStyles.customCSS&&!this.verifyCustomCSS(window.SkinStyler.skinStyles.customCSS))return void window.QualtricsCPTools.showAlertDialog({id:"SaveLookAndFeelFailed",message:Object(n.default)("EditSection","SaveLookAndFeelCustomCSSInvalidMessage"),title:Object(n.default)("EditSection","SaveLookAndFeelFailed")});var e=window.$("LookAndFeelForm").serialize(!0);if(this.validateLookAndFeelOptions(e)){e.SurveyID=window.BaseForm.getInstance().id,e.SurveyName=window.Survey.getInstance().surveyNameObj.text;var t=window.Survey.getInstance().surveyOptions||{};e.CustomStyles=Object.toJSON(window.SkinStyler.skinStyles),e.Skin=this.skin||t.Skin,e.SkinType=this.skinType||t.SkinType,e.SkinLibrary=this.skinLibrary||t.SkinLibrary,e.libraryId=this.libraryId,e.nextButtonMid=this.nextButtonMid,e.previousButtonMid=this.previousButtonMid,e.headerMid=this.headerMid,e.footerMid=this.footerMid,e.Autofocus=this.autofocus,e.Autoadvance=this.autoadvanceQuestions,e.AutoadvancePages=this.autoadvancePages,this.toggleStyles(window.$("version1skinWarning"),"inactive"),new window.Ajax.Request(o.a.getAjaxURL("saveLookAndFeelOptions",null,{SurveyID:s.a.User.currentSurveyId}),{parameters:e,onComplete:function(e){window.QES_Global.setSurveyEditedAndCreateVersion(),window.Q_Window.closeWindow(),window.BaseFormCustomStyler.getInstance().updateCustomStyle(window.SkinStyler.skinStyles)}})}else window.Q_Window.getInstance("LookAndFeel_Popup").reenableButton("Save")},verifyCustomCSS:function(e){return!window.QualtricsCPTools.containsJavaScript(e)},validateLookAndFeelOptions:function(e){return-1===(e.Header+e.Footer).indexOf("document.write(")||(alert(Object(n.default)("EditSection","DocumentWriteWarning")),!1)},selectOption:function(e){var t=window.$(e.id),i=window.$(e.id+"sList"),n=window.$("FontsOption"),o=window.$("ColorsOption"),s=window.$("GeneralOption"),a=window.$("AdvancedOption"),r=window.$("FontsOptionsList"),l=window.$("ColorsOptionsList"),c=window.$("GeneralOptionsList"),d=window.$("AdvancedOptionsList");n.removeClassName("selected"),o.removeClassName("selected"),s.removeClassName("selected"),a.removeClassName("selected"),t.addClassName("selected"),r.style.display="none",l.style.display="none",c.style.display="none",d.style.display="none",i.style.display="block"},addCustomCSS:function(){var e=this,t=window.SkinStyler.skinStyles.customCSS?window.SkinStyler.skinStyles.customCSS:"/* "+Object(n.default)("EditSection","CustomCSSPrompt")+" */";new window.CSSEditorPopup({title:Object(n.default)("EditSection","CSSEditorTitle"),contents:t,fullScreenButton:!0,width:700,height:500,saveCallBack:function(i){var n=window.QualtricsCPTools.containsMixedContentHTTP(i),o=window.handleTextForMixedContentHTTP(i),s=!0;return o!==i?(i=o,this.contents=o):n&&!window.forceIgnoreMixedContentHTTPWarnings()&&(s=!1),s&&e.saveCSS(t,i),s}})},saveCSS:function(e,t){t!=e&&(t=t.strip(),""==t&&(t=!1),window.SkinStyler.skinStyles.customCSS=t,window.SkinStyler.applyCSS())},cancelColorChoice:function(e,t){t=window.$(t),this.toggleStyles(t,"inactive");var i=t.id;i=i.replace(/_colorCancel/,""),this.styles[i].setColor(""),window.$(i+"_input").value="";var n="";switch(i){case"error_swatch":window.SkinStyler.skinStyles.errorStyles.styles.color=null,window.SkinStyler.skinStyles.errorStyles.styles.backgroundColor=null,window.SkinStyler.skinStyles.errorStylesBG.styles.color=null,window.SkinStyler.skinStyles.errorStylesBG.styles.backgroundColor=null,n="color";break;case"text_swatch":window.SkinStyler.skinStyles.textStyles.styles.color=null,n="color";break;case"border_swatch":window.SkinStyler.skinStyles.borderStyles.styles.borderColor=null,n="borderColor";break;case"page_swatch":window.SkinStyler.skinStyles.pageStyles.styles.backgroundColor=null,n="backgroundColor";break;case"question_swatch":window.SkinStyler.skinStyles.questionStyles.styles.color=null,n="color";break;case"highlight_swatch":window.SkinStyler.skinStyles.highlightStyles.styles.backgroundColor=null,window.SkinStyler.skinStyles.highlightStylesAlt.styles.backgroundColor=null,n="backgroundColor";break;case"header_swatch":window.SkinStyler.skinStyles.headerStyles.styles.color=null,n="color";break;case"choice_swatch":window.SkinStyler.skinStyles.choiceStyles.styles.color=null,n="color";break;case"questionSeparator_swatch":window.SkinStyler.skinStyles.questionSeparatorStyles.styles.backgroundColor=null,n="backgroundColor";break;case"footer_swatch":window.SkinStyler.skinStyles.footerStyles.styles.color=null,n="color";break;case"textEntry_swatch":window.SkinStyler.skinStyles.textEntryStyles.styles.color=null,n="color";break;case"altRow_swatch":window.SkinStyler.skinStyles.altRowStyles.styles.backgroundColor=null,n="backgroundColor"}i=i.replace(/_swatch/,"Styles"),window.SkinStyler.applyCSS(),this.populateControl(i,n)},toggleStyles:function(e,t){if(e)if(e.hasClassName("Active")){if("inactive"==t||null==t)return e.removeClassName("Active"),e.hasClassName("colorCancel")&&e.removeClassName("icon-x-filled-sm"),"inactive"}else if("active"==t||null==t)return e.addClassName("Active"),e.hasClassName("colorCancel")&&e.addClassName("icon-x-filled-sm"),"active";return null},toggleErrors:function(){var e=window.$("lookAndFeelSurveyFrame").contentWindow.document,t=e.getElementById("StyleSamplerHTML");"none"==t.style.display?t.style.display="block":t.style.display="none"},toggleHighlights:function(){var e=window.$("lookAndFeelSurveyFrame").contentWindow;this.setHighlights(!e.QualtricsSETools.highlightOn)},toggleAutofocus:function(){this.autofocus=!this.autofocus},toggleAutoadvanceQuestions:function(){this.autoadvanceQuestions=!this.autoadvanceQuestions,!this.autoadvanceQuestions&&this.autoadvancePages&&(this.autoadvancePages=!1,this.repopulateAutoadvanceControl("autoadvancePages"))},toggleAutoadvancePages:function(){this.autoadvancePages=!this.autoadvancePages,this.autoadvancePages&&!this.autoadvanceQuestions&&(this.autoadvanceQuestions=!0,this.repopulateAutoadvanceControl("autoadvanceQuestions"))},setHighlights:function(e){var t=window.$("lookAndFeelSurveyFrame").contentWindow;if(0==e)t.QualtricsSETools.highlightOn=!1,t.QualtricsSETools.unHighlightAll();else{t.QualtricsSETools.highlightOn=!0,t.QualtricsSETools.killHighlight=!1,t.QualtricsSETools.questionHighlighter();var i=t.document,n=i.getElementsByClassName("QuestionOuter");n[1]&&(t.QualtricsSETools.highlightRegistry.push(n[1]),window.$(n[1]).addClassName("Highlight"))}},toggleQuestionSeparators:function(){"none"==window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display?window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display="block":window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display="none",window.SkinStyler.applyCSS()},toggleAppliedStyles:function(e,t){var i=window.LookAndFeel.toggleStyles(e);window.SkinStyler.toggleFontStyles(t,i)},cancelLookAndFeel:function(){window.Q_Window.closeAllWindows(),window.SkinStyler.skinStyles=window.SkinStyler.defaultStyleValues},updateSkinsMenu:function(e){var t=e.value,i=this;i.loadingThemes=!0;var n=window.$("skinNameHolder"),a=window.$("themeThumbnail"),l=window.$("skinThumbHolder"),c=window.$("themeDropDown");return c&&a&&l&&(c.addClassName("opacity"),a.addClassName("imageLoader"),l.addClassName("imageToBack")),r.a.get(o.a.getAjaxURL("GetSkinChoices",null,{SurveyID:s.a.User.currentSurveyId}),{params:{library:t}}).then(function(e){var o=e.data;if(o.SkinListHTML){var s=o.SkinListHTML;s='<ul id="skinOptions" class="QMenu">'+s+"</ul>",window.$("skinOptionsHolder").innerHTML=s;var r=o.DefaultLibrarySkin.SkinID,d=o.DefaultLibrarySkin.ThumbnailPath,u=o.DefaultLibrarySkin.SkinDescription,h=o.DefaultLibrarySkin.SkinVersion;n.innerText=u,l.src=d,i.selectSkin(t,r,u,d,h),c.removeClassName("opacity"),a.removeClassName("imageLoader"),l.removeClassName("imageToBack")}else{var p=o;p='<ul id="skinOptions" class="QMenu">'+p+"</ul>",window.$("skinOptionsHolder").innerHTML=p}i.loadingThemes=!1}).catch(function(e){return Promise.reject(e)})},selectSkin:function(e,t,i,n,a){var r=window.$("skinThumbHolder"),l=window.$("skinNameHolder");window.$("ajaxLoader").style.display="block",window.$("colorsTable").style.visibility="hidden",l.innerHTML='<span id="dropDownIcon" class="dropDownIcon"></span>'+i,r.src=n,new window.Ajax.Updater("PageTransition",o.a.getAjaxURL("GetSkinTransitions",null,{SurveyID:s.a.User.currentSurveyId}),{parameters:{SkinLibrary:e,Skin:t}});var c=window.$("lookAndFeelSurveyFrame");if(c.setAttribute("src","../WRQualtricsControlPanel/loadingSurvey.html"),function(){c.setAttribute("src",window.BaseForm.getInstance().getSurveyPreviewURL(!0,e,"MQ",t))}.defer(),this.skinLibrary=e,this.skinType="MQ",this.skin=t,"1"==a?this.toggleStyles(window.$("version1skinWarning"),"active"):this.toggleStyles(window.$("version1skinWarning"),"inactive"),!c)return console.log("iframe isnt defined"),void window.Q_Window.closeAllWindows();window.$("QMenu")&&setTimeout(function(){window.$("QMenu").style.display="none"},100)},changeQuestionsPerPage:function(e){var t=window.$("lookAndFeelSurveyFrame");t.setAttribute("src","../WRQualtricsControlPanel/loadingSurvey.html"),t.setAttribute("src",window.BaseForm.getInstance().getSurveyPreviewURL(!0,this.skinLibrary,this.skinType,this.skin,e))},activateTextControls:function(e){"textStyles"!=e&&(window.$(e+"Checkbox").checked="checked",c.toggleStyles(window.$(e+"Options"),"active"))},repopulateAutoadvanceControl:function(e){var t=e+"Checkbox",i={autofocus:this.autofocus,autoadvanceQuestions:this.autoadvanceQuestions,autoadvancePages:this.autoadvancePages};window.$(t)&&(window.$(t).checked=i[e])},repopulateControls:function(){var e=null;window.SkinStyler.alterProgressBar(),window.$("colorsTable").style.visibility="hidden";for(var t in window.SkinStyler.skinStyles)if("customCSS"!=t){window.SkinStyler.skinStyles[t].selector,e=window.SkinStyler.skinStyles[t].styles;for(var i in e)null===e[i]?this.populateControl(t,i):this.repopulateControl(t,i,e[i])}window.$("ajaxLoader").style.display="none",window.$("colorsTable").style.visibility="visible",1==window.$("lookAndFeelSurveyFrame").contentWindow.QualtricsSETools.highlightOn?window.$("highlightCheckbox").checked=!0:window.$("highlightCheckbox").checked=!1,this.repopulateAutoadvanceControl("autofocus"),this.repopulateAutoadvanceControl("autoadvanceQuestions"),this.repopulateAutoadvanceControl("autoadvancePages"),"block"==window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display||null==window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display?window.$("questionSeparatorCheckbox").checked=!0:window.$("questionSeparatorCheckbox").checked=!1,this.toggleStyles(window.$("optionsTableCenterLoading"),"inactive")},injectHTMLintoSurvey:function(){var e=window.$("lookAndFeelSurveyFrame").contentWindow.document,t=e.createElement("div");t.innerHTML='<div id="StyleSamplerHTML" style="display:none"><div id="SampleHeaderValidationError" class="HeaderValidationError"><h1>Sample Error: This is not a real error. This is for styling purposes only.</h1><ul><li><a>Issue 1:</a> This is just a sample error: Use for styling purposes.</li></ul></div><div id="SampleValidationError" class="ValidationError">This is just a sample error: Use for styling purposes.</div><div id="SampleSkinInner" class="SkinInner Invisible"/><div id="SampleQuestionText" class="QuestionText BorderColor Invisible"></div><div class="QuestionBody horizontalbar Invisible"><table><tbody><tr><th class="ylabel"><ul class="ChoiceStructure"  id="SampleChoiceText"><li></li></ul></th></tr></tbody></table></div><div id="SampleSeparator" class="Separator Invisible"/><div class="QuestionOuter Highlight Invisible"><div class="Inner" id="SampleHighlight"/></div><div id="SampleTextEntry" class="InputText Invisible"/><div id="SampleBorder" class="QuestionText BorderColor Invisible"/><div id="SampleAltRow" class="ReadableAlt Invisible"/></div>';var i=e.getElementById("Questions");i&&window.$(i).insert({top:t})},populateControl:function(e,t,i){if("color"==t||"backgroundColor"==t||"borderColor"==t)if("highlightStylesAlt"==e||"errorStylesBG"==e||"errorStyles"==e&&"backgroundColor"==t||"errorStyles"==e&&"borderColor"==t);else{var n=window.$("lookAndFeelSurveyFrame").contentWindow.document,o="",s="";switch(e){case"errorStyles":o="SampleValidationError";break;case"textStyles":o="SampleSkinInner";break;case"borderStyles":o="SampleBorder";break;case"pageStyles":o="SurveyEngineBody";break;case"questionStyles":o="SampleQuestionText";break;case"highlightStyles":o="SampleHighlight";break;case"headerStyles":o="Header";break;case"choiceStyles":o="SampleChoiceText";break;case"questionSeparatorStyles":o="SampleSeparator";break;case"footerStyles":o="Footer";break;case"textEntryStyles":o="SampleTextEntry";break;case"altRowStyles":o="SampleAltRow";break;case"questionUnderlineStyles":o="SampleQuestionText"}if((s=n.getElementById(o))&&""!=s){"borderColor"==t&&(t="border-bottom-color");var a=void 0;if(s.currentStyle?a=s.currentStyle[t]:window.getComputedStyle&&(a=n.defaultView.getComputedStyle(s,null).getPropertyValue(t.underscore().dasherize())),1==i)return a;var r=e.replace(/Styles/,"_swatch");a&&void 0!=a&&r&&this.styles[r].setColor(a)}}},repopulateControl:function(e,t,i){if("color"==t||"backgroundColor"==t||"borderColor"==t)"highlightStylesAlt"==e||"errorStylesBG"==e||"errorStyles"==e&&"backgroundColor"==t||"errorStyles"==e&&"borderColor"==t||(e=e.replace(/Styles/,"_swatch"),this.styles[e].setColor(i),this.toggleStyles(window.$(e+"_colorCancel"),"active"),window.$("ColorResetButton").hasClassName("Active")||(window.LookAndFeel.toggleStyles(window.$("ColorResetButton")),window.$("ColorResetButton").appear({duration:.25})));else if("fontFamily"==t||"fontSize"==t){var n=void 0;"fontFamily"==t&&(n=window.$(e+"Font")),"fontSize"==t&&(n=window.$(e+"FontSize"));for(var o=n.options,s=0;s<o.length;s++)o[s].value==i&&""!=i&&(o[s].selected=!0,this.activateTextControls(e))}else"fontWeight"==t&&"bold"==i?(c.toggleStyles(window.$(e+"BoldButton"),"active"),this.activateTextControls(e)):"fontStyle"==t&&"italic"==i?(this.toggleStyles(window.$(e+"ItalicButton"),"active"),this.activateTextControls(e)):"textDecoration"==t&&"underline"==i&&(this.toggleStyles(window.$(e+"UnderlineButton"),"active"),this.activateTextControls(e))},showHeaderEditor:function(){var e=window.$("header").value;new window.EditorPopup({title:Object(n.default)("EditSection","Header"),contents:e,width:750,height:400,saveCallBack:function(e){e=window.handleTextForMixedContentHTTP(e),window.$("header").value=e,window.SkinStyler.changeHeader()}})},showFooterEditor:function(){var e=window.$("footer").value;new window.EditorPopup({title:Object(n.default)("EditSection","Footer"),contents:e,width:750,height:400,saveCallBack:function(e){e=window.handleTextForMixedContentHTTP(e),window.$("footer").value=e,window.SkinStyler.changeFooter()}})},updateColors:function(){window.QModules.loadModule("colorpicker.js"),this.styles={};for(var e in window.QStyle.defaults)this.styles[e]=new window.QStyle(e,window.QStyle.defaults[e]);window.$("ColorsOptionsList").innerHTML="",window.$("ColorsOptionsList").appendChild(window.QBuilder("div",{id:"ajaxLoader"},["Calculating Colorsâ€¦"]));var t=[],i=0,n=0,o=[];for(var s in this.styles)o.push(this.styles[s].build()),n<2&&2==i?(t[n]=window.QBuilder("tr",{},o),o=[],n++,i=-1):n>=2&&1==i&&(4==n&&o.push(window.QBuilder("td",{},[window.QBuilder("div",{id:"ColorResetButton",style:"display:none",onclick:"SkinStyler.resetColors()"},[window.QBuilder("center",{},"Reset Colors")])])),t[n]=window.QBuilder("tr",{},o),o=[],n++,i=-1),i++;window.$("ColorsOptionsList").appendChild(window.QBuilder("table",{id:"colorsTable"},[window.QBuilder("tbody",{},t)]))},showSkinsMenu:function(e,t){if(!this.loadingThemes){s.a.Menu.showMenu("skinOptions",t,{className:"SkinOptionsMenu",useOverlay:!0})}},getMessageDescription:function(e,t){return t?r.a.get(o.a.getAjaxURL("GetMessageDescription",null,{SurveyID:s.a.User.currentSurveyId}),{params:{lid:e,mid:t}}).then(function(e){return e.data}).catch(function(e){return Promise.reject(e)}):new Promise(function(e,t){t("mid is null")})},getMessage:function(e,t,i){return r.a.get(o.a.getAjaxURL("GetMessage",null,{SurveyID:s.a.User.currentSurveyId}),{params:{LID:e,MID:t,lang:i}}).then(function(e){return e.data}).catch(function(e){return Promise.reject(e)})},addMessageSelector:function(e,t,i,n){var o="menuButton SelectMenuButton";window.$(e+"Container").innerHTML="",void 0!=n&&""!=n||(n=" ",o="LAFMessageSelector");var s=window.QBuilder("a",{className:o},[window.QBuilder("b",{preventdrag:"true"},[window.QBuilder("b",{preventdrag:"true"},[window.QBuilder("b",{downcallback:"Qualtrics.Menu.showMenu()",p1:"LookAndFeel.buildMessageSelector("+e+","+t+","+i+")",p2:"$el",p4:"$evt",preventdrag:"true",id:e+"Menu"},[n])])])]);window.$(e+"Container").appendChild(s)," "!=n&&this.setMessageStyle(e,t,i)},buildMessageSelector:function(e,t,i){window.CPModules.loadLegacyModule("messageselector.js");var n={lid:t,mid:i,onSelect:this.toggleMessage.bind(this,e),categories:["MLF"]},o=new s.a.MessageSelector(n),a=o.buildMenu();return a.ajax.postparser="LookAndFeel.modifyMessageMenu($response,"+e+")",a},modifyMessageMenu:function(e,t){return e.items&&(e.items.push({separator:!0}),e.items.push({display:Object(n.default)("EditSection","UseFixedText"),action:"LookAndFeel.toggleMessage("+t+")"})),e},toggleMessage:function(e,t,i,n,o){null!=t?(this.setDefaultText(e),this.setMessageStyle(e,t,i),this.setMessageText(e,t,i)):(this.setMessageId(e,this.libraryId,""),window.$(e+"Container").innerHTML="",this.addMessageSelector(e,this.libraryId,""),"header"==e||"footer"==e?(window.$(e).value=this.getDefaultText(e),window.$(e).show(),window.$(e+"EditLink").show(),"header"==e?window.SkinStyler.changeHeader():window.SkinStyler.changeFooter()):(window.$(e+"Text").value=this.getDefaultText(e),window.$(e+"Text").show(),window.SkinStyler.changeButtonText()))},setMessageText:function(e,t,i){var n=this,o="header"==e?35:16;this.getMessageDescription(t,i).then(function(t){window.$(e+"Menu").innerHTML=t.truncate(o)}).catch(function(e){});var s=window.$("lookAndFeelSurveyFrame").contentWindow.document,a=s.getElementById("Q_lang"),r=a?a.value:"",l="";this.getMessage(t,i,r).then(function(e){l=e}).catch(function(e){}).then(function(){n.updatePreview(e,l)})},setMessageStyle:function(e,t,i){this.setMessageId(e,t,i);var n=window.$(e+"Container").childElements()[0];n.addClassName("menuButton"),n.addClassName("SelectMenuButton"),n.removeClassName("LAFMessageSelector"),"header"==e||"footer"==e?(window.$(e).hide(),window.$(e+"EditLink").hide(),n.setStyle({width:"194px",height:"auto",color:"#333333"})):window.$(e+"Text").hide()},setMessageId:function(e,t,i){switch(this.libraryId=t,e){case"NextButton":this.nextButtonMid=i;break;case"PreviousButton":this.previousButtonMid=i;break;case"header":this.headerMid=i;break;case"footer":this.footerMid=i}},setDefaultText:function(e){this[e+"Text"]="header"==e||"footer"==e?window.$(e).value:window.$(e+"Text").value},getDefaultText:function(e){return this[e+"Text"]},resetMessages:function(){""!=this.libraryId&&(""!=this.nextButtonMid&&this.setMessageText("NextButton",this.libraryId,this.nextButtonMid),""!=this.previousButtonMid&&this.setMessageText("PreviousButton",this.libraryId,this.previousButtonMid),""!=this.headerMid&&this.setMessageText("header",this.libraryId,this.headerMid),""!=this.footerMid&&this.setMessageText("footer",this.libraryId,this.footerMid))},updatePreview:function(e,t){t&&("header"==e||"footer"==e?(window.$(e).value=t,window.SkinStyler.changeHeader(),window.SkinStyler.changeFooter()):(window.$(e+"Text").value=t,window.SkinStyler.changeButtonText()))}};window.LookAndFeel=c,t.a=c},1005:function(e,t,i){"use strict";var n=i(0),o=window.Class.create({className:"QStyle",initialize:function(e,t){this.name=e,this.text=t.Text,this.extraHTML=t.HTML||"",this.color="transparent",t.Action?this.action=t.Action:this.action=function(){},o.reg[e]=this,this.colorPicker=new window.ColorPicker({onColorChange:this.onColorChange.bind(this),onReset:this.onReset.bind(this),onColorPick:this.onColorPick.bind(this),useTransparent:!0})},build:function(){return this.restoreEl=window.QBuilder("span",{id:this.name+"_colorCancel",className:"colorCancel icon",clickcallback:"LookAndFeel.cancelColorChoice",p1:this.name,p2:"$el"}),window.QBuilder("td",{className:"colorSelector"},[window.QBuilder("div",{className:"colorSelector"},[this.colorPicker.build()]),this.restoreEl,window.QBuilder("span",{className:"colorStyleText",clickcallback:this.className+".show:"+this.name},this.text),window.QBuilder("input",{type:"hidden",id:this.name+"_input",name:this.name+"_input",value:""}),this.extraHTML])},onColorChange:function(e){},onReset:function(e){},onColorPick:function(e){window.LookAndFeel.toggleStyles(this.restoreEl,window.$(this.restoreEl).hasClassName("Active")?"inactive":"active");var t=window.QBuilder("div",{id:this.name});window.$(t).setStyle({backgroundColor:e}),window.SkinStyler.swatchStyles(t),this.color=e,this.colorPicker.setInitialColor(e),this.action()},setColor:function(e){""==e&&(e="transparent"),this.colorPicker.setColor(e)},show:function(){this.colorPicker.showColorPicker()}});o.defaults={text_swatch:{Text:Object(n.default)("EditSection","Text")},error_swatch:{Text:Object(n.default)("SiteWide","Error"),HTML:window.QBuilder("span",{className:"colorStyleText errorToggle",clickcallback:"LookAndFeel.toggleErrors()"}," "+Object(n.default)("EditSection","ShowHide"))},questionSeparator_swatch:{Text:Object(n.default)("EditSection","QuestionSeparator"),Action:function(){window.$("questionSeparatorCheckbox").checked="checked",window.SkinStyler.skinStyles.questionSeparatorStyles.styles.display="block",window.SkinStyler.applyCSS()}},question_swatch:{Text:Object(n.default)("EditSection","QuestionText")},page_swatch:{Text:Object(n.default)("EditSection","Background")},highlight_swatch:{Text:Object(n.default)("EditSection","Highlights"),Action:function(){window.$("highlightCheckbox").checked="checked",window.LookAndFeel.setHighlights(!0)}},choice_swatch:{Text:Object(n.default)("EditSection","ChoiceText")},header_swatch:{Text:Object(n.default)("EditSection","Header")},textEntry_swatch:{Text:Object(n.default)("EditSection","TextEntry")},footer_swatch:{Text:Object(n.default)("EditSection","Footer")},border_swatch:{Text:Object(n.default)("EditSection","Borders")},altRow_swatch:{Text:Object(n.default)("EditSection","AlternateRow")}},o.reg={},o.getInstance=window.QualtricsCPTools.getInstanceHelper(o.reg,"id"),window.QStyle=o},1006:function(e,t,i){"use strict";var n=i(0),o={SurveyStyleSheetIndex:null,initialize:function(){this.skinStyles=Object.toJSON(this.defaultStyleValues).evalJSON()},defaultStyleValues:{errorStyles:{selector:".Skin .ValidationError",styles:{color:null,backgroundColor:null,borderColor:null}},errorStylesBG:{selector:".Skin .HeaderValidationError, .Skin .HeaderValidationError li a",styles:{color:null,backgroundColor:null}},pageStyles:{selector:"#SurveyEngineBody",styles:{backgroundColor:null}},textStyles:{selector:".SkinInner",styles:{fontFamily:null,fontSize:null,fontWeight:null,fontStyle:null,textDecoration:null,color:null}},questionStyles:{selector:".Skin .QuestionText",styles:{fontFamily:null,fontSize:null,fontWeight:null,fontStyle:null,textDecoration:null,color:null}},choiceStyles:{selector:".Skin .horizontalbar th.ylabel, .Skin .Matrix table td, .Skin .Matrix table th, .Skin .Matrix table thead th, .Skin .Matrix table thead td, .Skin .PGR .DragAndDrop .Items label, .Skin .QuestionBody ul.ChoiceStructure, .Skin .PGR .DragAndDrop .Group ul, .Skin .PGR .DragAndDrop .Group h2, .Skin .PGR .DragAndDrop .Items ul, .Skin .PGR .DragAndDrop .Items h2, .Skin .DD .QuestionBody table.ChoiceStructure, .Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div ul, .Skin .PGR .DragAndDrop .NoColumns td.groupsContainerTd div h2, .Skin .SBS thead th, .Skin .SBS td, .Skin .SBS .Answers td, .Skin .SBS .Answers th, .SBS table.ChoiceStructure, .Skin .horizontalbar thead table.LabelDescriptions tr td, .Skin .horizontalbar thead tr td.NotApplicable, .QuestionBody th, .Skin .QuestionBody .MC .MAVR label, .Skin .QuestionBody .MC .SAVR label, .Skin .SBS thead th, .Skin .SBS td, .Skin .RO .DND ul li, .Skin .reg, .SkinInner .ChoiceStructure, .Skin thead, .Skin .GAP .ChoiceStructure thead th, .Skin .GAP .ChoiceStructure .c4, .Skin .GAP .ChoiceStructure th, .Skin .GAP .ChoiceStructure .WhyText, .SkinInner .ChoiceStructure .LightBG, .Skin .QuestionOuter.Highlight .Inner .reg, .Skin .QuestionOuter.Highlight .Inner .alt, .Skin .QuestionOuter.Highlight .Inner .ReadableAlt       ",styles:{fontFamily:null,fontSize:null,fontWeight:null,fontStyle:null,textDecoration:null,color:null}},headerStyles:{selector:".Skin div#Header",styles:{color:null}},footerStyles:{selector:".Skin #Footer",styles:{color:null}},questionSeparatorStyles:{selector:".Skin .Separator",styles:{backgroundColor:null,display:null}},highlightStyles:{selector:".Skin .QuestionOuter.Highlight .Inner, .Skin .QuestionOuter.Highlight .Inner .reg, .Skin .QuestionOuter.Highlight .Inner .alt, .Skin .QuestionOuter.Highlight .Inner .ReadableAlt",styles:{backgroundColor:null}},highlightStylesAlt:{selector:".Skin .QuestionOuter.Highlight .Inner .ReadableAlt, .Skin .QuestionOuter.Highlight .Inner .LightBG",styles:{backgroundColor:null}},textEntryStyles:{selector:".Skin select, .Skin .InputText",styles:{color:null}},borderStyles:{selector:".Skin .CS .horizontalbar table.sliderGrid tr.xlabel th, .Skin .CS .horizontalbar .ylabel, .Skin .CS .horizontalbar table.sliderGrid tr td.value, .Skin .Slider .horizontalbar table.sliderGrid tr.xlabel th, .Skin .BorderColor, .Skin .DarkBorderColor, .Skin .Slider .horizontalbar table.sliderGrid tr td.value, .Skin thead, .Skin .GAP .ChoiceStructure thead th  ",styles:{borderColor:null}},altRowStyles:{selector:".Skin .ReadableAlt, .Skin .LightBG",styles:{backgroundColor:null}},customCSS:null},assignSingleStyleValue:function(e,t,i){this.assignStyleValue(e,t,i),null!=i&&this.applyCSS()},assignStyleValue:function(e,t,i){if(o.skinStyles[e]){var n=o.skinStyles[e];if(!Object.isUndefined(n.styles[t])){var s=null;if(null==i)s="";else if("fontFamily"==t||"fontSize"==t)s=i.options[i.selectedIndex].value;else if("fontStyle"==t)s=i.hasClassName("Active")?"italic":"normal";else if("fontWeight"==t)s=i.hasClassName("Active")?"bold":"normal";else if("textDecoration"==t)s=i.hasClassName("Active")?"underline":"none";else if("color"==t||"backgroundColor"==t||"borderColor"==t){if(s=i.style.backgroundColor,"highlightStylesAlt"==e){var a=new Array,r=s.indexOf("(");a[0]=s.substring(0,r+1);var l=s.indexOf(",");a[1]=s.substring(r+1,l),a[2]=",";var c=s.lastIndexOf(",");a[3]=s.substring(l+1,c),a[4]=",";var d=s.indexOf(")");a[5]=s.substring(c+1,d),a[6]=")",a[1]=(a[1]-8).toString(),a[3]=(a[3]-8).toString(),a[5]=(a[5]-8).toString(),s=a.join("")}else if("errorStylesBG"==e&&"transparent"!=s){var u=void 0;if(-1==s.indexOf("rgb")){var h=window.ColorPicker.hexToRgb(s);u=window.ColorPicker.rgbToHsv(255*h.r,255*h.g,255*h.b)}else{var p=new Array,w=s.indexOf("(");p[0]=s.substring(0,w+1);var f=s.indexOf(",");p[1]=s.substring(w+1,f);var v=s.lastIndexOf(",");p[3]=s.substring(f+1,v);var b=s.indexOf(")");p[5]=s.substring(v+1,b),u=window.ColorPicker.rgbToHsv(p[1],p[3],p[5])}var g=u.v<205?"rgb(255,255,255)":"rgb(0,0,0)";n.styles.color=g}else"errorStyles"==e&&(n.styles.backgroundColor="transparent",n.styles.borderColor="transparent");var y=i.id+"_input";window.$(y).value=s}n.styles[t]=s}}},compileCSS:function(){this.CSSHandler.deleteStyles(this.SurveyStyleSheetIndex);var e=null,t=null;this.CSSHandler.transferStyles("externalStyleSheet","customStyles"),this.CSSHandler.transferStyles("customCSS","customStyles");for(var i in o.skinStyles)if("customCSS"!=i){e=o.skinStyles[i].selector,t=o.skinStyles[i].styles;for(var n in t)null===t[n]||this.CSSHandler.createCSSRule(this.SurveyStyleSheetIndex,e,n.underscore().dasherize()+":"+t[n])}},cleanUpPreview:function(){if(window.$("lookAndFeelSurveyFrame").contentWindow.document.body.id&&"SurveyEngineBody"==window.$("lookAndFeelSurveyFrame").contentWindow.document.body.id){window.$("lookAndFeelSurveyFrame").contentWindow.document.body;void 0==o.cleanUpPreview.initialiazed?o.cleanUpPreview.initialiazed=!0:(window.LookAndFeel.resetMessages(),this.changeButtonText(),this.changeHeader(),this.changeFooter()),window.LookAndFeel.injectHTMLintoSurvey(),window.LookAndFeel.repopulateControls(),this.applyCSS()}},swatchStyles:function(e){window.$("ColorResetButton").hasClassName("Active")||(window.LookAndFeel.toggleStyles(window.$("ColorResetButton")),window.$("ColorResetButton").appear({duration:.25}));var t=e.id.replace(/_swatch/,"Styles");"borderStyles"==t?this.assignStyleValue(t,"borderColor",e):"pageStyles"==t||"highlightStyles"==t||"errorStyles"==t||"questionSeparatorStyles"==t||"altRowStyles"==t?("errorStyles"==t?(this.assignStyleValue(t,"color",e),this.assignStyleValue(t+"BG","backgroundColor",e)):this.assignStyleValue(t,"backgroundColor",e),"highlightStyles"==t&&this.assignStyleValue(t+"Alt","backgroundColor",e)):this.assignStyleValue(t,"color",e),this.applyCSS()},resetColors:function(){window.LookAndFeel.cancelColorChoice("question_swatch",window.$("question_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("choice_swatch",window.$("choice_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("header_swatch",window.$("header_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("footer_swatch",window.$("footer_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("border_swatch",window.$("border_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("textEntry_swatch",window.$("textEntry_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("page_swatch",window.$("page_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("text_swatch",window.$("text_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("highlight_swatch",window.$("highlight_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("questionSeparator_swatch",window.$("questionSeparator_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("altRow_swatch",window.$("altRow_swatch_colorCancel")),window.LookAndFeel.cancelColorChoice("error_swatch",window.$("error_swatch_colorCancel")),this.applyCSS(),window.$("ColorResetButton").hasClassName("Active")&&(window.LookAndFeel.toggleStyles(window.$("ColorResetButton")),window.$("ColorResetButton").fade({duration:.25}))},loadStyleValues:function(e){if(""==e);else{e.previewStyles&&delete e.previewStyles,e.bodyStyles&&delete e.bodyStyles,e.textStyles.styles.textDecoration&&delete e.textStyles.styles.textDecoration,e.textStyles.styles.fontStyle&&delete e.textStyles.styles.fontStyle,e.textStyles.styles.fontWeight&&delete e.textStyles.styles.fontWeight,e.questionUnderlineStyles&&delete e.questionUnderlineStyles;for(var t in e)if(null!==e[t]){var i=(e[t].selector,e[t].styles);for(var n in i)null===i[n]||null===this.skinStyles[t].styles[n]&&(this.skinStyles[t].styles[n]=i[n])}null!==e.customCSS&&(this.skinStyles.customCSS=e.customCSS)}},preventMixedContentHTTP:function(){var e=window.$("externalCSS"),t=e&&e.value,i=window.handleTextForMixedContentHTTP(t,!0);t!==i&&(t=i,e.value=i)},applyCSS:function(){this.preventMixedContentHTTP(),this.applyExternalStylesheet(),this.addCustomCSS(),-1==this.CSSHandler.getIndexOfStyleSheet("customStyles")?this.SurveyStyleSheetIndex=this.CSSHandler.createStyleSheet("customStyles"):this.SurveyStyleSheetIndex=this.CSSHandler.getIndexOfStyleSheet("customStyles"),this.compileCSS();var e=window.$("lookAndFeelSurveyFrame").contentWindow.document,t=e.styleSheets[this.CSSHandler.getIndexOfStyleSheet("customStyles")];t&&(t.disabled=!1)},toggleFontStyles:function(e,t){"questionStyles"==e?"active"==t?(o.assignStyleValue("questionStyles","fontFamily",window.$("questionStylesFont")),o.assignStyleValue("questionStyles","fontSize",window.$("questionStylesFontSize")),o.assignStyleValue("questionStyles","fontWeight",window.$("questionStylesBoldButton")),o.assignStyleValue("questionStyles","textDecoration",window.$("questionStylesUnderlineButton")),o.assignStyleValue("questionStyles","fontStyle",window.$("questionStylesItalicButton"))):(o.assignStyleValue("questionStyles","fontFamily",null),o.assignStyleValue("questionStyles","fontSize",null),o.assignStyleValue("questionStyles","fontWeight",null),o.assignStyleValue("questionStyles","textDecoration",null),o.assignStyleValue("questionStyles","fontStyle",null)):"choiceStyles"==e&&("active"==t?(o.assignStyleValue("choiceStyles","fontFamily",window.$("choiceStylesFont")),o.assignStyleValue("choiceStyles","fontSize",window.$("choiceStylesFontSize")),o.assignStyleValue("choiceStyles","fontWeight",window.$("choiceStylesBoldButton")),o.assignStyleValue("choiceStyles","textDecoration",window.$("choiceStylesUnderlineButton")),o.assignStyleValue("choiceStyles","fontStyle",window.$("choiceStylesItalicButton"))):(o.assignStyleValue("choiceStyles","fontFamily",null),o.assignStyleValue("choiceStyles","fontSize",null),o.assignStyleValue("choiceStyles","fontWeight",null),o.assignStyleValue("choiceStyles","textDecoration",null),o.assignStyleValue("choiceStyles","fontStyle",null))),this.applyCSS()},changeHeader:function(){var e=window.$("lookAndFeelSurveyFrame").contentWindow.document,t=window.jQuery("#LookAndFeelForm #header");if(e.getElementById("Header")){var i=e.getElementById("Header"),n=t.val()||"";n=window.handleTextForMixedContentHTTP(n),i.innerHTML=n}},changeFooter:function(){var e=window.$("lookAndFeelSurveyFrame").contentWindow.document,t=window.jQuery("#LookAndFeelForm #footer");if(e.getElementById("Footer")){var i=e.getElementById("Footer"),n=t.val()||"";n=window.handleTextForMixedContentHTTP(n),i.innerHTML=n}},changeButtonText:function(e){var t=window.$("lookAndFeelSurveyFrame").contentWindow.document;window.$("NextButtonText").value=window.$("NextButtonText").value.replace('"',"").replace("'",""),window.$("PreviousButtonText").value=window.$("PreviousButtonText").value.replace('"',"").replace("'",""),null==e?(t.getElementById("NextButtonText")?t.getElementById("NextButtonText").innerHTML=window.$("NextButtonText").value:t.getElementById("NextButton")&&(t.getElementById("NextButton").value=window.$("NextButtonText").value),t.getElementById("PreviousButtonText")?t.getElementById("PreviousButtonText").innerHTML=window.$("PreviousButtonText").value:t.getElementById("PreviousButton")&&(t.getElementById("PreviousButton").value=window.$("PreviousButtonText").value)):"NextButton"==e.name?t.getElementById("NextButtonText")?t.getElementById("NextButtonText").innerHTML=e.value:t.getElementById("NextButton")&&(t.getElementById("NextButton").value=e.value):"PreviousButton"==e.name&&(t.getElementById("PreviousButtonText")?t.getElementById("PreviousButtonText").innerHTML=e.value:t.getElementById("PreviousButton")&&(t.getElementById("PreviousButton").value=e.value))},alterProgressBar:function(){var e=window.$("ProgressBarDisplay"),t=e.options[e.selectedIndex].value,i="";"None"==t||("NoText"==t?i='<table class="ProgressBarContainer"><tbody><tr><td></td><td><div class="ProgressBarFillContainer"><div style="width: 0%;" class="ProgressBarFill"></div></div></td><td></td></tr></tbody></table>':"Text"==t?i='<table class="ProgressBarContainer"><tbody><tr><td>0%</td><td><div class="ProgressBarFillContainer"><div style="width: 0%;" class="ProgressBarFill"></div></div></td><td>100%</td></tr></tbody></table>':"VerboseText"==t&&(i='<table class="ProgressBarContainer"><tbody><tr><td colspan="3"><span>'+Object(n.default)("SurveyEngine","ProgressBarLabel")+'</span></td></tr><tr><td>0%</td><td><div class="ProgressBarFillContainer"><div style="width: 0%;" class="ProgressBarFill"></div></div></td><td>100%</td></tr></tbody></table>')),window.$("lookAndFeelSurveyFrame").contentWindow.document.getElementById("ProgressBar").innerHTML=i},applyExternalStylesheet:function(){var e=null;window.$("externalCSS")&&(e=window.$("externalCSS").value);var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,i=window.$("lookAndFeelSurveyFrame").contentWindow.document;if(e&&t.test(e)){var n=i.createElement("link");n.type="text/css",n.title="externalStyleSheet",n.rel="stylesheet",n.id="externalStyleSheet",n.href=e;var o=void 0;if(i.getElementById("externalStyleSheet"))window.Element.replace(i.getElementById("externalStyleSheet"),n);else if(-1!=this.CSSHandler.getIndexOfStyleSheet("customCSS")){o=i.getElementsByTagName("HEAD")[0].lastChild;window.Element.previous(o);o.title&&"customCSS"==o.title?window.Element.insert(o,{before:n}):o.previous()&&o.previous().title&&"customCSS"==o.previous().title?window.Element.insert(o.previous(),{before:n}):console.log("previous() function not supported")}else-1!=this.CSSHandler.getIndexOfStyleSheet("customStyles")?(o=i.getElementsByTagName("HEAD")[0].lastChild,window.Element.insert(o,{before:n})):i.getElementsByTagName("HEAD")[0].appendChild(n)}else""==e.replace(/^\s*|\s*$/g,"")&&i.getElementById("externalStyleSheet")&&window.Element.remove(i.getElementById("externalStyleSheet"))},addCustomCSS:function(){var e=this.skinStyles.customCSS;if(e){var t=window.$("lookAndFeelSurveyFrame").contentWindow.document,i=t.createElement("style");i.id="customCSS",i.type="text/css",i.rel="stylesheet",i.title="customCSS";var n=t.styleSheets[0];if(window.Qualtrics.Browser.IE?i.cssText=e:i.innerHTML=e,-1!=this.CSSHandler.getIndexOfStyleSheet("customCSS"))window.Qualtrics.Browser.IE?(n=t.styleSheets[this.CSSHandler.getIndexOfStyleSheet("customCSS")],n.cssText=e):(i.innerHTML=e,window.Element.replace(t.getElementById("customCSS"),i));else if(t.getElementById("externalStyleSheet"))window.Element.insert(t.getElementById("externalStyleSheet"),{after:i});else if(-1!=this.CSSHandler.getIndexOfStyleSheet("customStyles")){var o=t.getElementsByTagName("HEAD")[0].lastChild;window.Element.insert(o,{before:i})}else{t.getElementsByTagName("HEAD")[0].appendChild(i);var s=this.CSSHandler.getIndexOfStyleSheet("customCSS");n=t.styleSheets[s],window.Qualtrics.Browser.IE?n.cssText=e:(i.innerHTML=e,window.Element.replace(t.getElementById("customCSS"),i))}}},CSSHandler:{createStyleSheet:function(e){var t=window.$("lookAndFeelSurveyFrame").contentWindow.document,i=t.createElement("style");return i.type="text/css",i.rel="stylesheet",i.disabled="false",i.title=e,t.getElementsByTagName("HEAD")[0].appendChild(i),this.getIndexOfStyleSheet(e)},deleteStyles:function(e){var t=window.$("lookAndFeelSurveyFrame").contentWindow.document,i=t.styleSheets[e];if(i&&i.cssRules)for(var n=i.cssRules.length,o=0;o<n;o++)i.deleteRule(0);else i&&i.cssText&&(i.cssText="")},getIndexOfStyleSheet:function(e){for(var t=window.$("lookAndFeelSurveyFrame").contentWindow.document,i=t.styleSheets.length,n=0;n<i;n++)if(t.styleSheets[n].title==e)return n;return-1},createCSSRule:function(e,t,i){var n=window.$("lookAndFeelSurveyFrame").contentWindow.document,o=n.styleSheets[e];if(o){var s=o.cssRules?o.cssRules.length:o.rules.length,a=s-1<0?0:s;if(o.deleteRule)o.insertRule(t+"{"+i+"}",a);else if(o.removeRule)if(-1!=t.indexOf(","))for(var r=t.split(","),l=0;l<r.length;l++)o.addRule(r[l],i);else o.addRule(t,i);return a}return!1},removeCSSRule:function(e,t){var i=window.$("lookAndFeelSurveyFrame").contentWindow.document,n=i.styleSheets[e];n.deleteRule?n.deleteRule(t):n.removeRule&&n.removeRule(t)},transferStyles:function(e,t){if(-1!=this.getIndexOfStyleSheet(e)&&-1!=this.getIndexOfStyleSheet(t)){var i=window.$("lookAndFeelSurveyFrame").contentWindow.document,n=this.getIndexOfStyleSheet(e),o=this.getIndexOfStyleSheet(t),s=i.styleSheets[n],a=i.styleSheets[o];if(s&&s.deleteRule&&"customCSS"==e)for(var r=s.cssRules?s.cssRules.length:s.rules.length,l=0;l<r;l++)a.insertRule(s.cssRules[0].cssText,l),s.deleteRule(0);else if(s&&s.removeRule)for(var c=s.cssRules?s.cssRules.length:s.rules.length,d=0;d<c;d++){var u=s.rules[0].style.cssText,h=s.rules[0].selectorText;if(-1!=u.indexOf("url(")&&-1==u.indexOf("url(http")&&"externalStyleSheet"==e&&window.$("externalCSS")){var p=window.$("externalCSS").value,w=p.substring(0,p.lastIndexOf("/")+1),f=u.substring(0,u.lastIndexOf("url(")+4),v=u.substring(u.lastIndexOf("url(")+4);u=f+w+v}""!=u&&""!=h&&a.addRule(h,u),s.removeRule(0)}}}}};window.SkinStyler=o},1705:function(e,t,i){"use strict";var n=(i(1706),i(159)),o=i(1707),s=i(1719),a=i(333),r=i(54);Object(n.a)("surveys.edit"),n.b.appPhaseLoading(s.a);new Promise(function(e){Object(r.configureSurveyEditor)(),Object(a.a)().then(a.b),Object(o.a)(window.Event,window,s.b),e()})},1706:function(e,t,i){"use strict";var n=i(346),o=(i.n(n),i(347)),s=(i.n(o),i(348)),a=(i.n(s),i(349)),r=(i.n(a),i(350)),l=(i.n(r),i(351)),c=(i.n(l),i(352)),d=(i.n(c),i(353)),u=(i.n(d),i(354)),h=(i.n(u),i(355)),p=(i.n(h),i(356)),w=(i.n(p),i(357)),f=(i.n(w),i(358)),v=(i.n(f),i(359)),b=(i.n(v),i(360)),g=(i.n(b),i(361)),y=(i.n(g),i(362)),S=(i.n(y),i(363)),m=(i.n(S),i(364)),k=(i.n(m),i(365)),O=(i.n(k),i(366)),C=(i.n(O),i(367)),j=(i.n(C),i(368)),E=(i.n(j),i(369)),x=(i.n(E),i(370)),B=(i.n(x),i(371)),T=(i.n(B),i(372)),I=(i.n(T),i(373)),Q=(i.n(I),i(374)),A=(i.n(Q),i(375)),M=(i.n(A),i(376)),L=(i.n(M),i(377)),P=(i.n(L),i(378)),D=(i.n(P),i(379)),N=(i.n(D),i(380)),_=(i.n(N),i(381)),R=(i.n(_),i(382)),F=(i.n(R),i(383)),G=(i.n(F),i(384)),V=(i.n(G),i(385)),q=(i.n(V),i(386)),$=(i.n(q),i(387)),W=(i.n($),i(388)),H=(i.n(W),i(389)),U=(i.n(H),i(390)),z=(i.n(U),i(391)),X=(i.n(z),i(392)),J=(i.n(X),i(393)),Y=(i.n(J),i(394)),K=(i.n(Y),i(395)),Z=(i.n(K),i(396)),ee=(i.n(Z),i(397)),te=(i.n(ee),i(398)),ie=(i.n(te),i(399)),ne=(i.n(ie),i(400)),oe=(i.n(ne),i(401)),se=(i.n(oe),i(402)),ae=(i.n(se),i(403)),re=(i.n(ae),i(404)),le=(i.n(re),i(405)),ce=(i.n(le),i(406)),de=(i.n(ce),i(407)),ue=(i.n(de),i(187)),he=(i.n(ue),i(408)),pe=(i.n(he),i(409)),we=(i.n(pe),i(410)),fe=(i.n(we),i(411)),ve=(i.n(fe),i(412)),be=(i.n(ve),i(413)),ge=(i.n(be),i(414)),ye=(i.n(ge),i(415)),Se=(i.n(ye),i(416)),me=(i.n(Se),i(417)),ke=(i.n(me),i(418)),Oe=(i.n(ke),i(419)),Ce=(i.n(Oe),i(420)),je=(i.n(Ce),i(421)),Ee=(i.n(je),i(422)),xe=(i.n(Ee),i(423)),Be=(i.n(xe),i(424)),Te=(i.n(Be),i(425)),Ie=(i.n(Te),i(426)),Qe=(i.n(Ie),i(427)),Ae=(i.n(Qe),i(428)),Me=(i.n(Ae),i(429)),Le=(i.n(Me),i(430)),Pe=(i.n(Le),i(431)),De=(i.n(Pe),i(432)),Ne=(i.n(De),i(433)),_e=(i.n(Ne),i(434)),Re=(i.n(_e),i(435)),Fe=(i.n(Re),i(436)),Ge=(i.n(Fe),i(437)),Ve=(i.n(Ge),i(438)),qe=(i.n(Ve),i(439)),$e=(i.n(qe),i(440)),We=(i.n($e),i(441));i.n(We);i(116),i(138),i(131),window.moment=i(6),i(132),i(133),i(134),i(136),i(137),i(135),window.getMessage=i(0).default,i(117),i(118)},1707:function(e,t,i){"use strict";function n(e,t,i){Object(o.a)(),e.observe(t,"load",i)}t.a=n;var o=i(1708)},1708:function(e,t,i){"use strict";function n(){var e=i(1709).default,t=i(1711).default,n=i(936).default,o=i(1713).default,s=i(1715).default,a=i(1717).default;window.angular.module("surveys.edit.referenceLists",["qstrap"]).service("surveyReferenceListService",e).controller("SurveyReferenceListController",t).controller("SelectionReferenceLogicController",n).directive("srlEditor",o).directive("reusableSelectionList",s).directive("reusableSelection",a).name}t.a=n},1709:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(109),s=i(333),a=i(1710),r=i.n(a),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=function(){function e(t,i,o){n(this,e),this.qmodal=t,this.qhttp=i,this.$q=o,this.openModal=this.openModal.bind(this),this.closeModal=this.closeModal.bind(this)}return l(e,[{key:"openModal",value:function(){var e=window,t=e.Qualtrics;t.SearchAndReplace&&1==t.SearchAndReplace.startedSearchAndReplace&&t.SearchAndReplaceDialog.close(),void 0===this.modal&&(this.modal=this.qmodal({className:"selection-reference-list-modal Skin",controller:"SurveyReferenceListController",templateUrl:r.a})),this.modal.show()}},{key:"closeModal",value:function(){this.modal.close()}},{key:"setLists",value:function(e,t,n){var s=this,a=i(1).default;return o.e.getInstance().surveyEdited(a.getInstance().id),this.getLists().then(function(i){t.forEach(function(e){e.getRecodeValuesEnabled()&&e.setHasUserDefinedRecodeValues(),i.updateReferenceList(e.id,e)}),n.forEach(function(e){e.getRecodeValuesEnabled()&&e.setHasUserDefinedRecodeValues()});var o=[],a=[];return t.forEach(function(t){o.push(s.qhttp.submit("UpdateSurveyReferenceListSelections",{params:{SurveyID:e,ReferenceListID:t.id},url:"Ajax.php",method:"POST",data:t.getSelectionJson()},{userBlocking:!0,userInit:!0,blocksNav:!0}))}),n.forEach(function(t){a.push(s.qhttp.submit("createSurveyReferenceList",{params:{SurveyID:e},url:"Ajax.php",method:"POST",data:t.getSelectionJson()},{userBlocking:!0,userInit:!0,blocksNav:!0}).then(function(e){var n=e.ID;i.addReferenceList(n,t)}))}),s.$q.all(o).then(function(){return s.$q.all(a)})})}},{key:"getLists",value:function(){var e=i(1).default;return this.$q.when(Object(s.a)()).then(function(t){return Object(s.b)(t,!0).then(function(){return e.getInstance().getReferenceLists()})})}}]),e}();t.default=c,c.$inject=["qstrap.modal","qhttp","$q"]},1710:function(e,t){var i="/ui/legacyShared/legacyEditSurvey/js/modules/reference-lists/referenceListModal.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(i,'<ng-form name="referenceListsForm">\n\t<div class="modal-header">\n\t\t<h3 class="modal-title" qtranslate>EditSection.ManageReusableChoices</h3>\n\t\t<div class="btn btn-hover btn-select reference-list-modal-fields-button" qstrap.menu items="getReferenceListEditingFields()">\n\t\t\t<span class="icon icon-gear-lg"></span>\n\t\t\t<span class="caret"></span>\n\t\t</div>\n\t</div>\n\t<div class="modal-body">\n\t\t<div ng-if="locked" class="LockedWarning">\n\t\t\t<div class="Icon"></div>\n\t\t\t<span qtranslate>EditSection.SurveyLocked</span>\n\t\t</div>\n\t\t<div ng-if="loading" qstrap.spin spin-size="md" spin-if="loading"></div>\n\t\t<div ng-if="!loading" class="reference-lists-modal">\n\t\t\t<reusable-selection-list ctrl="reusableSelectionListCtrl"/>\n\t\t</div>\n\t</div>\n\t<div class="modal-footer">\n\t\t<button class="btn btn-hover btn-info" ng-disabled="!referenceListsForm.$valid || loading || locked || readOnly" id="surveyReferenceListModalUploadButton" ng-click="openUploadModal();">\n\t\t\t<span qtranslate>PanelsSection.ImportFromFile</span>\n\t\t</button>\n\t\t<button class="btn btn-success" ng-disabled="!referenceListsForm.$valid || loading || locked || readOnly" ng-click="onSave()" qstrap.spin id="surveyReferenceListModalButton" spin-if="saving" spin-invert="true">\n\t\t\t<i class="icon btn-icon-check" />\n\t\t\t<span qtranslate>SiteWide.Save</span>\n\t\t</button>\n\t\t<button class="btn btn-hover" ng-click="onClose()" qtranslate>SiteWide.Close</button>\n\t</div>\n</ng-form>\n')}]),e.exports=i},1711:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(334),s=i(1712),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t,o,a,r,l){var c=this;n(this,e),this.$scope=t,this.$window=o,this.$q=a,this.surveyReferenceListService=r,this.qtranslate=l,this.$scope.onSave=this.onSave.bind(this),this.$scope.openUploadModal=this.openUploadModal.bind(this),this.$scope.getReferenceListEditingFields=this.getReferenceListEditingFields.bind(this),this.$scope.refreshReferenceList=this.refreshReferenceList.bind(this),this.$scope.onClose=this.onClose.bind(this);var d=i(156).default;this.$scope.locked=d.getInstance().locked,this.$scope.toggleRecodeValuesEnabled=this.toggleRecodeValuesEnabled.bind(this),this.$scope.toggleVariableNamingEnabled=this.toggleVariableNamingEnabled.bind(this),this.digest=this.digest.bind(this),this.$scope.loading=!0,this.getReusableSelectionList().then(function(e){c.$scope.loading=!1,c.$scope.reusableSelectionListCtrl=new s.a(e),c.$scope.reusableSelectionListCtrl.setRenderFunction(c.digest),c.$scope.readOnly=c.$scope.reusableSelectionListCtrl.isReadOnly()})}return a(e,[{key:"digest",value:function(){this.$scope.$digest()}},{key:"onSave",value:function(){var e=this;if(this.$scope.readOnly)return this.$q.resolve();this.$scope.saving=!0;var t=[],n=[];this.$scope.reusableSelectionListCtrl.model.id?t.push(this.$scope.reusableSelectionListCtrl.model):n.push(this.$scope.reusableSelectionListCtrl.model);var o=i(156).default;return this.surveyReferenceListService.setLists(o.getInstance().id,t,n).then(function(){e.onClose(),e.$scope.saving=!1,e.$scope.reusableSelectionListCtrl.refreshDependencyViews(),window.Ajax.CachedRequest.clearCache()})}},{key:"getReferenceListEditingFields",value:function(){return[{label:this.qtranslate("EditSection.RecodeValues"),selected:this.$scope.reusableSelectionListCtrl.editRecodeValuesEnabled,action:this.$scope.toggleRecodeValuesEnabled},{label:this.qtranslate("EditSection.VariableNamingTitle"),selected:this.$scope.reusableSelectionListCtrl.editVariableNamingEnabled,action:this.$scope.toggleVariableNamingEnabled}]}},{key:"openUploadModal",value:function(){var e=this;i.e(9).then(i.bind(null,1798)).then(function(t){var i=t.default;e.surveyReferenceListService.getLists().then(function(t){new i({},function(){},e.surveyReferenceListService.openModal,e.refreshReferenceList.bind(e),t.list.length>0).show(),e.$scope.onClose()})})}},{key:"onClose",value:function(){this.$scope.reusableSelectionListCtrl.destroy(),this.surveyReferenceListService.closeModal()}},{key:"getReusableSelectionList",value:function(){var e=this;return this.surveyReferenceListService.getLists().then(function(t){var i=t.list;return i.length>0?i[0].clone():e.buildDefaultReferenceLists()})}},{key:"toggleRecodeValuesEnabled",value:function(){var e=this;this.getReusableSelectionList().then(function(){e.$scope.reusableSelectionListCtrl.toggleRecodeValuesEnabled()})}},{key:"toggleVariableNamingEnabled",value:function(){var e=this;this.getReusableSelectionList().then(function(){e.$scope.reusableSelectionListCtrl.toggleVariableNamingEnabled()})}},{key:"buildDefaultReferenceLists",value:function(){for(var e=new o.a,t=0;t<3;t++){var i=e.addSelection(null,t);i.text=i.getDefaultText()}return e}},{key:"refreshReferenceList",value:function(e){var t=this;this.surveyReferenceListService.getLists().then(function(i){i.refreshReferenceList(e),t.$scope.reusableSelectionListCtrl.refreshDependencyViews()})}}]),e}();t.default=r,r.$inject=["$scope","$window","$q","surveyReferenceListService","qtranslateFilter"]},1712:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i(334),s=i(681),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){if(n(this,e),!(t instanceof o.a))throw new Error('ReusableSelectionListController expects "model" on the scope to be a ReusableSelectionListModel');if(i(119).default.selectedRegistry.push(this),this.model=t,this.model.setParentForSelections(this),this.storedRecodeValues={},this.storedVariableNaming={},this.editRecodeValuesEnabled=this.model.getRecodeValuesEnabled(),this.editVariableNamingEnabled=this.model.getVariableNamingEnabled(),this.editRecodeValuesEnabled||this.editVariableNamingEnabled){var s=!0,a=!1,r=void 0;try{for(var l,c=this.reusableSelections[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;this.editRecodeValuesEnabled&&(this.storedRecodeValues[d.id]=d.recodeValue),this.editVariableNamingEnabled&&(this.storedVariableNaming[d.id]=d.variableNaming)}}catch(e){a=!0,r=e}finally{try{!s&&c.return&&c.return()}finally{if(a)throw r}}}this.selectionRenderFunctions={},this.recodeValueUpdateObserverFns={},this.variableNamingUpdateObserverFns={},this.setValidityFunctions={}}return a(e,[{key:"destroy",value:function(){i(119).default.selectedRegistry.remove(this)}},{key:"setRenderFunction",value:function(e){this.render=e}},{key:"toggleRecodeValuesEnabled",value:function(){this.editRecodeValuesEnabled=!this.editRecodeValuesEnabled,this.model.toggleRecodeValuesEnabled();for(var e=0,t=this.reusableSelections.length;e<t;++e){var i=this.reusableSelections[e];this.editRecodeValuesEnabled&&this.storedRecodeValues[i.id]?i.recodeValue=this.storedRecodeValues[i.id]:this.editRecodeValuesEnabled||(this.storedRecodeValues[i.id]=i.recodeValue),this.recodeValueUpdateObserverFns[i.id](i.recodeValue)}this.editRecodeValuesEnabled?this.storedRecodeValues={}:this.resetSelectionIdsIfNoResponses()}},{key:"toggleVariableNamingEnabled",value:function(){this.editVariableNamingEnabled=!this.editVariableNamingEnabled,this.model.toggleVariableNamingEnabled();var e=!0,t=!1,i=void 0;try{for(var n,o=this.reusableSelections[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;this.editVariableNamingEnabled&&this.storedVariableNaming[s.id]?s.variableNaming=this.storedVariableNaming[s.id]:this.editVariableNamingEnabled||(this.storedVariableNaming[s.id]=s.variableNaming,s.variableNaming=s.text),this.variableNamingUpdateObserverFns[s.id](s.variableNaming)}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}this.editVariableNamingEnabled&&(this.storedVariableNaming={})}},{key:"addSelectionRenderFunction",value:function(e,t){this.selectionRenderFunctions[t]=e}},{key:"registerRecodeValueUpdateObserver",value:function(e,t){this.recodeValueUpdateObserverFns[t]=e}},{key:"registerVariableNamingUpdateObserver",value:function(e,t){this.variableNamingUpdateObserverFns[t]=e}},{key:"refreshCanvas",value:function(){if(this.render){this.render();for(var e in this.selectionRenderFunctions)this.selectionRenderFunctions[e]();for(var t in this.variableNamingUpdateObserverFns)this.variableNamingUpdateObserverFns[t]()}}},{key:"refreshDependencyViews",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,o=Object.keys(this.model.dependencies)[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,r=this.model.dependencies[a];r.updateReusableSelections&&r.updateReusableSelections(),r.refreshCanvas&&r.refreshCanvas(),r.refreshDependencies&&r.refreshDependencies()}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}s.default.getInstance().refresh()}},{key:"refreshDependencies",value:function(){}},{key:"refreshQuestion",value:function(){this.refreshCanvas()}},{key:"showInlineScoring",value:function(){return!1}},{key:"isReadOnly",value:function(){return!!i(156).default.getInstance().versionId}},{key:"isLocked",value:function(){return!!i(156).default.getInstance().locked}},{key:"getSelectionDisplay",value:function(e,t,i){return window.QualtricsTools.filterForDisplay(e.build(t,i))}},{key:"canCarryForward",value:function(){return!1}},{key:"hasInPageDisplayLogic",value:function(){return!1}},{key:"canAddChoiceGroups",value:function(){return!1}},{key:"getPreviewMode",value:function(){return 1}},{key:"addSelectionAndRender",value:function(e,t,i){if(this.isLocked())return!1;var n=this.addSelection(e,t);return i&&this.refreshCanvas(),n}},{key:"addSelection",value:function(e,t){return this.model.addSelection(e,t,this)}},{key:"getSelectionById",value:function(e,t){if(!e)throw new Error('Missing required param "type"');if(!t)throw new Error('Missing required param "id"');return"reusableSelections"===e?this.model.getSelectionById(t):null}},{key:"getAxisDef",value:function(){return i(20).default.getAxisDef("y","MC")}},{key:"getDefaultPreviewMode",value:function(){}},{key:"getUndoPkg",value:function(){}},{key:"addUndo",value:function(){}},{key:"setSaved",value:function(){}},{key:"setEdited",value:function(){}},{key:"frameInternalNode",value:function(){}},{key:"resetSelectionIdsIfNoResponses",value:function(){var e=!0,t=!0,n=!1,o=void 0;try{for(var s,a=Object.keys(this.model.dependencies)[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var r=s.value,l=this.model.dependencies[r];if(l.selectionIdsAreLocked()||l.isLocked()){e=!1;break}}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}var c=i(156).default,d=this.editRecodeValuesEnabled||0!==c.getInstance().responses||this.model.hasUserDefinedRecodeValues(),u={};if(e||!d)for(var h=0,p=this.reusableSelections.length;h<p;++h)if(!d){var w=this.reusableSelections[h];w.recodeValue=(h+1).toString(),this.recodeValueUpdateObserverFns[w.id]&&this.recodeValueUpdateObserverFns[w.id](w.recodeValue)}return!!e&&u}},{key:"updateGradingData",value:function(){}},{key:"changeToDBifMC",value:function(){}},{key:"getRecodeListType",value:function(){return"reusableSelections"}},{key:"choices",get:function(){return this.reusableSelections}},{key:"selected",get:function(){return!0}},{key:"reusableSelections",set:function(e){this.model.selections=e},get:function(){return this.model.selections}},{key:"reusableSelectionsTrash",get:function(){return[]}},{key:"parentObj",get:function(){return{type:"ReferenceListModal"}}},{key:"options",get:function(){return{position:"VERT"}}},{key:"questionType",get:function(){return"MC"}}]),e}();t.a=r},1713:function(e,t,i){"use strict";function n(e){return window.QBuilder("div",{},[Object(a.a)(e.getLogicEditor())])}function o(){return{restrict:"E",scope:{dynamicSelection:"=",callback:"&onChange"},template:"<div></div>",link:function(e,t){var i=function(t){if(e.callback){var i=t.validate();e.callback({$valid:i,$newLogic:i?e.selectionReferenceLogic.getData():null})}};e.selectionReferenceLogic=new s.a(e.dynamicSelection.Logic,i),t.empty(),t.append(n(e.selectionReferenceLogic))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,i.d(t,"buildSelectionReferenceLogicEditor",function(){return n});var s=i(1714),a=i(536)},1714:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i(0),s=i(8),a=(i(266),function(){function e(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function(){function e(t,i){n(this,e);var o=new window.Q_LogicEditorSchema;o.addElement(window.Qualtrics.schemaElementLibrary.SelectionReferenceSet),this.logicEditor=new window.Q_LogicEditor(this,i,this.transformSetLogicToBooleanExpression(t),{schema:o}),this.logicEditor.minExpressions=0,this.logicEditor.allowConjunctions=!1,this.logicEditor.options={buildExpressionPrefixElement:this.buildExpressionPrefixElementFn},this.logicEditor.useSmartAdd=!0}return r(e,[{key:"getLogicEditor",value:function(){return this.logicEditor}},{key:"buildExpressionPrefixElementFn",value:function(e){var t=0===e?Object(o.default)("SiteWide","From"):Object(o.default)("Piping","Then");return Object(s.a)("label",{class:"logicEditorExpressionPrefixLabel"},t)}},{key:"getData",value:function(){if(this.logicEditor.isEmpty())return{StartWithEmptySet:!0,ExpressionSet:[]};for(var e=this.logicEditor.getData(),t=e[0],i=[],n=t[0]&&"union"===t[0].SetOperation,o=0;o<Object.keys(t).length-1;o++){var s=t[o],a={SetLocator:s.SetLocator,SetOperation:s.SetOperation,LogicType:s.LogicType};s.SetFilterOperand&&(a.SetFilterOperand=parseFloat(s.SetFilterOperand)),i.push(a)}return{StartWithEmptySet:n,ExpressionSet:i}}},{key:"transformSetLogicToBooleanExpression",value:function(e){if(!e)return null;for(var t={Type:"If"},i=0;i<e.ExpressionSet.length;i++){var n=e.ExpressionSet[i];"SelectionReferenceChoice"===n.LogicType&&(n.LogicType="SelectionReferenceSet");var o=window.Q_GlobalLogic.getDataFromLocator(n.SetLocator);n.SourceElementID=o.questionId,n.Type="Expression",i>0&&(n.Conjunction="And"),t[i]=n}return{0:t,Type:"BooleanExpression"}}}],[{key:"getQuestionPipingOptions",value:function(e){var t=this,n=[],o=i(207).default,s=o.getQuestionByQuestionId(e),r=["Y","X"].filter(function(e){return s.usesSelectionReferenceListForAxis(e)});if(r.length>0){var l=i(206).default,c=s.getPipingOptions("ChoiceGroup"),d=!0,u=!1,h=void 0;try{for(var p,w=c[Symbol.iterator]();!(d=(p=w.next()).done);d=!0){var f=p.value;!function(e){var i=r.filter(function(i){return t.isValidSubtype(e.SubType,i)});if(a(i,1)[0]){var o=Object.assign({},e);o.Description=l.getDescriptionFromLocator(e.Locator),n.push(o)}}(f)}}catch(e){u=!0,h=e}finally{try{!d&&w.return&&w.return()}finally{if(u)throw h}}}return n}},{key:"requiresOperand",value:function(e){return"string"==typeof e&&e.indexOf("ChoicesWithValues")>=0}},{key:"isValidSubtype",value:function(e,t){var n=i(206).default;return"Y"===t&&n.isChoiceLocator(e)&&"AllChoices"!==e||"X"===t&&n.isAnswerLocator(e)&&"AllAnswers"!==e||!1}},{key:"isQuestionSelected",value:function(e){return"string"==typeof e&&0===e.indexOf("QID")}},{key:"isReferenceListItemSelected",value:function(e){return"string"==typeof e&&0===e.indexOf("REFL")}}]),e}();t.a=l,window.SelectionReferenceLogic=l},1715:function(e,t,i){"use strict";function n(){return{restrict:"E",templateUrl:s.a,scope:{ctrl:"="}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=i(1716),s=i.n(o);n.$inject=[]},1716:function(e,t){var i="/ui/legacyShared/legacyEditSurvey/js/modules/reference-lists/ReusableSelectionList/reusableSelectionList.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(i,'<div id="{{model.id}}" class="QuestionBody selection-reference-list">\n\t<div class="reference-list-header-wrapper" ng-if="ctrl.model.selections.length > 0">\n\t\t<span class="reference-list-header RecodeValuesHeader" qtranslate>Javascript.RecodeValue</span>\n\t\t<span class="reference-list-header VariableNamingHeader" ng-show="ctrl.editVariableNamingEnabled" qtranslate>EditSection.VariableNamingTitle</span>\n\t\t<span class="reference-list-header DisplayTextHeader" qtranslate>EditSection.DisplayText</span>\n\t</div>\n    <reusable-selection ng-repeat="selection in ctrl.model.selections" ctrl="ctrl" selection="selection" />\n    <a href ng-if="ctrl.model.selections.length === 0" ng-click="ctrl.addSelectionAndRender(null, 0, false)" qtranslate>EditSection.AddFirstReusableChoiceLinkMessage</a>\n</div>')}]),e.exports=i},1717:function(e,t,i){"use strict";function n(){return{restrict:"E",templateUrl:r.a,scope:{ctrl:"=",selection:"="},link:function(e,t){function i(){var i=o(e.ctrl,e.selection),n=t.find(".selection-container");n.empty(),n.append(i)}function n(t){e.recodeValue=t}function a(t){e.variableNaming=t}e.active=e.selection.active,e.recodeValue=e.selection.recodeValue,e.variableNaming=e.selection.variableNaming,e.toggleSelectionEnabled=s.bind(e),e.onRecodeChange=function(){e.selection.recodeValue=e.recodeValue},e.onVariableNamingChange=function(){e.selection.variableNaming=e.variableNaming},e.onLeaveVariableNamingField=function(){e.variableNaming.trim()||(e.variableNaming=e.selection.text,e.onVariableNamingChange())},e.ctrl.addSelectionRenderFunction(i,e.selection.id),e.ctrl.registerRecodeValueUpdateObserver(n,e.selection.id),e.ctrl.registerVariableNamingUpdateObserver(a,e.selection.id),e.ctrl.resetSelectionIdsIfNoResponses(),i()}}}function o(e,t){function n(e){var n=window.Event.element(e),o=n.getAttribute("seriesindex");i(994).default.down.bind(t,e,o)()}var o=i(946).buildChoiceAsListItemElement,s=o(e,t);return s.querySelector("label.Choice").addEventListener("mousedown",n),s}function s(e){this.selection.setActive(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=i(1718),r=i.n(a);n.$inject=[]},1718:function(e,t){var i="/ui/legacyShared/legacyEditSurvey/js/modules/reference-lists/ReusableSelection/reusableSelection.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(i,'<ng-form name="referenceSelectionForm" class="reusable-selection">\n\t<div class="error" ng-if="!referenceSelectionForm.$valid" >\n\t\t<span class="icon icon-caution" />\n\t\t<span class="message" qtranslate>EditSection.RecodeMustBeNumber</span>\n\t</div>\n\t<div>\n\t\t<div class="checkboxWrapper" qstrap.tooltip position="top" content="{{\'SiteWide.Active\' | qtranslate}}">\n\t\t\t<input type="checkbox" qstrap.checkbox ng-model="active" on-change="toggleSelectionEnabled($value)" />\n\t\t</div>\n\t\t<input type="text" name="recodeValueInput" qstrap.input class="form-group RecodeValues" ng-class="{\'disabled\': !ctrl.editRecodeValuesEnabled}" ng-model="recodeValue" ng-change="onRecodeChange()" ng-pattern="/^(-)*[0-9]+$/" ng-required="ctrl.editRecodeValuesEnabled" ng-disabled="!ctrl.editRecodeValuesEnabled"/>\n\t\t<input type="text" name="variableNamingInput" qstrap.input class="form-group VariableNaming" ng-show="ctrl.editVariableNamingEnabled" ng-model="variableNaming" ng-change="onVariableNamingChange()" ng-blur="onLeaveVariableNamingField()"/>\n\t\t<div class="selection-container" /><br/>\n\t\t<div class="addRemoveSelectionButtons">\n\t\t\t<span class="icon icon-minus-filled" ng-click="selection.removeSelection()"></span>\n\t\t\t<span class="icon icon-plus-filled" ng-click="selection.insertBelowByClickingIcon()"></span>\n\t\t</div>\n\t</div>\n</ng-form>')}]),e.exports=i},1719:function(e,t,i){"use strict";function n(){o.a.RUM.appPhaseComplete(d),Object(l.a)(),(0,i(1724).default)(),o.a.QES_QuestionRenderCount=0,o.a.dragCallBack=null,o.a.dragCallBackOptions=null,o.a.QES_MouseOverWidgets=1,i(1725),o.a.QES_OverQuestion.init(),i(1726),o.a.selectedQuestionHeightWatcher=null,o.a.scrollInfo=o.a.getScrollInfo(),i(443),i(1727),o.a.customErrorHandler=o.a.QES_Error,a.e.observe(o.a,"scroll",o.a.updateScroll),a.e.observe(o.a,"DOMMouseScroll",o.a.QES_GlobalScrollDistributer),o.a.onmousewheel=s.a.onmousewheel=o.a.QES_GlobalScrollDistributer,o.a.Qualtrics.Navigation&&"SurveyOptions"==o.a.Qualtrics.Navigation.subSection&&o.a.QES_Global.openOptions(),o.a.$("LogoutLink")&&(o.a.$("LogoutLink").onclick=function(e){return t.saveSurvey(!1),s.a.Page.action="../?Brand=Qualtrics",c.a.post("Logout","","",""),!1}),i(1728),a.e.observe(s.a,"dragdrop",function(e){a.e.stop(e)}),o.a.updateCustomMousePos=function(e,t){t&&(o.a.mousePos[1]=t),o.a.QES_MouseOverWidgets&&(o.a.QES_OverQuestion.questionObj&&o.a.QES_OverQuestion.questionObj.element?0==o.a.QES_OverQuestion.suspend&&(o.a.QES_OverQuestion.questionObj.element!=o.a.QES_OverQuestion.lastElement||o.a.QES_OverQuestion.alwaysUpdate)&&"Trash"!=o.a.QES_OverQuestion.questionObj.parentObj.type&&(o.a.QES_OverQuestion.lastElement=o.a.QES_OverQuestion.questionObj.element,o.a.QES_OverQuestion.execute()):o.a.QES_OverQuestion.clearCallback&&o.a[o.a.QES_OverQuestion.clearCallback[0]]&&o.a[o.a.QES_OverQuestion.clearCallback[0]][o.a.QES_OverQuestion.clearCallback[1]]()),e&&o.a.dragCallBack&&o.a.dragCallBack(o.a.dragCallBackOptions)},o.a.customMouseUp=function(){t.preventFakeDragging=!1},i(181),o.a.updateScroll=function(e){o.a.scrollInfo=o.a.getScrollInfo(),e.clientX||e.pageX?o.a.updateCustomMousePos(e):o.a.updateCustomMousePos()},o.a.start=new Date,i(1729),i(156),i(999),i(1751),i(1752),o.a.blockRenderTimer=null,o.a.nextBlockToRender=null,o.a.blockPointer=0,o.a.debugQuestionCount=0,i(1754),i(675),i(1755),i(119),i(994),i(681),i(1756),i(1757),i(1758),i(1759),o.a.QualtricsCPTools.Highlighter.highlightSelection=function(e,t){o.a.QualtricsCPTools.Highlighter.autoHighlight(Object(a.a)(e.id),t)},i(1760),i(1761),i(1762),i(1763),s.a.onkeydown=function(e){e||(e=o.a.event),e.ctrlKey&&(o.a.ctrlKey=e.ctrlKey);var i=void 0;if(e.keyCode==a.e.KEY_BACKSPACE){i=a.e.element(e);var n=i.tagName;if("TEXTAREA"!=n&&"INPUT"!=n&&"InlineEditorElement"!=i.id&&!i.attributes.contenteditable)return a.e.stop(e),!1}if(e.keyCode==a.e.KEY_RETURN){if(i=a.e.element(e),"SearchInput"==i.id){var s=i.value;return o.a[s]&&o.a[s](),t[s]&&t[s](),a.e.stop(e),i=null,!1}i=null}},s.a.onkeyup=function(e){e||(e=o.a.event),e.ctrlKey&&(o.a.ctrlKey=0)},a.e.observe(s.a,"dblclick",function(){var e=o.a.inlineEditor.getInstance();e&&new Date-e.initTime<750&&e.selectAll()});var e=i(995).default;a.e.observe(s.a.body,"online",e.onlineEventHandler),a.e.observe(s.a.body,"offline",e.offlineEventHandler);var t=i(181).default;i(1764),Object(r.a)()}i.d(t,"a",function(){return d}),t.b=n;var o=i(25),s=i(674),a=i(9),r=i(1720),l=i(1722),c=i(4),d="waitForWindowLoadEvent"},1720:function(e,t,i){"use strict";function n(){s()("#ToolbarContainer").stick_in_parent()}i.d(t,"a",function(){return n});var o=i(687),s=i.n(o),a=i(1721);i.n(a)},1721:function(e,t){(function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(i){var n,o,s,a,r,l,c,d,u,h,p,w;for(null==i&&(i={}),u=i.sticky_class,s=i.inner_scrolling,d=i.recalc_every,c=i.parent,r=i.offset_top,a=i.spacer,o=i.bottoming,null==r&&(r=0),null==c&&(c=void 0),null==s&&(s=!0),null==u&&(u="is_stuck"),n=e(document),null==o&&(o=!0),l=function(e){var t;return window.getComputedStyle?(e=window.getComputedStyle(e[0]),t=parseFloat(e.getPropertyValue("width"))+parseFloat(e.getPropertyValue("margin-left"))+parseFloat(e.getPropertyValue("margin-right")),"border-box"!==e.getPropertyValue("box-sizing")&&(t+=parseFloat(e.getPropertyValue("border-left-width"))+parseFloat(e.getPropertyValue("border-right-width"))+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))),t):e.outerWidth(!0)},h=function(i,h,p,w,f,v,b,g){var y,S,m,k,O,C,j,E,x,B,T,I;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),O=n.height(),j=i.parent(),null!=c&&(j=j.closest(c)),!j.length)throw"failed to find stick parent";if(y=m=!1,(T=null!=a?a&&i.closest(a):e("<div />"))&&T.css("position",i.css("position")),E=function(){var e,t,o;if(!g&&(O=n.height(),e=parseInt(j.css("border-top-width"),10),t=parseInt(j.css("padding-top"),10),h=parseInt(j.css("padding-bottom"),10),p=j.offset().top+e+t,w=j.height(),m&&(y=m=!1,null==a&&(i.insertAfter(T),T.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(u),o=!0),f=i.offset().top-(parseInt(i.css("margin-top"),10)||0)-r,v=i.outerHeight(!0),b=i.css("float"),T&&T.css({width:l(i),height:v,display:i.css("display"),"vertical-align":i.css("vertical-align"),float:b}),o))return I()},E(),v!==w)return k=void 0,C=r,B=d,I=function(){var e,l,c,S;if(!g&&(c=!1,null!=B&&0>=--B&&(B=d,E(),c=!0),c||n.height()===O||E(),c=t.scrollTop(),null!=k&&(l=c-k),k=c,m?(o&&(S=c+v+C>w+p,y&&!S&&(y=!1,i.css({position:"fixed",bottom:"",top:C}).trigger("sticky_kit:unbottom"))),c<f&&(m=!1,C=r,null==a&&("left"!==b&&"right"!==b||i.insertAfter(T),T.detach()),e={position:"",width:"",top:""},i.css(e).removeClass(u).trigger("sticky_kit:unstick")),s&&(e=t.height(),v+r>e&&!y&&(C-=l,C=Math.max(e-v,C),C=Math.min(r,C),m&&i.css({top:C+"px"})))):c>f&&(m=!0,e={position:"fixed",top:C},e.width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(e).addClass(u),null==a&&(i.after(T),"left"!==b&&"right"!==b||T.append(i)),i.trigger("sticky_kit:stick")),m&&o&&(null==S&&(S=c+v+C>w+p),!y&&S)))return y=!0,"static"===j.css("position")&&j.css({position:"relative"}),i.css({position:"absolute",bottom:h,top:"auto"}).trigger("sticky_kit:bottom")},x=function(){return E(),I()},S=function(){if(g=!0,t.off("touchmove",I),t.off("scroll",I),t.off("resize",x),e(document.body).off("sticky_kit:recalc",x),i.off("sticky_kit:detach",S),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),j.position("position",""),m)return null==a&&("left"!==b&&"right"!==b||i.insertAfter(T),T.remove()),i.removeClass(u)},t.on("touchmove",I),t.on("scroll",I),t.on("resize",x),e(document.body).on("sticky_kit:recalc",x),i.on("sticky_kit:detach",S),setTimeout(I,0)}},p=0,w=this.length;p<w;p++)i=this[p],h(e(i));return this}}).call(this)},1722:function(e,t,i){"use strict";function n(){o()}function o(){r.c.Responders.register({onCreate:function(e){e.url=Object(l.a)(e.url)},onComplete:function(e,t,i){i&&i.ServerError&&1===i.ServerError.length&&i.ServerError[0]===Object(s.default)("ErrorCodes","ESDEF10")&&(new a.a).show()}})}t.a=n;var s=i(0),a=i(1723),r=i(9),l=i(300)},1723:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=i(10),s=i(926),a=i(0),r=i(504),l=i(542),c=i(7),d=i(22),u=i(9),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),p=function(){function e(){n(this,e);var t={text:Object(a.default)("EditSection","ReloadPage"),type:l.b.Danger,onclick:function(){u.e.stopObserving(window,"beforeunload",window.Qualtrics.savePageOnUnload),window.location.reload()}},i={title:Object(a.default)("EditSection","CannotSave"),bodyElement:new r.a("ErrorCodes.ESDEF10ui"),footerButtons:[t],className:"data-validation-failure-modal"};this.modal=new l.c(i)}return h(e,[{key:"show",value:function(){Object(s.a)("Data validation failure modal shown",{userId:c.a.User.userId,surveyId:c.a.User.currentSurveyId}),this.modal.show()}},{key:"close",value:function(){this.modal.close()}}]),e}();p=o.b([Object(d.a)("data-validation-failure-modal")],p),t.a=p},1724:function(e,t,i){"use strict";function n(){a.e.observe(s.a,"Survey:finishRendering",o)}function o(){var e=Promise.resolve(),t=i(156).default;return t&&t.getInstance()&&!t.getInstance().locked&&(e=Object(r.a)().then(function(e){return Object(l.f)(e)}).then(function(e){e.byteCt>=1e7&&Object(c.default)(Object(d.default)("EditSection","LargeSurveyWarning"),!0)}).catch(function(e){console.error("Error saving a new version of the survey",e.message)})),a.e.stopObserving(s.a,"Survey:finishRendering",o),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s=i(674),a=i(9),r=i(333),l=i(109),c=i(443),d=i(0)},1725:function(e,t){window.QES_OverQuestion={alwaysUpdate:!1,callback:["QuestionActions","updateIcons"],clearCallback:["QuestionActions","clearIcons"],init:function(){this.suspend=!1,this.questionObj=null,this.lastElement=null,this.location=null},execute:function(){window[window.QES_OverQuestion.callback[0]][window.QES_OverQuestion.callback[1]]()}}},1726:function(e,t){window.MouseHold={isDown:!1,set:function(){window.MouseHold.isDown=!0,window.Event.observe(document,"mouseup",window.MouseHold.release)},release:function(){window.MouseHold.isDown=!1,window.Event.stopObserving(document,"mouseup",window.MouseHold.release)},get:function(){return window.MouseHold.isDown}}},1727:function(e,t){window.QES_GlobalScrollDistributer=function(e){window.QES_Global.stopScrolling();var t=0;e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3),(t=Math.round(0-50*t))&&null!==window.QES_Global.scrollRedirectElement&&(window.QES_Global.scrollRedirectElement&&(window.QES_Global.scrollRedirectElement.scrollTop+=t),window.Event.stop(e))}},1728:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(7).a.savePage=function(e){e||(e=!1),window.inlineEditor.getInstance()&&window.inlineEditor.getInstance().removeInlineEditor(),window.QES_Global.saveSurvey(e)}},1729:function(e,t,i){var n=window,o=n.QModules;o.loadType="script",o.loadModule("QRegion.js"),o.loadModule("raphael.js"),o.loadType="eval",i(995),i(1730),i(1),i(956),i(957),i(1731),i(210),i(1732),i(930),i(943),i(207),i(501),i(1733),i(941),i(955),i(1734),i(1735),i(1736),i(543),i(1737),i(679),i(1738),i(208),i(996),i(997),i(678),i(549),i(550),i(1739),i(1740),i(1741),i(1742),i(1743),i(1744),i(1745),i(1746),i(1747),i(1748),i(954),i(1749)},1730:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(7).a.savePage=function(){window.BaseForm.getInstance()&&window.BaseForm.getInstance().save&&window.BaseForm.getInstance().save(!1)}},1731:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.Class.create();n.prototype={id:null,noteId:null,message:null,excerpt:null,userId:null,userFirstName:null,userLastName:null,userFullName:null,dateTime:null,removed:!0,initialize:function(){this.baseInit()},baseInit:function(){this.id="note_"+Math.round(1e8*Math.random())},generate:function(e){this.noteId=e.ID,this.message=e.Message,this.userId=e.UserID,this.userFullName=e.UserFullName,this.dateTime=e.DateTime,this.removed=e.Removed,this.excerpt=e.Excerpt},exportData:function(){return{ID:this.noteId,Message:this.message,UserID:this.userId,Timestamp:this.timestamp,Removed:this.removed}}},window.BaseNote=n,t.default=n},1732:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(9),r=i(109),l=i(210),c=i(182),d=i(0),u=i(140),h=i(8),p=i(4),w=i(7),f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),v=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="Conjoint",e.objType="ConjointBlock",e.conjointEditor=null,e.conjointInfo=null,e.saved=null,e.tempInfo=null,e.saveTimer=null,e.initialize(),e}return s(t,e),f(t,[{key:"build",value:function(){var e=Object(h.a)("div",{});return this.conjointInfo={},e}},{key:"generate",value:function(e){e&&(this.conjointInfo=e);try{return window.CPModules.loadLegacyModule("conjointeditor.js"),this.conjointEditor||(this.conjointEditor=new window.Qualtrics.ConjointEditor({onEdit:this.onInlineEdit.bind(this),onSave:this.onConjointSave.bind(this),headsUp:!1})),this.conjointEditor.generate(this.conjointInfo),this.saved=!0,!0}catch(e){return alert(e),!1}}},{key:"render",value:function(e){this.parentId&&(e=this.parentId);var t=window.BaseForm.getInstance(),i="";t.collapsedBlockMode||(i=Object(h.a)("div",{className:"TheAddBlockLink",clickcallback:"Block.addBlockBelow",instanceid:this.id},Object(d.default)("EditSection","AddBlock"))),this.element=Object(h.a)("div",{className:"BlockOuter"},[this.buildBlockInner(),i]),Object(a.a)(e).appendChild(this.element)}},{key:"noQuestionsRenderer",value:function(){this.questionsDiv.appendChild(this.buildInner())}},{key:"buildInner",value:function(){var e=this.conjointInfo?this.conjointInfo.DataExportTag:"",t=null,i=Object(h.a)("div",{className:"ConjointContainer"},[Object(h.a)("div",{className:"Sidebar"},[t=Object(h.a)("span",{className:"ExportTag Editable",clickcallback:"ConjointBlock.editExportTag:"+this.id+"($evt)"},[e])]),Object(h.a)("div",{className:"ConjointEditorContainer"},[this.buildEditor()])]);if(e&&e.length>3){var n=this.shrinkTextToFit(e);Object(a.a)(t).setStyle({fontSize:n+"px"})}return i}},{key:"buildEditor",value:function(){return this.conjointInfo?this.conjointEditor.build():Object(h.a)("div",{className:"Loading loadingImage"})}},{key:"buildHeader",value:function(){var e=this.conjointInfo?this.conjointInfo.Description:"";return Object(h.a)("div",{className:"BlockHeader",clickcallback:"BaseBlock.expand",instanceid:this.id},[Object(h.a)("div",{className:"Arrow",clickcallback:"BlockActions.headerClick($evt)"}),Object(h.a)("span",{className:"Conjoint BlockTitle Editable",clickcallback:"ConjointBlock.editTitle:"+this.id+"($evt)"},[e]),Object(h.a)("div",{className:"ExpandLabel",bubbleup:"true",clickcallback:"BlockActions.headerClick($evt)"},Object(d.default)("EditSection","ClickToShowQuestions")),this.buildHeaderMenuButton()])}},{key:"buildHeaderMenuButton",value:function(){return Object(h.a)("div",{className:"block-options-button btn btn-sm btn-select btn-hover",downcallback:"QMenu.showMenu(ConjointBlock.getConjointMenu:"+this.id+', $el, {"checkForFixed":1}, $evt)'},[Object(h.a)("span",{},Object(d.default)("Conjoint","ConjointBlockOptions")),Object(h.a)("span",{className:"caret"})])}},{key:"getConjointMenu",value:function(){this.conjointInfo.Type;return{items:[{display:Object(d.default)("SiteWide","AdvancedOptions")+"...",action:"ConjointBlock.openAdvancedOptions:"+this.id},{separator:!0},{display:Object(d.default)("Conjoint","DeleteConjoint")+"...",action:"ConjointBlock.confirmDeleteConjoint:"+this.id}]}}},{key:"openAdvancedOptions",value:function(){this.tempInfo=null,new u.a({id:"AdvancedConjointOptions",width:780,buttons:["cancel","save:ConjointBlock.saveAdvancedOptions:"+this.id]}).setContent(this.conjointEditor.buildAdvancedOptions())}},{key:"saveAdvancedOptions",value:function(){this.conjointEditor.saveAdvancedOptions()}},{key:"setConjointProperty",value:function(e,t){this.conjointInfo[e]=t,this.onConjointSave()}},{key:"editTitle",value:function(e){new c.default(window.Event.element(e),this.conjointInfo,"Description",{afterEdit:this.afterTitleEdit.bind(this),onEdit:this.onInlineEdit.bind(this)}).edit()}},{key:"editExportTag",value:function(e){new c.default(window.Event.element(e),this.conjointInfo,"DataExportTag",{afterEdit:this.afterTitleEdit.bind(this),onEdit:this.onInlineEdit.bind(this)}).edit()}},{key:"afterTitleEdit",value:function(){}},{key:"onInlineEdit",value:function(){this.onConjointSave()}},{key:"onConjointSave",value:function(){this.saved=!1,this.startSaveTimer(),window.QuestionTopCache={}}},{key:"startSaveTimer",value:function(){this.saveTimer&&window.clearTimeout(this.saveTimer),this.saveTimer=window.setTimeout(this.save.bind(this),2e3)}},{key:"save",value:function(){if(this.conjointEditor){this.conjointInfo=this.conjointEditor.conjointInfo,this.saved=!0,new a.c.Request(p.a.getAjaxURL("SetConjoint",null,{SurveyID:w.a.User.currentSurveyId}),{parameters:{ConjointInfo:Object.toJSON(this.conjointInfo)}});var e=i(1).default;r.e.getInstance().surveyEdited(e.getInstance().id)}}},{key:"confirmDeleteConjoint",value:function(){if(this.isLocked())return window.msg(Object(d.default)("EditSection","Locked")),!1;var e=window.Survey.getInstance().id,t=this.conjointInfo.Description,i={title:Object(d.default)("ResultsSection","Confirmation"),strong:!1,deleteButtonText:Object(d.default)("SiteWide","Delete"),deleteMessage:Object(d.default)("EditSection","ConjointConfirmDeletion",t),deleteCallBackParameters:{ajaxAction:"DeleteConjoint",ajaxParameters:{SID:e,conjointID:this.conjointInfo.ID},ajaxOnComplete:"ConjointBlock.completeRemoveConjoint:"+this.id}};window.QualtricsCPTools.showDeleteConfirmation(i)}},{key:"completeRemoveConjoint",value:function(){this.conjointEditor.destroy(),window.removeElement(this.element);var e=i(1).default;r.e.getInstance().surveyEdited(e.getInstance().id),window.Survey.getInstance().reload()}},{key:"handleCreateConjointResult",value:function(e){var t=window.Qualtrics.parseJSON(e.responseText);t.ConjointInfo&&(this.generate(t.ConjointInfo),this.redraw())}}]),t}(l.default);v.getInstance=function(e){return l.default.getInstance(e)},window.ConjointBlock=v,t.default=v},1733:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(){var e=!1;return function(t,i){return!window.QualtricsCPTools.containsJavaScript(t)||(e||(e=!0,window.QualtricsCPTools.showAlertDialog({message:Object(n.default)("EditSection",i),okCallBack:function(){e=!1}})),!1)}}();window.hasJavaScript=o,t.default=o},1734:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=i(182),s=i(7),a=i(4),r=window.Class.create(o.default,{objType:"SurveyDescription",keyMap:{enter:null},maxlength:100,options:1,text:null,label:null,validationRegEx:null,validationMsg:null,initialize:function(e){this.parentObj=e,this.id="SurveyDescriptionEditable"},afterEdit:function(){if(this.text=window.stripNewLines(this.text),this.edited){var e=this.text;if(this.validationRegEx&&(!e||!e.match(this.validationRegEx)))return alert(this.validationMsg),void this.revert();window.msg("Saving...","surveydescription"),new n.c.Request(a.a.getAjaxURL("SetSurveyDescription",null,{SurveyID:s.a.User.currentSurveyId}),{method:"post",parameters:{title:e}})}},onEmpty:function(){}});window.SurveyDescription=r,t.default=r},1735:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){n(this,e),this.edited=0,this.editing=0,this.id=null,this.parentObj=null,this.text="",this.text=t,this.id="ch"+Math.round(1e8*Math.random())};window.QuestionText=o,t.default=o},1736:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.selection=null,this.seriesIndex=null,this.selection=t,this.seriesIndex=i}return o(e,[{key:"edit",value:function(){var e=arguments[2]||{};e.select=!0,this.selection.edit(null,this.seriesIndex,e)}}]),e}();window.SelectionSeriesIndexMapper=s,t.default=s},1737:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(543),r=function(e){function t(e,i,s){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.objType="questionSpecificData",a.id=e.id+"_QSD_"+i,a.languages={},a.parentObj=e,s&&s.Language)for(var r in s.Language)s.Language[r].QuestionSpecificData&&s.Language[r].QuestionSpecificData[i]&&(a.languages[r]=s.Language[r].QuestionSpecificData[i]);return a}return s(t,e),t}(a.default);window.QuestionSpecificData=r,t.default=r},1738:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(679),s=i(8),a=i(209),r=i(9),l=window.Class.create(o.default,{path:"ChoiceGroup",objType:"choiceGroup",parentList:"choiceGroups",parentObj:null,parentGroupId:null,options:null,text:null,id:null,choiceGroupId:null,choiceGroupOrder:null,groupItemsCache:null,isSelection:!1,isGroup:!0,randomization:null,keyMap:{enter:"onEnter"},initialize:function(e,t,i){this.id=a.a.createNewId("gr"),l.registry[this.id]=this,this.choiceGroupId=e,this.options={},this.text=Object(n.default)("SiteWide","Group"),i&&(this.parentObj=i),t&&this.generate(t),this.languages={}},edit:function($super,e,t,i){if(this.isLocked())return void window.msg(Object(n.default)("EditSection","Locked"));$super(e,i)},afterEdit:function(e){window.QuestionTypes.Universal.makeDescendantsEditable(this.getInner(e.seriesIndex,e.lang)),this.originalText!=this.text&&this.storeUndo(this.id,this.originalText,this.text,e.seriesIndex,e.lang)},isLocked:function(){if(this.parentObj&&this.parentObj.isLocked)return this.parentObj.isLocked()},generate:function(e){if(e.ChoiceGroupOrder){this.choiceGroupOrder=[];for(var t=0,i=e.ChoiceGroupOrder.length;t<i;++t)this.choiceGroupOrder.push(e.ChoiceGroupOrder[t]);this.getGroupItems()}e.GroupLabel&&(this.text=e.GroupLabel),e.Options&&(e.Options.push&&"function"==typeof e.Options.push&&(e.Options={}),this.options=e.Options),e.Randomization&&(this.randomization=e.Randomization),e.ParentGroupId&&(this.parentGroupId=e.ParentGroupId)},getGroupItems:function(e){if(this.groupItemsCache&&!e)return this.groupItemsCache;var t=[];if(this.choiceGroupOrder)for(var i=0,n=this.choiceGroupOrder.length;i<n;++i)if(0==String(this.choiceGroupOrder[i]).indexOf("cg_")){var o=this.parentObj.getChoiceGroupByChoiceGroupId(this.choiceGroupOrder[i]);o&&(o.parentGroupId=this.choiceGroupId,t.push(o))}else{var s=this.parentObj.getChoiceByChoiceId(Number(this.choiceGroupOrder[i]));s&&(s.parentGroupId=this.choiceGroupId,t.push(s))}return this.groupItemsCache=t,t},addItem:function(e){this.choiceGroupOrder||(this.choiceGroupOrder=[]);for(var t=0,i=this.choiceGroupOrder.length;t<i;++t)if(this.choiceGroupOrder[t]==e)return void console.error('ChoiceGroup Item: "'+e+'" already exists');this.choiceGroupOrder.push(e)},removeItem:function(e){for(var t=0,i=this.choiceGroupOrder.length;t<i;++t)if(this.choiceGroupOrder[t]==e)return void this.choiceGroupOrder.splice(t,1)},buildOutlineSelection:function(e){return e&&e.lang&&e.lang!=window.BaseForm.getInstance().defaultLanguage?Object(s.a)("label",{id:this.id+"_"+e.lang,className:"Selection ChoiceGroup",objtype:"choiceGroup"},[Object(s.a)("span",{className:"Editable",clickcallback:"BaseQuestion.editChoiceGroup",language:e.lang,instanceid:this.parentObj.id,p1:"$evt",p2:this.id,p3:"",p4:e.lang},this.getText(e.seriesIndex,e.lang))]):Object(s.a)("label",{id:this.id,className:"Selection ChoiceGroup",objtype:"choiceGroup"},[Object(s.a)("span",{className:"Editable"},this.text)])},build:function(){return!this.getOption("HideTitle")&&this.text},getClasses:function(){var e="";return this.getOption("HideTitle")&&(e=" HiddenTitle"),e},getChoiceGroupId:function(){return this.choiceGroupId},getData:function(){var e={ChoiceGroupOrder:this.choiceGroupOrder,GroupLabel:this.text};return this.parentGroupId&&(e.ParentGroupId=this.parentGroupId),this.randomization&&(e.Randomization=this.randomization),this.options&&(e.Options=this.options),e},getInner:function(e,t){var i=null,n=this.id,o=window.BaseForm.getInstance(),s=o.defaultLanguage;if(t&&t!=s&&(n=n+"_"+t),(e||0===e)&&(n=n+"_"+e),i=Object(r.a)(n))return a.a.fastDown(i,"Editable")},showRichTextEditor:function(e,t){var i=window.inlineEditor.seriesId,o=window.inlineEditor.lang,s=this.getText(e,t);window.inlineEditor.clear();var a=this.getText(e,t),r=this;new window.EditorPopup({title:Object(n.default)("EditSection","ChoiceGroupText"),contents:a,width:750,height:400,seriesIndex:e,saveCallBack:function(n,a){var l=void 0;a.options&&a.options.seriesIndex&&(l=a.options.seriesIndex),r.isDefault=!1,n=window.handleTextForMixedContentHTTP(n),r.setText(n,l,t),r.edited=!0,r.parentObj.setSaved(0);var c={};t&&(c.lang=t),r.parentObj.refreshCanvas(c),s!=r.getText(e,t)&&r.storeUndo(r.id,s,r.text,i,o)}})},storeUndo:function(e,t,i,n,o){window.Qualtrics.History.getInstance().addAction("Set Selection Text",{action:"ChoiceGroup.setText",instanceId:e,parameters:[t,n,o,!0]},{action:"ChoiceGroup.setText",instanceId:e,parameters:[i,n,o,!0]})},buildMenu:function(){var e=void 0;return"Matrix"!=this.parentObj.questionType&&(e={display:Object(n.default)("EditSection","Selection"),submenu:"ChoiceGroup.getSelectionMenuDef:"+this.id}),{title:this.text.stripTags(),items:[this.getParentGroupMenu(),{display:Object(n.default)("EditSection","HideGroupTitle"),action:this.path+".toggleOption:"+this.id+"(HideTitle, true)",checked:this.getOption("HideTitle",!1)},{action:this.path+".showRichTextEditor:"+this.id,display:Object(n.default)("ResultsSection","RichTextEditor")},{display:Object(n.default)("SiteWide","MoveUp"),action:this.path+".moveUp:"+this.id,className:"MoveUp"},{display:Object(n.default)("SiteWide","MoveDown"),action:this.path+".moveDown:"+this.id,className:"MoveDown"},{separator:!0},e,{display:Object(n.default)("EditSection","ChoiceGroupRandomization"),submenu:"ChoiceGroup.getRandomizationMenuDef:"+this.id},{separator:!0},{display:Object(n.default)("EditSection","RemoveGroup"),action:this.path+".remove:"+this.id,className:"Remove"}]}},getRandomizationMenuDef:function(){var e=this.getOption("randomization","Default");return{togglecheckexclusive:!0,items:[{display:Object(n.default)("QuestionOptions","RD_UseQuestion"),action:"ChoiceGroup.unsetOption:"+this.id+"(randomization, true)",checked:"Default"==e},{separator:!0},{display:Object(n.default)("QuestionOptions","RD_NoRD"),action:"ChoiceGroup.setOption:"+this.id+"(randomization, None, true)",checked:"None"==e},{display:Object(n.default)("QuestionOptions","RD_RDAll"),action:"ChoiceGroup.setOption:"+this.id+"(randomization, All, true)",checked:"All"==e}]}},getSelectionMenuDef:function(){var e=this.getOption("Selection");return{togglecheckexclusive:!0,items:[{display:Object(n.default)("EditSection","SingleAnswerWithinQuestion"),action:"ChoiceGroup.setOption:"+this.id+"(Selection,SAWithinQuestion, true)",checked:"SAWithinQuestion"==e},{display:Object(n.default)("EditSection","SingleAnswerWithinGroup"),action:"ChoiceGroup.setOption:"+this.id+"(Selection,SAWithinGroup, true)",checked:"SAWithinGroup"==e},{separator:!0},{display:Object(n.default)("EditSection","MultipleAnswerWithinQuestion"),action:"ChoiceGroup.setOption:"+this.id+"(Selection,MAWithinQuestion, true)",checked:"MAWithinQuestion"==e}]}},toggleOption:function(e,t){this.setOption(e,!this.getOption(e),t)},setOption:function(e,t,i){this.parentObj.setSaved(0),"randomization"==e?(this.randomization||(this.randomization={}),this.randomization.Type=t):this.options[e]=t,"Selection"!=e||"SAWithinGroup"!=t&&"MAWithinGroup"!=t&&"MAWithinQuestion"!=t||"SA"==this.parentObj.options.answers&&(this.parentObj.setOption("answers","MA"),window.Toolbox&&window.Toolbox.getInstance().render()),i&&this.parentObj.refreshCanvas()},getOption:function(e,t){if("randomization"==e){if(this.randomization&&this.randomization.Type)return this.randomization.Type}else if(void 0!==this.options[e])return this.options[e];if(void 0!==t)return t;if("Selection"==e){var i="SAWithinQuestion";return"MA"==this.parentObj.options.answers&&(i="MAWithinQuestion"),i}},unsetOption:function(e,t){"randomization"==e&&void 0!==this[e]?delete this[e]:void 0!==this.options[e]&&delete this.options[e],t&&this.parentObj.refreshCanvas()},onEmpty:function(){this.confirmRemove()},confirmRemove:function(){this.remove()},remove:function(){this.parentObj.choiceGroups&&this.parentObj.choiceGroups[this.choiceGroupId]&&(this.parentObj.choiceGroups[this.choiceGroupId].ungroupAllItems(),delete this.parentObj.choiceGroups[this.choiceGroupId]);var e=null;if(e=this.parentGroupId?this.parentObj.choiceGroups[this.parentGroupId]:this.parentObj,e.choiceGroupOrder)for(var t=0,i=e.choiceGroupOrder.length;t<i;++t)if(e.choiceGroupOrder[t]==this.choiceGroupId){e.choiceGroupOrder.splice(t,1);break}this.parentObj.choiceGroups&&0==Object.keys(this.parentObj.choiceGroups).length&&(this.parentObj.choiceGroups=null,this.parentObj.choiceGroupOrder=null),this.parentObj.refreshCanvas(),this.parentObj.setSaved(0),window.Toolbox.getInstance().render()},clearItemsCache:function(){this.groupItemsCache=null},removeAllItems:function(){if(this.groupItemsCache)for(var e=this.groupItemsCache.length-1;e>-1;--e)this.groupItemsCache[e].remove()},ungroupAllItems:function(){if(this.groupItemsCache){for(var e=[],t=0,i=this.groupItemsCache.length;t<i;++t)e.push(this.groupItemsCache[t]);for(var n=0,o=e.length;n<o;++n)e[n].assignGroup()}},getPosition:function(){var e=this.getParentGroup()||this.parentObj;if(e.choiceGroupOrder)for(var t=0,i=e.choiceGroupOrder.length;t<i;++t)if(e.choiceGroupOrder[t]==this.getSystemId())return t;return null},moveUp:function(){(this.getParentGroup()||this.parentObj).moveChoiceGroupItem(this.choiceGroupId,-1)},moveDown:function(){(this.getParentGroup()||this.parentObj).moveChoiceGroupItem(this.choiceGroupId,1)},moveChoiceGroupItem:function(e,t){this.parentObj.moveChoiceGroupItem(e,t,this)},onEnter:function(e,t){if(t.shiftKey){var i=this.parentObj.createNewChoiceGroup(null,this.getPosition()+1);this.parentObj.refreshCanvas(),i.edit({lang:e.lang})}else{e.removeInlineEditor();this.parentObj.addChoiceAndRender(null,null,this.choiceGroupId).edit({lang:e.lang})}}});l.registry={},l.getInstance=function(e){return l.registry[e]},window.ChoiceGroup=l,t.default=l},1739:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=i(208),s=i(0),a=i(8),r=window.Class.create(o.default,{objType:"columnLabel",parentList:"columnLabels",spinner:"ColumnLabelsCounter",textEntry:null,axis:"x",isLabelDefault:!0,keyMap:{enter:"onEnter",backspace:"onBackSpace"},initialize:function($super,e,t,i,n){$super(e),this.seriesIndex=t,this.columnLabelIndex=t,this.languages=i,n&&(this.id=n)},setEdited:function(){this.isLabelDefault=!1},isDefaultLabel:function(){return this.isLabelDefault},setIsDefaultLabel:function(e){this.isLabelDefault=!!e},buildInlineEditorMenuButton:function(e){return Object(a.a)("div",{className:"inlineEditorOptions",editordowncallback:"showMenu"},[Object(a.a)("b",{bubbleup:!0},[Object(a.a)("b",{bubbleup:!0})])])},buildMenu:function(e){return{items:[{action:"BaseSelection.showRichTextEditor:"+this.id+"(,"+this.language+")",display:Object(s.default)("ResultsSection","RichTextEditor")}]}},getLeft:function(){return Object(n.a)(this.id)&&Object(n.a)(this.id).offsetLeft<5?this.parentObj.answers.length>0?this.parentObj.answers[0]:void 0:this.getPrev()},getRight:function(){return this.getNext()},insertBelow:function(e){var t=this.getPosition();if(null!==t){var i=Object(s.default)("EditSection","DefaultLabel",""+(t+2)),o=this.parentObj.addColumnLabelAndRender(i,t+1);return o.edit(null,null,e),Object(n.a)(this.spinner+"_Spinner").value=this.parentObj.options.ColumnLabelsCounter,o}},buildOutlineSelection:function(e){var t=window,i=t.BaseForm,n=t.Survey,o=t.Qualtrics;return e&&e.lang&&e.lang!=i.getInstance().defaultLanguage?(this.translation=!0,this.language=e.lang,Object(a.a)("label",{id:this.id+"_"+e.lang,className:"Selection ColumnLabel",objtype:"ColumnLabel"},[Object(a.a)("span",{className:"Editable",clickcallback:"BaseQuestion.editColumnLabel",language:e.lang,instanceid:this.parentObj.id,p1:"$evt",p2:this.id,p3:"",p4:e.lang},this.getText(e.seriesIndex,e.lang))])):"Translate"==o.Navigation.subSection||"TranslateBlock"==o.Navigation.subSection?Object(a.a)("label",{id:this.id,className:"Selection ColumnLabel",objtype:"ColumnLabel"},[Object(a.a)("span",{className:""},this.text)]):0==n.getInstance().defaultPreviewMode?Object(a.a)("span",{id:this.id,className:"Selection ColumnLabel",objtype:"ColumnLabel"},[Object(a.a)("span",{className:"TopRight"},[Object(a.a)("span",{className:"BottomLeft"},[Object(a.a)("span",{className:"BottomRight Editable ColumnLabel",clickcallback:"BaseQuestion.editColumnLabel",language:e.lang,instanceid:this.parentObj.id,p1:"$evt",p2:this.id,p3:"",p4:e.lang},[this.getText(e.seriesIndex,e.lang)])])])]):"Blocks"==o.Navigation.subSection?Object(a.a)("label",{id:this.id,className:"Selection ColumnLabel",objtype:"ColumnLabel"},[Object(a.a)("span",{className:"Editable",clickcallback:"BaseQuestion.editColumnLabel",language:e.lang,instanceid:this.parentObj.id,p1:"$evt",p2:this.id,p3:"",p4:e.lang},this.getText(e.seriesIndex,e.lang))]):void 0},getColumnLabelIndex:function(){return this.columnLabelIndex},onEnter:function(e,t){var i=this.parentObj.options.ColumnLabelsCounter,n=e.isEmpty();if(e.removeInlineEditor(),!n){if(this.columnLabelIndex==i-1){if(i>=window.QuestionTypes[this.parentObj.questionType].questionOptions.sections.ColumnLabelsCounter.maxValue)return;this.parentObj.addColumnLabelAndRender();this.parentObj.getColumnLabelById(this.columnLabelIndex+1).edit(t,null,{lang:e.lang})}t||(t=window.event),window.Event.stop(t)}},onBackSpace:function(e,t){if(e.isEmpty()){e.removeInlineEditor();var i=this.parentObj.getColumnLabelById(this.columnLabelIndex-1);i&&i.edit(t,null,{lang:e.lang}),t||(t=window.event),window.Event.stop(t)}}});window.ColumnLabel=r,t.default=r},1740:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(208),o=window.Class.create(n.default,{getAnyId:function(){return this.id}});window.SubSelection=o,t.default=o},1741:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o={Matrix:{Profile:function(e){var t={Answers:{}},i=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;if(r.choiceId&&(t.Answers[r.choiceId]={},r.series))for(var l=0,c=r.series.length;l<c;++l)r.series[l]&&(t.Answers[r.choiceId][l+1]={Display:r.series[l]})}}catch(e){n=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}return t},Bipolar:function(e){var t={Choices:{},Answers:{}};t.Answers={};var i=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;r.series&&(void 0===r.series[0]&&(r.series[0]=""),void 0===r.series[1]&&(r.series[1]=""),r.text=r.series[0].replace(/\\/g,"\\\\").replace(/:/g,"\\:")+":"+r.series[1].replace(/\\/g,"\\\\").replace(/:/g,"\\:"),t.Choices[r.choiceId]={Display:r.text})}}catch(e){n=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}return t}},GAP:function(e){var t={Choices:{}},i=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;if(void 0!==r.choiceId){var l=[];if(r.series){var c=!0,d=!1,u=void 0;try{for(var h,p=r.series[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var w=h.value,f="";w&&" "!=w&&(f=w),l.push(f)}}catch(e){d=!0,u=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw u}}}t.Choices[r.choiceId]={GapWhy:l}}}}catch(e){n=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}return t},CS:function(e,t){var i={Labels:{}};if(t){var n=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value;l.answerId&&(i.Labels[l.answerId]={Display:l.text})}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}return i},Slider:function(e,t,i){var o={Labels:{}};if(t){var s=!0,a=!1,r=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;d.answerId&&(o.Labels[d.answerId]={Display:d.text})}}catch(e){a=!0,r=e}finally{try{!s&&c.return&&c.return()}finally{if(a)throw r}}}if(i&&i.options&&i.options.NotApplicable&&(o.Labels.NA={Display:i.options.NotApplicableText||Object(n.default)("QuestionText","NotApplicable")}),e[0]&&e[0].parentObj&&e[0].parentObj.options.SnapToGrid){o.Answers={};for(var u=e[0].parentObj,h=(u.options.CSSliderMax-u.options.CSSliderMin)/u.options.GridLines,p=0;p<=u.options.GridLines;p++){var w=h*p+u.options.CSSliderMin,f=Math.round(w);u.options.NumDecimals&&(f=window.QuestionTypes.Universal.roundNumber(w,Number(u.options.NumDecimals))),o.Answers[p+1]={Display:f}}}return o},PGR:function(e,t){var i={Answers:{},Groups:{}};if(t)for(var n=0,o=t.length;n<o;++n)i.Groups[n]=t[n].text;return i},SBS:function(e,t,i){for(var n={Answers:{},AdditionalQuestions:{}},o=0;o<t.length;o++){var s=t[o],a={},r={},l={},c={};if(s.series)for(var d=0;d<s.series.length;d++){var u={Display:s.series[d]};a[d+1]=u,s.recodeValues&&(r[d+1]=s.recodeValues[d]),s.variableNaming&&(l[d+1]=s.variableNaming[d]),s.analysis&&(0==s.analysis[d+1]?c[d+1]="No":1==s.analysis[d+1]&&(c[d+1]="on"))}var h=s.meta,p={Answers:a,QuestionText:s.text,RecodeValues:r,VariableNaming:l};c&&(p.AnalyzeChoices=c),s.displayLogic&&(p.DisplayLogic=s.displayLogic.getData()),s.answerDataExportTag&&(p.AnswerDataExportTag=s.answerDataExportTag),s.defaultChoices&&(p.DefaultChoices=s.defaultChoices),h&&(p.QuestionType=h.QuestionType,p.Selector=h.Selector,p.SubSelector=h.SubSelector,p.ChoiceColumnWidthPixels=null,h.choicesWidthPixels&&(p.Configuration||(p.Configuration={}),p.Configuration.ChoiceColumnWidthPixels=h.choicesWidthPixels),p.Validation=h.Validation,h.GraphicSize&&(p.GraphicSize=h.GraphicSize),h.ExpandedGraphicSize&&(p.ExpandedGraphicSize=h.ExpandedGraphicSize)),s.hasImage&&(p.HasImage=s.hasImage,p.ImageDisplay=s.imageDisplay,p.ImageLocation=s.imageLocation),n.AdditionalQuestions[o+1]=p}if(n.NumberOfQuestions=t.length,i&&i.gradingData){var w=!0,f=!1,v=void 0;try{for(var b,g=i.gradingData[Symbol.iterator]();!(w=(b=g.next()).done);w=!0){var y=b.value,S=parseInt(y.AnswerID),m=y.SeriesID,k=n.AdditionalQuestions[S];k.GradingData||(k.GradingData=[]);var O=k.GradingData.length;k.GradingData.push({AnswerID:m,ChoiceID:y.ChoiceID,Grades:y.Grades,index:O})}}catch(e){f=!0,v=e}finally{try{!w&&g.return&&g.return()}finally{if(f)throw v}}}return n}};window.SelectionPostPackagers=o,t.default=o},1742:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Matrix:{Profile:function(e){var t={choicesByChoiceId:{}};if(e.Answers){var i=void 0;i=Array.isArray(e.Answers)?e.Answers.keys():Object.keys(e.Answers);var n=!0,o=!1,s=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c={series:null};t.choicesByChoiceId[l]=c,c.series=new Array;var d=e.Answers[l];if(d){var u=void 0;u=Array.isArray(d)?d.keys():Object.keys(d);var h=!0,p=!1,w=void 0;try{for(var f,v=u[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var b=f.value,g=d[b],y="";g.Display&&(y=g.Display),c.series.push(y)}}catch(e){p=!0,w=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw w}}}}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}return t},Bipolar:function(e){var t={choicesByChoiceId:{}};if(e.Choices){var i=void 0;i=Array.isArray(e.Choices)?e.Choices.keys():Object.keys(e.Choices);var n=!0,o=!1,s=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c={series:null};t.choicesByChoiceId[l]=c;var d=e.Choices[l];if(d.Display){var u=d.Display.replace(/\\\\/g,"\\~").replace(/\\:/g,"\\^"),h=u.replace(/\\\^/g,":").replace(/\\\\/g,"\\"),p="Right",w=u.indexOf(":");-1!=w&&(h=u.substr(0,w).replace(/\\\^/g,":").replace(/\\~/g,"\\"),p=u.substr(w+1).replace(/\\\^/g,":").replace(/\\~/g,"\\"),c.series=[h,p])}}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}return t}},GAP:function(e){var t={choicesByChoiceId:{}};if(e.Choices){var i=void 0;i=Array.isArray(e.Choices)?e.Choices.keys():Object.keys(e.Choices);var n=!0,o=!1,s=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value;if("function"!=typeof e.Choices[l]){var c={series:null};if(t.choicesByChoiceId[l]=c,c.series=new Array,e.Choices[l].GapWhy)for(var d=0,u=e.Choices[l].GapWhy.length;d<u;++d)c.series.push(e.Choices[l].GapWhy[d])}}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}return t},PGR:function(e){if(e){var t={answersByAnswerId:{}},i=0;if(e.Groups){var n=void 0;n=Array.isArray(e.Groups)?e.Groups.keys():Object.keys(e.Groups);var o=!0,s=!1,a=void 0;try{for(var r,l=n[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var c=r.value;i++;var d=new window.Answer(e.Groups[c]);t.answersByAnswerId[i]=d}}catch(e){s=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}}return t}},SBS:function(e){var t={},i=e.AdditionalQuestions;if(i&&!Object.isArray(i)){t.answersByAnswerId={};for(var n in i){var o=i[n],s=new window.Answer(o.QuestionText);t.answersByAnswerId[n]=s,s.series=new Array,s.recodeValues=new Array,s.variableNaming=new Array,Object.isArray(o.Answers)&&(o.Answers={}),o.AnalyzeChoices&&(s.analysis={});for(var a in o.Answers){var r=o.Answers[a];s.series.push(r.Display),o.RecodeValues&&o.RecodeValues[a]&&s.recodeValues.push(o.RecodeValues[a]),o.VariableNaming&&o.VariableNaming[a]&&s.variableNaming.push(o.VariableNaming[a]),o.AnalyzeChoices&&o.AnalyzeChoices[a]&&("on"==o.AnalyzeChoices[a]?s.analysis[a]=!0:"No"==o.AnalyzeChoices[a]&&(s.analysis[a]=!1))}s.meta={QuestionType:o.QuestionType,Selector:o.Selector,SubSelector:o.SubSelector},o.GraphicSize&&(s.meta.GraphicSize=o.GraphicSize),o.ExpandedGraphicSize&&(s.meta.ExpandedGraphicSize=o.ExpandedGraphicSize),o.HasImage&&(s.hasImage=o.HasImage,s.imageDisplay=o.ImageDisplay,s.imageLocation=o.ImageLocation),o.Configuration&&o.Configuration.ChoiceColumnWidthPixels&&(s.meta.choicesWidthPixels=o.Configuration.ChoiceColumnWidthPixels),o.AnswerDataExportTag&&(s.answerDataExportTag=o.AnswerDataExportTag),o.DefaultChoices&&(s.defaultChoices=o.DefaultChoices),o.Validation&&(s.meta.Validation=o.Validation)}return t}}};window.SelectionPostUnPackagers=n,t.default=n},1743:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o={MC:function(e,t){t.Configuration&&t.Configuration.LabelPosition&&e.setOption("labelPosition",t.Configuration.LabelPosition)},GAP:function(e,t){if(t.Choices){var i=e.getSelectionListToRender("choices"),n=!0,o=!1,s=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c=l.series;if(c){e.answers.length=0;var d=!0,u=!1,h=void 0;try{for(var p,w=c[Symbol.iterator]();!(d=(p=w.next()).done);d=!0){var f=p.value;e.addAnswer(f,void 0,!0)}}catch(e){u=!0,h=e}finally{try{!d&&w.return&&w.return()}finally{if(u)throw h}}}break}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}}if(e.questionSpecificData={},t.AnalysisText){var v=new window.QuestionSpecificData(e,"AnalysisText",t);v.text=t.AnalysisText,e.questionSpecificData.AnalysisText=v}if(t.WhyText){var b=new window.QuestionSpecificData(e,"WhyText",t);b.text=t.WhyText,e.questionSpecificData.WhyText=b}},SBS:function(e,t){},Matrix:function(e){e.options.RepeatHeaders&&"none"!=e.options.RepeatHeaders&&e.setOption("RepeatHeadersController","ON")},SS:function(e,t){if(t.Category)if(e.options.Category=t.Category,"Bars"==t.Category){var i=t.Scale.split("_");e.options.Bars=i[0],i.length>1?e.options.BarType=i[1]:e.options.BarType="HBAR"}else"Gauges"==t.Category&&(e.options.Gauges=t.Scale)},TE:function(e,t){e.createTextGradingEditorObjects&&e.createTextGradingEditorObjects(),"AUTO"===t.Selector&&(t.SearchSource&&(e.SearchSource=t.SearchSource),t.Configuration&&(e.Configuration=t.Configuration),t.SubSelector&&(e.subSelector=t.SubSelector))},Slider:function(e){e.createEquationGradingEditorObjects&&e.createEquationGradingEditorObjects()},HeatMap:function(e,t){if(e.Graphics=t.GraphicID,t.Width){e.setOption("GraphicWidth",t.Width),e.setOption("GraphicHeight",t.Height);var i=t.GraphicVersion||(new Date).valueOf();e.setOption("GraphicVersion",i)}},HotSpot:function(e,t){if(e.Graphics=t.GraphicID,e.setOption("Visibility",t.Visibility),t.Width){e.setOption("GraphicWidth",t.Width),e.setOption("GraphicHeight",t.Height);var i=t.GraphicVersion||(new Date).valueOf();e.setOption("GraphicVersion",i)}},HL:function(e,t){e.highlightText=t.HighlightText,e.excludedWords=t.ExcludedWords||{},e.wordChoiceIds=t.WordChoiceIds||[],e.answers.each(function(e){e.backgroundColor=t.Answers[e.answerId].BGColor,e.textColor=t.Answers[e.answerId].TextColor}),e.colorScale=t.ColorScale,e.reversedColorScale=t.ReversedColorScale},Draw:function(e,t){e.setOption("BoxSize",t.Configuration.BoxSize)},FileUpload:function(e,t){e.questionSpecificData={};var i=new window.QuestionSpecificData(e,"ScreenCaptureText",t);i.text=t.ScreenCaptureText||Object(n.default)("EditSection","ScreenCaptureText"),e.questionSpecificData.ScreenCaptureText=i,"ScreenCapture"!=e.selector&&(e.ignoreQuestionSpecificData=!0)}};window.QES_UnPackagers=o,t.default=o},1744:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={DB:function(e,t){t.Configuration&&""==t.Configuration.LinkText&&delete t.Configuration.LinkText},Matrix:function(e,t){if("Profile"==e.selector)t.Answers={},t.AnswerColumns=e.answers.length,t.Configuration||(t.Configuration={}),t.Configuration.VariableCount=e.answers.length;else if("Bipolar"==e.selector){t.AnswerColumns=e.answers.length;for(var i in t.Answers)t.Answers[i]&&(t.Answers[i].Display=i)}else"TE"==e.selector&&window.QuestionTypes.Universal.packageNumerics(e,t)},SS:function(e,t){var i=e.options.Category;if(t.Category=i,"Gauges"==i?t.Scale=e.options.Gauges:"Bars"==i&&(t.Scale=e.options.Bars,e.options.BarType&&""!=e.options.BarType&&"HBAR"!=e.options.BarType&&(t.Scale=t.Scale+"_"+e.options.BarType)),t.Choices)for(var n in t.Choices)t.Choices[n].Display=""},TE:function(e,t){if("FORM"==e.selector||"AUTO"==e.selector){var i=!0,n=!1,o=void 0;try{for(var s,a=e.choices[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var r=s.value;r.meta&&(t.Choices[r.choiceId].TextEntry="on")}}catch(e){n=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}}else window.QuestionTypes.Universal.packageNumerics(e,t)},HeatMap:function(e,t){if(t.GraphicID=e.Graphics,null==t.GraphicID&&(t.GraphicID=0),e.options.GraphicWidth){t.GraphicWidth=e.options.GraphicWidth,t.GraphicHeight=e.options.GraphicHeight;var i=e.options.GraphicVersion||(new Date).valueOf();t.GraphicVersion=i,t.GraphicSize="1"}},HotSpot:function(e,t){if(t.GraphicID=e.Graphics,t.Visibility=e.options.Visibility,e.options.GraphicWidth){t.GraphicWidth=e.options.GraphicWidth,t.GraphicHeight=e.options.GraphicHeight;var i=e.options.GraphicVersion||(new Date).valueOf();t.GraphicVersion=i}},Timing:function(e,t){t.QuestionText="Timing"},NPS:function(e,t){t.QuestionType="MC",t.Selector="NPS",t.ColumnLabels=e.exportColumnLabels()},HL:function(e,t){t.Choices={},t.ChoiceOrder=[],t.HighlightText=e.highlightText,t.ExcludedWords=e.excludedWords,t.WordChoiceIds=e.wordChoiceIds;for(var i=1,n=0;n<e.highlightWords.length;n++){var o=t.WordChoiceIds[n];if(o||(o=e.nextChoiceId++),t.ChoiceOrder.length>=200)break;e.excludedWords[n]?i++:(t.Choices[o]=e.highlightWords[n],t.Choices[o].Display=i+": "+t.Choices[o].Word,t.ChoiceOrder.push(o),i++)}e.answers.each(function(e){t.Answers[e.answerId].BGColor=e.backgroundColor,t.Answers[e.answerId].TextColor=e.textColor}),t.ReversedColorScale=e.reversedColorScale,t.ColorScale=e.colorScale}};window.QES_Packagers=n,t.default=n},1745:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={scalePointsIndex:null,triggersIndex:null,getScaleLibrary:function(e){return"TE"==e.questionType&&"FORM"==e.selector?"forms":"scales"},getScale:function(e,t,i){t||(t="likert");var o=window,s=o.choiceScales,a=s[e],r=void 0,l=2;if(a.defaultLength&&(l=a.defaultLength),i&&(l=i),"category"==t){var c=n.getPossibleLengths(e),d=c[c.length-1],u=n.getRawScale(e,d);r=[],r.push(u.first());for(var h=2;h<l;++h)r.push("&nbsp;");r.push(u.last())}else r=n.getRawScale(e,i);return r.clone()},getRawScale:function(e,t){var i=window,o=i.choiceScales,s=o[e],a=null;if(s){var r=2;if(s.defaultLength&&(r=s.defaultLength),t&&(r=t),s.choices["length"+r])a=s.choices["length"+r];else if(s.choices.multiLength){var l=void 0;l=7==s.choices.multiLength.length?{length2:[1,5],length3:[1,3,5],length4:[0,1,5,6],length5:[0,1,3,5,6],length6:[0,1,2,4,5,6],length7:[0,1,2,3,4,5,6]}:{length2:[1,3],length3:[1,2,3],length4:[0,1,3,4],length5:[0,1,2,3,4]};var c=l["length"+r];if(c){a=[];for(var d=0,u=c.length;d<u;++d)a.push(s.choices.multiLength[c[d]])}else a=s.choices.multiLength}else{var h=n.getClosestLength(e,r);a=s.choices["length"+h]}}return a.clone()},getPossibleLengthsFromMultiLength:function(e){var t=window,i=t.choiceScales;if(!i[e].choices.multiLength)return[2,3,4,5,6,7];for(var n=[],o=1;o<i[e].choices.multiLength.length;o++)n.push(o+1);return n},getPossibleLengths:function(e){var t=window,i=t.choiceScales,o=i[e]&&i[e].choices;if(o){var s=[];for(var a in o)if("multiLength"!=a){var r=a.substr(6);s.push(Number(r))}if(o.multiLength){var l=n.getPossibleLengthsFromMultiLength(e);s=s.concat(l)}return s.sort(),s.uniq()}},getClosestLength:function(e,t){var i=n.getPossibleLengths(e);if(i){for(var o=i[0],s=0,a=i.length;s<a;++s){var r=Math.abs(i[s]-t),l=Math.abs(o-t);if(i[s]==t)return i[s];r<l&&(o=i[s])}return o}},getASiblingLength:function(e,t,i,o){if("category"==t)return i+o;var s=n.getClosestLength(e,i),a=n.getPossibleLengths(e);if(i>a[a.length-1])return!1;if(i==a[a.length-1]&&o>0)return!1;if(i<a[0]&&o>0)return a[0];for(var r=0,l=a.length;r<l;++r)if(a[r]==s&&a[r+o])return a[r+o]},previewQuestionObj:null,activePreviewing:!1,getPreviewScaleClosure:function(e,t){return function(i){i||(i=window.event),window.Event.stop(i);var o=window.Event.element(i),s=o.getAttribute("scaletype");return n.previewScale(e,t,s),!1}},previewScale:function(e,t,i){var o=window,s=o.QuestionActions;if(n.activePreviewing){var a=s.selectedRegistry[0],r=a.getScaleDefinition(t);if(i||(i="likert",r&&r.scaleType&&(i=r.scaleType)),a){var l=a.getAxisDef(t),c=l.listType;if(c&&(n.previewQuestionObj&&n.previewQuestionObj.previewId==a.id||(n.previewQuestionObj=a.clone(!0),n.previewQuestionObj.unpackage(),n.previewQuestionObj.previewId=a.id,n.previewQuestionObj.backupAxis(t)),n.previewQuestionObj)){(0,window.deleteChildren)(a.questionCanvas);var d=n.getScale(e,i);r.reverse&&(d=d.reverse()),n.previewQuestionObj[c].length=0;var u=!0,h=!1,p=void 0;try{for(var w,f=d[Symbol.iterator]();!(u=(w=f.next()).done);u=!0){var v=w.value;n.previewQuestionObj.addSelection(c,v)}}catch(e){h=!0,p=e}finally{try{!u&&f.return&&f.return()}finally{if(h)throw p}}n.previewQuestionObj.renderCanvas({parentElement:a.questionCanvas})}}a=null}},generateScalePointsIndex:function(){n.scalePointsIndex={},n.triggersIndex=[];var e=window,t=e.choiceScales;for(var i in t){var o=t[i],s=o.triggers,a=o.choices;if(s){var r=!0,l=!1,c=void 0;try{for(var d,u=s[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var h=d.value;n.triggersIndex.push({trigger:h,scale:i})}}catch(e){l=!0,c=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw c}}}for(var p in a){var w=a[p],f=!0,v=!1,b=void 0;try{for(var g,y=w[Symbol.iterator]();!(f=(g=y.next()).done);f=!0){var S=g.value;S&&(n.scalePointsIndex[S.toLowerCase()]=i)}}catch(e){v=!0,b=e}finally{try{!f&&y.return&&y.return()}finally{if(v)throw b}}}}},findScaleByTrigger:function(e){n.triggersIndex||n.generateScalePointsIndex();for(var t=0,i=n.triggersIndex.length;t<i;++t){var o=n.triggersIndex[t].trigger,s=!1;if(o&&o.accept){for(var a=0,r=o.accept.length;a<r;++a)-1!==e.search(o.accept[a])&&(s=!0,a=r);if(s&&o.reject)for(var l=0,c=o.reject.length;l<c;++l)-1!==e.search(o.reject[l])&&(s=!1,l=c)}if(s){var d=n.triggersIndex[t].scale,u=window,h=u.choiceScales,p=null;return h[d].defaultLength&&(p=h[d].defaultLength),{axis:"Y",scaleName:d,scaleType:"likert",length:p,reverse:null}}}},findScaleByText:function(e,t){var i=String(e);i=i.toLowerCase().strip(),n.scalePointsIndex||n.generateScalePointsIndex();var o=n.scalePointsIndex[i],s=!1;if(o){for(var a=n.getPossibleLengths(o),r=[],l=0,c=a.length;l<c;++l){var d=n.getRawScale(o,a[l]);if(d)if(void 0!==t)d[t].toLowerCase()==i&&r.push(a[l]),d[d.length-t-1].toLowerCase()==i&&(r.push(a[l]),s=!0);else for(var u=0,h=d.length;u<h;++u)if(d[u]==i){r.push(a[l]);break}}if(r.length){return{scaleName:o,lengths:r,reverse:s}}}return!1},setCustomScale:function(e){if(!n.scalePointsIndex||!n.scalePointsIndex[e[0]]){var t={},i=window,o=i.choiceScales;t["length"+e.length]=e,o.customAnswers={lib:"scales",name:"Custom",defaultLength:e.length,choices:t},n.generateScalePointsIndex()}}};window.choiceScaleHelpers=n,t.default=n},1746:function(e,t,i){"use strict";function n(e){return String(e).replace(/(\n\r|\n|\r)/g," ")}Object.defineProperty(t,"__esModule",{value:!0}),window.stripNewLines=n,t.default=n},1747:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(7).a.isNumeric=function(e){return void 0!==e&&!isNaN(e)&&""!=e}},1748:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7);n.a.findSequence=function(e,t,i){if(n.a.isNumeric(e)){var o=1;return e=Number(e),n.a.isNumeric(t)&&(t=Number(t),o=e-t),String(e+o)}return!1}},1749:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(1750),i(272)},1750:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o,s,a;!function(e){e.SurveyDuration="SurveyDuration",e.NumTextEntry="NumTextEntry",e.NumMatrixSelections="NumMatrixSelections",e.FieldsetSize="FieldsetSize",e.ScoreReporting="ScoreReporting",e.WCAGCompliance="WCAGCompliance",e.MobileCompatibility="MobileCompatibility",e.GrammaticalConjunctions="GrammaticalConjunctions",e.DisplayLogic="DisplayLogic",e.PipedText="PipedText",e.CompleteTranslations="CompleteTranslations",e.UndisplayedPageQuestion="UndisplayedPageQuestion",e.LastQuestionDB="LastQuestionDB",e.ProtectedDataPolicy="ProtectedDataPolicy"}(a||(a={}));var r;!function(e){e[e.Severe=0]="Severe",e[e.Warning=1]="Warning",e[e.Suggestion=2]="Suggestion",e[e.Complete=3]="Complete"}(r||(r={}));var l;!function(e){e.Methodology="Methodology",e.SurveyErrors="SurveyError",e.Compliance="Compliance"}(l||(l={}));l.Methodology,l.SurveyErrors,l.Compliance,o={},n(o,l.Methodology,[a.SurveyDuration,a.NumTextEntry,a.NumMatrixSelections,a.MobileCompatibility,a.GrammaticalConjunctions]),n(o,l.SurveyErrors,[a.DisplayLogic,a.PipedText,a.ScoreReporting,a.CompleteTranslations,a.UndisplayedPageQuestion,a.LastQuestionDB,a.FieldsetSize]),n(o,l.Compliance,[a.WCAGCompliance,a.ProtectedDataPolicy]),a.MobileCompatibility,a.GrammaticalConjunctions,a.DisplayLogic,a.PipedText,a.CompleteTranslations,a.UndisplayedPageQuestion,a.LastQuestionDB,a.WCAGCompliance,a.ProtectedDataPolicy,a.NumMatrixSelections,a.NumTextEntry,s={},n(s,a.SurveyDuration,{severe:720,warning:420,suggestion:300}),n(s,a.MobileCompatibility,{severe:3,warning:2,suggestion:1}),n(s,a.NumTextEntry,{severe:8,warning:5,suggestion:3}),n(s,a.NumMatrixSelections,{severe:35,warning:25,suggestion:20}),n(s,a.GrammaticalConjunctions,{severe:1}),n(s,a.DisplayLogic,{severe:1}),n(s,a.PipedText,{severe:1}),n(s,a.ScoreReporting,{severe:1}),n(s,a.CompleteTranslations,{warning:1}),n(s,a.UndisplayedPageQuestion,{severe:1}),n(s,a.LastQuestionDB,{warning:1}),n(s,a.FieldsetSize,{warning:1}),n(s,a.WCAGCompliance,{suggestion:1}),n(s,a.ProtectedDataPolicy,{suggestion:1})},1751:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),r=i(210),l=i(207),c=i(8),d=i(9),u=i(999),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),p=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fullThreshold=20,e.initialize(),e}return s(t,e),h(t,[{key:"buildHeader",value:function(){var e=Object(c.a)("div",{className:"TrashFullMsg"},Object(a.default)("EditSection","EmptyTrashMsg",""+this.fullThreshold));return Object(c.a)("div",{className:"BlockHeader "+this.type+"Block",clickcallback:"BaseBlock.expand:"+this.id},[window.Q.buildExpandButton(),Object(c.a)("span",{className:"BlockTitle",id:this.blockNameObj.id},[Object(a.default)("SurveyCreateWizard","SN_DefaultTrashBlock")]),Object(d.a)(Object(c.a)("span",{id:this.id+"_TitleMeta"})).update(this.getMetaTitle()),window.Q.buildButton(Object(a.default)("EditSection","EmptyTrash"),"QES_Global.emptyTrash($evt)","","btn btn-hover clear-trash"),Object(c.a)("div",{className:"clear"}),e])}},{key:"isFull",value:function(){return this.getQuestionCount()>this.fullThreshold}},{key:"checkStatus",value:function(){this.element&&(this.isFull()?Object(d.a)(this.element).addClassName("Full"):Object(d.a)(this.element).removeClassName("Full"),this.updateMeta())}},{key:"getStatusClassName",value:function(){return this.getQuestionCount()>this.fullThreshold?" Full":""}},{key:"getMetaTitle",value:function(){var e=this.getQuestionCount();return'<span class="BlockMetaTitle">('+e+" "+(1!=e?Object(a.default)("SiteWide","Questions"):Object(a.default)("SiteWide","Question"))+")</span>"}},{key:"getQuestionCount",value:function(){var e=0,t=!0,i=!1,n=void 0;try{for(var o,s=this.questions[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){o.value.deleted||e++}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}return e}},{key:"canBeAddedToSurveyFlow",value:function(){return!1}},{key:"expandQuestion",value:function(e){var t=null;if(this.expandedId){if(this.expandedId==e)return;t=l.default.getInstance(this.expandedId)}this.expandedId=e,t&&t.refresh(),l.default.getInstance(e).refresh()}}]),t}(u.default);p.getInstance=function(e){return r.default.getInstance(e)},window.Trash=p,t.default=p},1752:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(109),s=i(4),a=i(9),r=i(8);i(1753);window.BlockActions={headerClick:function(e){if(!window.Qualtrics.SearchAndReplace||!window.Qualtrics.SearchAndReplace.startedSearchAndReplace){var t=window.Event.element(e),i=Object(a.a)(t).up(".Block"),n=window.Survey.getInstance().getBlockById(i.id);if("PreviewButton"==t.className)n.resetPreviewModes(),1===n.defaultPreviewMode?(n.defaultPreviewMode=0,Object(a.a)(i).removeClassName("BlockPreview")):(n.defaultPreviewMode=1,Object(a.a)(i).addClassName("BlockPreview")),n.resetCachedQuestionHeights(),n.refreshQuestions();else{if(Object(a.a)(t).hasClassName("Editable")){n.blockNameObj.edit();return}(t.hasClassName("Arrow")||t.hasClassName("ExpandArrow")||window.Qualtrics.Browser.IE&&(t.up(".ExpandArrow")||t.up(".Arrow")))&&(n.collapsed?n.expand():n.collapse())}t.hasClassName("ExpandLabel")&&n.expand()}},setBenchmarkVariables:function(e){var t=window.Survey.getInstance().getBlockById(e);t&&t.setBenchmarkVariables()},loopAndMerge:function(e){var t=window.Survey.getInstance().getBlockById(e);if(t)if(window.Survey.getInstance().blocks.length>2)if("Standard"==t.type){if(!window.BlockActions.loopMergeIsOpen){window.QES_Global.saveSurvey(!1),window.BlockActions.loopMergeIsOpen=!0;var o=t.blockId,s=window.Survey.getInstance().id;i.e(8).then(i.bind(null,1008)).then(function(){new window.QLoopMerge(o,s),setTimeout(function(){window.BlockActions.loopMergeIsOpen=!1},1e3)})}}else alert(Object(n.default)("EditSection","CannotLoopAndMergeDefaultBlock"));else alert(Object(n.default)("EditSection","LoopAndMergeLessThanTwoBlocks"))},openSurveyFlow:function(e){window.QES_Global.openSurveyFlow()},openBlockOptions:function(e,t){if(window.BaseForm.getInstance().versionId){return new window.Q_Window({id:"DefaultChoicesInPast",title:Object(n.default)("EditSection","CannotEditRevisionTitle",Object(n.default)("QuestionOptions","Rand")),buttons:["close"]}).setContent(Object(r.a)("span",null,Object(n.default)("EditSection","CannotEditRevisionDescription",Object(n.default)("QuestionOptions","Rand")))),!1}window.QES_Global.saveSurvey(!1);var o=window.Survey.getInstance().getBlockById(e);if(o){if(o.isLocked()){if(!window.QES_Global.handleEditWhenSurveyLocked())return}var s=o.blockId,a=window.Survey.getInstance().id;2==t?window.BlockActions.loopMergeIsOpen||(window.BlockActions.loopMergeIsOpen=!0,i.e(8).then(i.bind(null,1008)).then(function(){new window.QLoopMerge(s,a),setTimeout(function(){window.BlockActions.loopMergeIsOpen=!1},1e3)})):1==t?o.openQuestionRandomization():3==t&&(window.BlockActions.flowButtonTextIsOpen||(window.BlockActions.flowButtonTextIsOpen=!0,new window.QBlockLookAndFeel(s,a),setTimeout(function(){window.BlockActions.flowButtonTextIsOpen=!1},1e3)))}},copyBlock:function(e){var t=window.Survey.getInstance().getBlockById(e);if(t){window.Survey.getInstance().save(!1);var i=t.blockId,o=window.Survey.getInstance().id,s=t.blockNameObj.text,l=Object(r.a)("div",{id:"copyBlock",className:"CopyBlockPopup"},[Object(r.a)("div",{id:"CopyBlockForm"},[Object(r.a)("div",{},Object(n.default)("EditSection","CreateBlockDirections")),Object(r.a)("br"),Object(r.a)("input",{id:"BlockName",size:73,name:"BlockName",keyentercallback:"BlockActions.copy()"}),Object(r.a)("input",{id:"CopyBlockSurveyId",type:"hidden",value:o}),Object(r.a)("input",{id:"CopyBlockBlockId",type:"hidden",value:i})])]);new window.Q_Window({id:"CopyBlockPopupWindow",title:Object(n.default)("EditSection","CopyBlock")+" - "+s,closeButton:!1,buttons:[{icon:"cancel",text:Object(n.default)("SiteWide","Cancel"),click:"Q_Window.closeWindow()",className:"negative"},{id:"CopyBlockButton",icon:"check",text:Object(n.default)("SiteWide","Copy"),click:"BlockActions.copy()",className:"positive",entercallback:"BlockActions.copy("+o+","+i+")"}]}).setContent(l),Object(a.a)("BlockName")&&Object(a.a)("BlockName").focus()}},copyBlockToLibrary:function(e){window.QES_Global.saveSurvey(!1);var t=window.Survey.getInstance().getBlockById(e);window.EditSurvey.showCopyBlockToLibraryModal(t)},copyQuestionsToLibrary:function(e){window.QES_Global.saveSurvey(!0);var t=window.Survey.getInstance().getBlockById(e);if(t)return void window.EditSurvey.showCopyQuestionsToLibraryModal(t)},setupMessageObserving:function(e,t,i){e.observe("mouseover",function(){Object(a.a)(this).addClassName("CopyQuestionText")}),e.observe("mouseout",function(){Object(a.a)(this).removeClassName("CopyQuestionText")}),e.getInner=function(){return Object(a.a)(i)},e.getText=function(){return Object(a.a)(i).innerHTML},e.setText=function(e){Object(a.a)(i).innerHTML=e,Object(a.a)("qDescHidden_"+t).value=e},e.observe("click",function(){window.inlineEditor.getInstance()&&window.inlineEditor.getInstance().removeInlineEditor(),new window.inlineEditor(this)})},errorCheck:function(e){var t="";return e.category||(t+=Object(n.default)("LibrarySection","CategoryNotValid")+"<br/>"),e.description&&""!=window.trim(e.description)||(t+=Object(n.default)("LibrarySection","DescriptionNotValid")+"<br/>"),e.sourcesurvey||(t+=Object(n.default)("LibrarySection","SourceSurveyNotValid")+"<br/>"),e.copy||(t+=Object(n.default)("LibrarySection","BlockNotValid")+"<br/>"),t},saveQuestionBlockTo:function(){var e=this;Object(a.a)("blockPopupError")&&(Object(a.a)("blockPopupError").innerHTML="");var t=Object(a.a)("copyMultipleToLibraryForm").serialize(!0);t.library&&""!=t.library&&t.category&&""!=t.category?function(){for(var i=new Array,o=!1,r=0;void 0!=t["qid_"+r];){i[r]=new Array,i[r].lid=t.library,i[r].category=t.category,i[r].sourcesurvey=t.sourcesurvey,i[r].copy=t["qid_"+r],i[r].description=t["qDescHidden_"+r];""!=e.errorCheck(i[r])&&(o=!0,Object(a.a)("qDescriptionContainer_"+r).setStyle({background:"#cc0000"})),++r}if(o)Object(a.a)("blockPopupError").show(),Object(a.a)("blockPopupError").innerHTML+=Object(n.default)("LibrarySection","DescriptionsNotValid")+"<br/>";else{for(var l=0;l<i.length;l++)!function(t){var n=e;new a.c.Request(s.a.getAjaxURL("saveLibraryQuestionCopyTo",null,{SurveyID:window.Qualtrics.User.currentSurveyId}),{parameters:i[t],onSuccess:function(e){var o=i[t].category;n.loadQuestions(o),n.updateCategorySelector(o)}})}(l);window.Q_Window.closeWindow("LibraryQuestionConfirm")}}():(Object(a.a)("blockPopupError").show(),""==Object(a.a)("libraryCategory").value&&(Object(a.a)("blockPopupError").innerHTML+=Object(n.default)("SurveyCreateWizard","LB_Category")+"<br/>"),""==Object(a.a)("librarySelect").value&&(Object(a.a)("blockPopupError").innerHTML+=Object(n.default)("SurveyCreateWizard","LB_Library")+"<br/>"))},cancelQuestionBlockTo:function(){window.Q_Window.closeWindow("LibraryQuestionConfirm")},cancelSaveAsBlockTo:function(){window.Q_Window.closeWindow("BlockLibraryConfirm")},copy:function(e){if(e&&window.Event.stop(e),!this.copying){window.Q_Window.getInstance("CopyBlockPopupWindow").busifyButton("CopyBlockButton",Object(n.default)("Javascript","Copying"));var t=this;this.copying=!0;var i={};i.BlockName=Object(a.a)("BlockName").getValue(),i.SurveyID=Object(a.a)("CopyBlockSurveyId").getValue(),i.BlockID=Object(a.a)("CopyBlockBlockId").getValue(),new a.c.Request(s.a.getAjaxURL("CopySurveyBlock",null,{SurveyID:window.Qualtrics.User.currentSurveyId}),{parameters:i,onComplete:function(e){window.Q_Window.closeWindow("CopyBlockPopupWindow"),t.copying=!1,window.BlockActions.setSurveyEditedAndReloadSurvey()},onFailure:function(e){console.log("FAILED!")}})}},reloadSurvey:function(){window.BaseForm.getInstance().reload()},setSurveyEditedAndReloadSurvey:function(){o.e.getInstance().surveyEdited(window.BaseForm.getInstance().id),window.BlockActions.reloadSurvey()},submitPage:function(){s.a.post("")},confirmDeleteBlock:function(e){var t=window.Survey.getInstance().getBlockById(e);if(t.isLocked()){if(!window.QES_Global.handleEditWhenSurveyLocked())return}var i=t.blockId,o=window.Survey.getInstance().id,s=t.blockNameObj.text,a={title:Object(n.default)("EditSection","DeleteBlock"),strong:!1,deleteButtonText:Object(n.default)("SiteWide","Delete"),deleteMessage:Object(n.default)("EditSection","BlockConfirmDeletion",s),deleteCallBackParameters:{ajaxAction:"DeleteSurveyBlock",ajaxParameters:{SID:o,BID:i},ajaxOnComplete:"BlockActions.setSurveyEditedAndReloadSurvey"}};window.Survey.getInstance().save(),window.QualtricsCPTools.showDeleteConfirmation(a)},lockMenuItemClicked:function(e){0!=window.Survey.getInstance().getBlockById(e).locked?this.confirmUnlock(e):this.confirmLock(e)},confirmLock:function(e){new window.Q_Window({id:"LockBlock",title:Object(n.default)("EditSection","LockBlock"),width:"400",buttons:["cancel",{icon:"check",text:Object(n.default)("EditSection","Lock"),click:"BlockActions.lockUnlock",p1:e,p2:!0,className:"positive"}]}).setContent(Object(r.a)("div",{},[Object(r.a)("div",{className:"Message"},[Object(n.default)("EditSection","ConfirmLockBlock")]),Object(r.a)("div",{id:"PasswordFieldset",className:"lock-block-password-container"},[Object(r.a)("div",{id:"PasswordMatchStatus"}),Object(r.a)("div",{className:"PasswordLabel"},Object(n.default)("EditSection","OptionalPassword")+": "),Object(r.a)("input",{id:"BlockPassword",className:"TextBox input-text full-width",type:"password",keyentercallback:"BlockActions.lockUnlock",p1:e,p2:!0}),Object(r.a)("div",{className:"PasswordLabel"},[Object(n.default)("EditSection","BlockPasswordConfirm")+": "]),Object(r.a)("input",{id:"ConfirmBlockPassword",className:"TextBox input-text full-width",type:"password",keyentercallback:"BlockActions.lockUnlock",p1:e,p2:!0})])])),Object(a.a)("BlockPassword").focus()},confirmUnlock:function(e){if(window.BaseForm.getInstance().versionId)return!1;var t=new window.Q_Window({id:"UnlockBlock",title:Object(n.default)("EditSection","UnlockBlock"),width:"400",buttons:["cancel",{id:"UnlockBlockOkButton",icon:"check",text:Object(n.default)("EditSection","Unlock"),click:"BlockActions.lockUnlock",p1:e,p2:!1,className:"positive"}]}),i=[Object(r.a)("div",{className:"Message"},[Object(n.default)("EditSection","ConfirmUnlockBlock")])],o=window.Survey.getInstance().getBlockById(e);o&&o.passwordProtected&&i.push(Object(r.a)("div",{id:"PasswordField",className:"lock-block-password-container"},[Object(r.a)("div",{className:"PasswordLabel"},Object(n.default)("SiteWide","Password")+": "),Object(r.a)("input",{className:"TextBox input-text full-width",type:"password",id:"BlockPassword",keyentercallback:"BlockActions.lockUnlock",p1:e,p2:!1},[]),Object(r.a)("span",{id:"UnlockStatus"},[])])),t.setContent(Object(r.a)("div",{},i)),Object(a.a)("BlockPassword")&&Object(a.a)("BlockPassword").focus()},lockUnlock:function(e,t){var i=window.Q_Window.getInstance("UnlockBlock"),o="";if(Object(a.a)("BlockPassword")){if(o=Object(a.a)("BlockPassword").value,Object(a.a)("ConfirmBlockPassword")&&o!=Object(a.a)("ConfirmBlockPassword").value)return void(Object(a.a)("PasswordMatchStatus").innerHTML=Object(n.default)("SiteWide","PasswordsDontMatch"));i&&i.busifyButton("UnlockBlockOkButton",Object(n.default)("EditSection","Verifying"))}else window.Q_Window.closeWindow("UnlockBlock");window.Q_Window.closeWindow("LockBlock");var r=window.Survey.getInstance().getBlockById(e),l=r.blockId,c=window.Survey.getInstance().id;new a.c.Request(s.a.getAjaxURL("setBlockLocking"),{parameters:{SID:c,BID:l,Locked:t,Password:o,SupportMode:!0===window.Qualtrics.supportMode},onSuccess:function(e){(i&&i.unbusifyButton("UnlockBlockOkButton"),e.responseText.evalJSON().PasswordMismatch)?(Object(a.a)("UnlockStatus").innerHTML=Object(n.default)("EditSection","FailedUnlock"),Object(a.a)("BlockPassword").value=""):(window.Q_Window.closeWindow("UnlockBlock"),window.Survey.getInstance().reload())}})}}},1753:function(e,t,i){"use strict";var n=i(0),o=i(4),s=i(7),a=i(517);window.QBlockLookAndFeel=window.Class.create(),window.QBlockLookAndFeel.reg=[],window.QBlockLookAndFeel.getInstance=window.QualtricsCPTools.getInstanceHelper(window.QBlockLookAndFeel.reg,"_id"),window.QBlockLookAndFeel.prototype={className:"QBlockLookAndFeel",surveyID:"",blockID:"",initialize:function(e,t){this.blockID=e,this.surveyID=t,window.QBlockLookAndFeel.reg.push(this),this.show()},show:function(){var e="",t="",i="",o="",a="",r="",l=window.Survey.getInstance().getBlockByBlockId(this.blockID);l.options&&(l.options.PreviousButton&&(e=l.options.PreviousButton),l.options.NextButton&&(t=l.options.NextButton),i=l.options.previousButtonMID,o=l.options.nextButtonMID,a=l.options.previousButtonLibraryID,r=l.options.nextButtonLibraryID);var c=window.QBuilder("div",{id:"PreviousButtonContainer",className:"Left"},[]),d=window.QBuilder("div",{id:"NextButtonContainer",className:"Left"},[]);1==s.a.Browser.IE&&7===s.a.Browser.Version&&(c.className+=" IE7",d.className+=" IE7");var u=window.QBuilder("div",{},[window.QBuilder("div",{className:"optionRow"},[window.QBuilder("div",{id:"PreviousButtonTextLabel",className:"FlowButtonLabel Left"},Object(n.default)("EditSection","PreviousButtonTextLabel")),window.QBuilder("span",{className:"Left"},[window.QBuilder("input",{id:"PreviousButtonText",className:"TextBox Left",value:e},[]),c]),window.QBuilder("div",{className:"clear"},[])]),window.QBuilder("div",{className:"optionRow"},[window.QBuilder("div",{id:"NextButtonTextLabel",className:"FlowButtonLabel Left"},Object(n.default)("EditSection","NextButtonTextLabel")),window.QBuilder("span",{className:"Left"},[window.QBuilder("input",{id:"NextButtonText",className:"TextBox Left",value:t},[]),d]),window.QBuilder("div",{className:"clear"},[])])]),h=window.QBuilder("form",{id:"BlockFlowButtonForm",className:"Left"},[u]),p={icon:"check",text:Object(n.default)("SiteWide","Save"),click:this.className+".save",className:"positive",id:"LMSave"};l.isLocked()&&(p.className="Disabled",p.click=null),this.popUp=new window.Q_Window({id:"QBlockLookAndFeelPopUp",title:Object(n.default)("SiteWide","NextPreviousButtonText"),width:"auto",height:"auto",forceAuto:!0,closeButton:!0,buttons:[{text:Object(n.default)("SiteWide","Close"),click:this.className+".cancel",className:"btn-hover",id:"LMCancel"},p]}),this.popUp.setContent(h),this.popUp.center(),this.initializeMessageSelector("NextButton",r,o),this.initializeMessageSelector("PreviousButton",a,i)},cancel:function(){window.Q_Window.closeWindow(this.className+"PopUp"),this.destroy()},save:function(){new window.Ajax.Request(o.a.getAjaxURL("setBlockFlowButtonText"),{parameters:{SID:this.surveyID,BID:this.blockID,PreviousButton:window.$("PreviousButtonText").value,NextButton:window.$("NextButtonText").value,previousButtonMID:a.default.previousButtonMid,nextButtonMID:a.default.nextButtonMid,previousButtonLibraryID:a.default.libraryId,nextButtonLibraryID:a.default.libraryId},onSuccess:function(e){var t=window.QBlockLookAndFeel.getInstance(),i=window.Survey.getInstance().getBlockByBlockId(t.blockID);i.options=i.options||{},i.options.PreviousButton=window.$("PreviousButtonText").value,i.options.NextButton=window.$("NextButtonText").value,i.options.previousButtonMID=a.default.previousButtonMid,i.options.nextButtonMID=a.default.nextButtonMid,i.options.previousButtonLibraryID=a.default.libraryId,i.options.nextButtonLibraryID=a.default.libraryId,window.Q_Window.closeWindow(t.className+"PopUp"),t.destroy(),window.SurveyVersionEventEmitter.getInstance().surveyEdited(window.BaseForm.getInstance().id)}})},destroy:function(){window.QBlockLookAndFeel.reg.clear()},initializeMessageSelector:function(e,t,i){i?a.default.getMessageDescription(t,i).then(function(n){a.default.addMessageSelector(e,t,i,n)}).catch(function(n){a.default.addMessageSelector(e,t,i,"")}):a.default.addMessageSelector(e,t,i,"")}}},1754:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.Class.create({initialize:function(e,t){this.id=window.QualtricsTools.createNewId("qr"),n.registry[this.id]=this,this.options=t||{},this.chunks=window.chunk(e,25),this.next(),this.survey=window.BaseForm.getInstance()},next:function(){this.timeout=window.setTimeout(this.renderNextChunk.bind(this),100)},renderNextChunk:function(){if(this.chunks.length){var e=this.chunks[0];this.chunks.splice(0,1);for(var t=0,i=e.length;t<i;++t){var o=!0,s=e[t];this.survey.searchFilter&&(o=!1,this.survey.searchFilter[s.id]&&(o=!0)),s.parentObj.collapsedQuestionMode?s.collapsed=1:s.collapsed=0,o&&s.render()}}this.chunks.length?this.next():(this.options.onComplete&&this.options.onComplete(),n.registry[this.id]&&delete n.registry[this.id])},cancel:function(){this.chunks.length=0,this.timeout&&clearTimeout(this.timeout)}});n.registry={},n.getInstance=function(e){return n.registry[e]},n.getAll=function(){return n.registry},n.cancelAllRenderings=function(){var e=n.getAll();if(e)for(var t in e)e[t].cancel()},window.QuestionRenderer=n,t.default=n},1755:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9);window.ExportTagEditor={maxlength:20,keyMap:{tab:"tab",shiftTab:"prev",enter:"onEnter",backspace:"onType"},tabbing:!1,onEnter:function(e,t){e.removeInlineEditor()},afterEdit:function(){if(!this.tabbing){var e=window.QuestionActions.selectedRegistry[0];e&&(e.refresh.bind(e).defer(),e.element.select(".QuestionNumber")[0].removeClassName("editing-question-number"))}this.tabbing=!1},tab:function(e,t,i){this.tabbing=!0;var o=window.QuestionActions.selectedRegistry[0];if(o){var s="getNext";i&&(s="getPrev");var a=o[s]("jumpblocks");if(a){var r=Object(n.a)("QuestionNumber_"+a.id);window.ExportTagEditor.editExportTag(a,r)}}},edit:function(e,t){return 1!=this.bindedParentObj.isLocked()&&(window.QuestionActions.selectedRegistry[0].element.select(".QuestionNumber")[0].addClassName("editing-question-number"),t=t||{},t.evt=e,t.validationFn=function(e){return window.hasJavaScript(e,"NoJavaScriptInQuestionNumber")},new window.inlineEditor(this,t))},prev:function(e,t){window.ExportTagEditor.tab(e,t,!0)},onType:function(e){var t=window.QuestionActions.selectedRegistry[0];t.setEdited(1),t.adjustQuestionInfoBarHeight()},onEmpty:function(){},setEdited:function(e){window.QuestionActions.selectedRegistry[0].setEdited(e)},editExportTag:function(e,t){window.QuestionActions.select(e),window.Editable.bindedEdit(t,"Question.exportTag",e.id,"ExportTagEditor")}}},1756:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(119),s=i(9),a=i(8);window.FunnelEditBox=window.Class.create(),window.FunnelEditBox.prototype={element:null,textarea:null,toolboxObj:null,listType:null,questionObj:null,formObserver:null,initialize:function(e,t,i,o){this.questionObj=t;var r=t.getListType(e);this.listType=r,this.toolboxObj=o,this.axis=e;var l=window.selectionListToString(t[r]);this.undoPkg=t.getUndoPkg();var c=window.Position.cumulativeOffset(Object(s.a)(i)),d=Object(a.a)("textarea",{cols:5,rows:5},l);this.textarea=d,d.parentObj=this;var u=Object(a.a)("div",{id:"FunnelCancelButton"},Object(n.default)("SiteWide","Cancel"));s.e.observe(u,"click",this.escape.bind(this));var h=window.QBuilder("div",{className:"InnerBox"},[window.QBuilder("div",{id:"FunnelDoneButton"},Object(n.default)("SiteWide","Done")),u,d]),p=window.QBuilder("div",{id:"EditMultipleBox",className:"EditMultipleBox"},[h]);h=null;var w=Object(s.a)(document.getElementsByTagName("body")[0]).getWidth(),f=w-c[0]- -18;Object(s.a)(p).setStyle({top:c[1]+-64+"px",right:f+"px",opacity:.93}),window.$(d).setStyle({opacity:.3}),window.$("pageDiv").appendChild(p),this.element=p,new window.Effect.Morph(p,{transition:window.INQUAD,duration:.3,style:{width:"750px"},afterFinish:function(){new window.Effect.Appear(d,{duration:.2}),window.$(d).focus(),d=null}});var v=this;this.documentClickCache=function(e){e||(e=window.evt);var t=s.e.element(e);if(t.id&&"FunnelDoneButton"===t.id)return void v.remove();Object(s.a)(t).up("#EditMultipleBox")||v.remove(),t=null},this.documentKeyDownCache=this.documentKeyDown.bind(this),window.Event.observe(document,"mousedown",this.documentClickCache),window.Event.observe(document,"keydown",this.documentKeyDownCache),this.formObserver=new window.Form.Element.Observer(this.textarea,1,this.callBack),window.Toolbox.toolboxVerticalHold=o.top,p=null},documentKeyDown:function(e){27==e.keyCode&&this.escape()},escape:function(){this.remove(),window.Qualtrics.History.getInstance().undo(),this.questionObj.refreshCanvas()},validate:function(){var e=this.textarea.value,t=!!e&&o.default.checkContainsBase64ImageTag(e),i=!!e&&e.length>this.questionObj.maximumTextLength;if(t){var s=this.questionObj&&this.questionObj.exportTag||null;return o.default.showContainsBase64ImageErrorPopup(s),!1}return!i||(window.QualtricsCPTools.showAlertDialog({message:Object(n.default)("EditSection","ExceededMaximumSizeLimit",this.questionObj.maximumTextLength),title:Object(n.default)("SiteWide","Alert")}),!1)},remove:function(){var e=this.validate();this.questionObj.addUndo(this.undoPkg,this.questionObj.getUndoPkg()),s.e.stopObserving(document,"mousedown",this.documentClickCache),s.e.stopObserving(document,"keydown",this.documentKeyDownCache),this.formObserver.stop(),this.formObserver=null,this.documentClickCache=null,window.Toolbox.toolboxVerticalHold=null,this.textarea.parentObj=null;var t=this.textarea;this.textarea=null,window.removeElement(t),t=null;var i=this.element;this.element=null,i&&window.removeElement(i),i=null,e||(window.Qualtrics.History.getInstance().undo(),this.questionObj.refreshCanvas())},callBack:function(e,t){if(e&&e.parentObj){window.Toolbox.getInstance().holdPosition(1);var i=e.parentObj.questionObj;if(i.isLocked())return window.QES_Global.handleEditWhenSurveyLocked(),!1;var n=e.parentObj.listType,o=i.getSelectionDataMap(n,"meta"),s=i.getSelectionDataMap(n,"series"),a=i.getSelectionDataMap(n,"recodeValue"),r=i.getSelectionDataMap(n,"variableNaming");i[n].length=0,i.addSelectionsByString(n,t),i.restoreSelectionDataMap(n,o,"meta"),i.restoreSelectionDataMap(n,s,"series"),i.restoreSelectionDataMap(n,a,"recodeValue"),i.restoreSelectionDataMap(n,r,"variableNaming"),i.refreshCanvas(),window.Toolbox.getInstance().update(),window.Toolbox.getInstance().holdPosition(0)}}}},1757:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(54),s=i(4),a=i(7),r=i(8),l=i(9),c=i(159),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.QuestionTypeActions={iNavigator:null,questionPreviewData:null,showQuestionTypeMenu:function(e,t,i){this.selectCallback=i||"",this.questionTypeMenu=a.a.Menu.showMenu({className:"QuestionTypesMenu",items:[{onmouseover:"QuestionTypeActions.timeoutQuestionTypePreview",mouseOverObject:window,domNode:"QuestionTypeActions.buildQuestionTypeMenuDom()"}]},e,{onMenuClose:"QuestionTypeActions.onQuestionTypeMenuClose"},t),Object(l.a)("question-type-button")&&Object(l.a)("question-type-button").addClassName("active")},onQuestionTypeMenuClose:function(){this.destroySubQuestionTypeMenu(),this.menuDom=null,this.questionTypeMenu=null,Object(l.a)("QuestionTypePreview")&&Object(l.a)("QuestionTypePreview").remove(),Object(l.a)("question-type-button")&&Object(l.a)("question-type-button").removeClassName("active")},buildQuestionTypeMenuDom:function(){window.inlineEditor.getInstance()&&window.inlineEditor.getInstance().removeInlineEditor(),this.questionPreviewData||(c.b.actionStart("getQTPreviewJSON"),c.b.actionAjaxStart("getQTPreviewJSON"),new l.c.Request(s.a.getAjaxURL("getQTPreviewJSON",null,{SurveyID:a.a.User.currentSurveyId}),{onComplete:function(e){c.b.actionAjaxEnd("getQTPreviewJSON"),c.b.actionEnd("getQTPreviewJSON");try{window.QuestionTypeActions.questionPreviewData=e.responseText.evalJSON()}catch(e){console.error(e)}}}));var e={Static:Object(r.a)("ul",{className:"Static",bubbleup:!0}),Standard:Object(r.a)("ul",{bubbleup:!0}),Specialty:Object(r.a)("ul",{bubbleup:!0}),Advanced:Object(r.a)("ul",{bubbleup:!0})};"string"==typeof this.selectCallback&&-1!=this.selectCallback.indexOf("addNewQuestionToBlock")||(e.ReplaceFromLibrary=Object(r.a)("ul",{bubbleup:!0},[Object(r.a)("li",{className:"QuestionType Library",mouseupcallback:"QuestionTypeActions.showLibrary"},[Object(r.a)("div",{className:"icon icon-books-lg",bubbleup:!0}),Object(r.a)("div",{className:"Desc",bubbleup:!0},Object(n.default)("EditSection","QuestionLibrary"))])]));var t=Object(o.getConfig)(),i=t.enabledQuestionTypes,d=!0,u=!1,h=void 0;try{for(var p,w=i[Symbol.iterator]();!(d=(p=w.next()).done);d=!0){var f=p.value;if(window.QuestionTypes[f].Description&&window.QuestionTypes[f].QuestionTypeMenu||"DynamicMatrix"==f&&a.a.supportMode){var v=window.QuestionTypes.getDefaultSelectors(f)||{},b=window.QuestionTypes[f].Description,g="";"DB"==f?(b=Object(n.default)("EditSection","DescriptiveText"),g="PTB TB"):"FileUpload"==f&&(g="FileUpload");var y=this.buildQuestionTypeMenuItem(f,v.selector||"",v.subSelector||"",b,g);if(e[window.QuestionTypes[f].QuestionTypeCategory||"Specialty"].appendChild(y),"DB"==f){var S="GRB",m="Graphic";a.a.Features&&a.a.Features.ThirdPartyVideo&&(S="Media",m="Media"),y=this.buildQuestionTypeMenuItem(f,"GRB","WOTXB",Object(n.default)("SiteWide",m),S),e.Static.appendChild(y)}else if("FileUpload"==f&&a.a.Features.ScreenCapture){var k=!(a.a.System.AvailableProducts&&a.a.System.AvailableProducts.SiteIntercept),O=null;k&&(O="QuestionTypeActions.showNeedsProductDialog(SiteIntercept)"),y=this.buildQuestionTypeMenuItem(f,"ScreenCapture","",Object(n.default)("Javascript","ScreenCapture"),"ScreenCapture",k,O),e.Advanced.appendChild(y)}}}}catch(e){u=!0,h=e}finally{try{!d&&w.return&&w.return()}finally{if(u)throw h}}var C=Object(r.a)("tbody",{bubbleup:!0});for(var j in e)Object(l.a)(e[j]).childElements().length>0&&C.appendChild(Object(r.a)("tr",{bubbleup:!0},[Object(r.a)("th",{bubbleup:!0},Object(n.default)("EditSection",j)),Object(r.a)("td",{bubbleup:!0},[e[j]])]));return C.lastChild.className+=" Last",this.menuDom=Object(r.a)("div",{className:window.document.viewport.getWidth()<1200?"Thin":"",id:"QuestionTypesMenu",bubbleup:!0},[Object(r.a)("table",{bubbleup:!0},[C])]),this.menuDom.onmouseout=window.QuestionTypeActions.timeoutQuestionTypePreview,this.menuDom},buildQuestionTypeMenuItem:function(e,t,i,n,o,s,a){o=o||"";var l="",c=window.BaseForm.getInstance().getQuestionPermission(e,!0)&&!s;return c&&(l=Object(r.a)("div",{className:"SubMenu",menupanemouseover:"QuestionTypeActions.setSubQuestionTypeMenuTimeout($el, $evt, "+e+", "+o+")",mouseupcallback:"QuestionTypeActions.showSubQuestionTypeMenu($el, $evt, "+e+", "+o+")"},[Object(r.a)("span",{bubbleup:!0}),Object(r.a)("b",{bubbleup:!0})])),Object(r.a)("li",{className:e+" QuestionType "+t+(c?"":" Disabled"),questionType:e,selector:t,subSelector:i,mouseupcallback:a||"QuestionTypeActions.menuClickHandler($evt, $el)",menupanemouseover:"QuestionTypeActions.setPreviewTimeout($el)"},[Object(r.a)("div",{className:"icon icon-"+e,bubbleup:!0}),Object(r.a)("div",{className:"Desc",bubbleup:!0},n),l])},menuClickHandler:function(e,t){var i=t.getAttribute("questiontype");if(!window.BaseForm.getInstance().getQuestionPermission(i))return void a.a.Menu.keepMenuOpen();this.selectCallback&&a.a.Event.executeDotSyntax(this.selectCallback,null,null,null,{$evt:e,$el:t}),"A"==t.tagName&&this.questionTypeMenu.destroy()},setSubQuestionTypeMenuTimeout:function(e,t,i,n){this.subMenuType!=i&&this.destroySubQuestionTypeMenu(),this.subMenuTimeout||(this.subMenuType=i,this.subMenuTimeout=setTimeout(window.QuestionTypeActions.showSubQuestionTypeMenu.bind(this,e,t,i,n),450))},showSubQuestionTypeMenu:function(e,t,i,n){a.a.Menu.keepMenuOpen(),this.destroySubQuestionTypeMenu(),e.parentNode.className+=" Highlight";var o=e.parentNode.getAttribute("mouseupcallback");this.subMenu=a.a.Menu.showMenu("QuestionTypeActions.buildSubQuestionTypeMenu("+i+", "+n+","+o+")",e,{menuWithinMenu:!0,onMenuClose:"QuestionTypeActions.removeHighlightClass($menuPane)"}),this.subMenu.menuDom.onmouseout=window.QuestionTypeActions.timeoutQuestionTypePreview},removeHighlightClass:function(e){Object(l.a)(e.parentButton.parentNode).removeClassName("Highlight")},destroySubQuestionTypeMenu:function(e){this.subMenuTimeout&&(clearTimeout(this.subMenuTimeout),this.subMenuTimeout=null),this.subMenu&&(this.subMenu.destroy(),this.subMenu=null)},buildSubQuestionTypeMenu:function(e,t,i){var n=!1,o=[];"DB"==e&&"Media"==t&&this.questionPreviewData&&this.questionPreviewData.Media&&(e="Media",o=["VideosEmbed","Videos"],n=!0);var s=window.QuestionTypeActions.getFlattenedPreviewExamples(e),r=[];t=!!t&&t.split(" ");for(var l=0,c=s.length;l<c;l++)if(!(!n&&t&&t.indexOf(s[l].Selector)<0)&&(!s[l].featureCheck||a.a.Features[s[l].featureCheck])){var d={label:s[l].QuestionDescription,action:i,onmouseover:"QuestionTypeActions.setPreviewTimeout($el,,true)",mouseOverObject:window,parameters:{questiontype:s[l].QuestionType,selector:s[l].Selector,subselector:s[l].SubSelector}};!s[l].productCheck||a.a.System.AvailableProducts&&a.a.System.AvailableProducts[s[l].productCheck]||(d.action="QuestionTypeActions.showNeedsProductDialog("+s[l].productCheck+")",d.parameters.className="NotAvailable MenuItemLink");for(var u=0;u<o.length;u++){var h=o[u];s[l][h]&&(d.parameters[h]=s[l][h]),d.parameters._PreviewDataType=e}r.push(d)}return{items:r}},showNeedsProductDialog:function(e){window.QualtricsCPTools.showAlertDialog({message:Object(n.default)("ErrorCodes","ESEC100",[Object(n.default)("SiteWide",e)]),okButtonClassName:"no-icon"})},showToolboxOptionDisabledDialog:function(e){window.QualtricsCPTools.showAlertDialog({title:Object(n.default)("ErrorCodes","ESEC101"),message:Object(n.default)("EditSection",e),okButtonClassName:"no-icon"})},setPreviewTimeout:function(e,t,i,n){this.previewTimeout&&clearTimeout(this.previewTimeout),this.previewTimeout=setTimeout(this.previewQuestionType.bind(this,e,t,i,n),50)},previewQuestionType:function(e,t,i,n){t&&(e=e.parentNode),i||Object(l.a)(e).hasClassName("Highlight")||this.destroySubQuestionTypeMenu();var o=e.getAttribute("questiontype"),s=e.getAttribute("_PreviewDataType");s&&(o=s);var a=((i?this.subMenu:this.questionTypeMenu)||{}).menuDom;if(o&&a){window.QuestionTypeActions.removePreview&&(clearTimeout(window.QuestionTypeActions.removePreview),window.QuestionTypeActions.removePreview=null);var c=e.getAttribute("selector")||"",d=e.getAttribute("subSelector")||"";if(n||o+"_"+c+"_"+d!=this.currentPreviewType){this.currentPreviewType=o+"_"+c+"_"+d;var u=Object(l.a)(a).cumulativeOffset(),h=625,p="";if(u.left<610){var w=Object(l.a)(a).offsetWidth+u.left,f=window.document.viewport.getWidth();w+610<f?p="Right":f-w>u.left?(h=f-w-50,p="Right"):h=u.left-50}Object(l.a)("QuestionTypePreview")||Object(l.a)("pageDiv").appendChild(Object(r.a)("div",{id:"QuestionTypePreview"},[Object(r.a)("div",{className:"PreviewInner Skin"}),Object(r.a)("div",{className:"Background"}),Object(r.a)("div",{className:"Arrow"},[Object(r.a)("b")])]));var v=Object(l.a)("QuestionTypePreview"),b=Object(r.a)("div",{className:"PreviewInner Skin"}),g=void 0;n?b=v.down(".PreviewInner").replace(b):(g=this.buildPreviewQuestion(o,c,d),g.renderCanvas({parentElement:b,skinWidth:h}));Object(l.a)(b).select("img").each(function(n){n.complete||(n.onload=window.QuestionTypeActions.previewQuestionType.bind(window.QuestionTypeActions,e,t,i,!0))}),window.QualtricsTools.addToHiddenHelper(b),g&&"function"==typeof g.onLoad&&g.onLoad();var y=h+30,S=Object(l.a)(b).offsetHeight+30;v.down(".PreviewInner").replace(b);var m=Object(l.a)(e).cumulativeOffset(),k=u.left-y-10;"Right"==p&&(k=Object(l.a)(a).offsetWidth+u.left+10);var O=m.top+e.offsetHeight/2-v.offsetHeight/2;Object(l.a)(v).setStyle({left:k+"px",top:O+"px",width:y+"px",height:S+"px"}),Object(l.a)("QuestionTypePreview").className="Visible "+p}}},buildPreviewQuestion:function(e,t,i){window.deleteChildren(this.previewArea);var n=new window.Question(null,!0);if(n.showEditLinksInPreview=!1,n.previewMode=1,this.questionPreviewData&&this.questionPreviewData[e]){var o={};if(t&&this.questionPreviewData[e][t]&&(o=this.questionPreviewData[e][t],i&&this.questionPreviewData[e][t][i]&&(o=this.questionPreviewData[e][t][i])),o.QuestionType){var s={};s.Type="Question",s.QuestionDefinition=o,n.generate(s),n.unpackage()}else new window.QES_Error("no selector for an example "+e)}return n},timeoutQuestionTypePreview:function(){window.QuestionTypeActions.removePreview||(window.QuestionTypeActions.removePreview=setTimeout(window.QuestionTypeActions.hideQuestionTypePreview,150))},hideQuestionTypePreview:function(){window.QuestionTypeActions.currentPreviewType=null;var e=Object(l.a)("QuestionTypePreview");e&&(e.className="")},getFlattenedPreviewExamples:function(e){var t=this.questionPreviewData;e&&t[e]&&(t=t[e]),t=window.$H(t);var i=new Array;return function e(t,n){if(!(n>5))for(var o in t){var s=t[o];s&&"object"==(void 0===s?"undefined":d(s))&&(s.QuestionDescription?i.push(s):e(s,n+1))}}(t,0),i},showLibrary:function(){if(!window.BaseForm.getInstance().versionId){var e=new window.Q_Window("AddQuestionFromLibrary",{width:"910",height:"92%",closeButton:!0}),t={executeFunction:this.changeQuestionDefinitionWithAnimation.bind(this,e),returnFunction:window.Q_Window.closeWindow.curry("AddQuestionFromLibrary"),returnText:Object(n.default)("SiteWide","Cancel")};window.CPModules.loadLegacyModule("inavigator.js"),window.QuestionTypeActions.iNavigator=new window.INavigator(e.innerElement,t)}},changeQuestionDefinitionWithAnimation:function(e,t){e.close();var i=window.Toolbox.getInstance().questionObj,n=new window.Question;n.generate({Type:"Question",QuestionDefinition:t}),n.unpackage();var o=i.getPosition();i.parentObj.questions[o]=n,n.questionId=i.questionId,n.exportTag=i.exportTag,n.parentObj=i.parentObj,n.previewMode=1,n.setEdited(),new window.Effect.DropOut(i.element,{duration:.5,afterFinish:function(){var e=window.Survey.getInstance().getTrash();e&&(e.addQuestion(i),i.render()),n.refreshQuestion({opacity:0}),window.QuestionActions.select(n),new window.Effect.Appear(n.element,{duration:1})}})}}},1758:function(e,t){window.CanvasActions={sfClient:null,initSFClient:function(e){this.sfClient=JSON.parse(e)},sendSurveyCompleteEvent:function(){if(window.QES_Global.saveSurvey(!1),this.sfClient&&window.Sfdc)try{window.Sfdc.canvas.client.publish(this.sfClient,{name:"qualtrics.editSurvey",payload:{status:"Completed"}})}catch(e){console.log(e)}},sendSurveyBackEvent:function(){if(window.QES_Global.saveSurvey(!1),this.sfClient&&window.Sfdc)try{window.Sfdc.canvas.client.publish(this.sfClient,{name:"qualtrics.backEditSurvey",payload:{status:"Completed"}})}catch(e){console.log(e)}},sendResponseMappingsCompleteEvent:function(){if(window.QES_Global.saveSurvey(!1),this.sfClient&&window.Sfdc)try{window.Sfdc.canvas.client.publish(this.sfClient,{name:"qualtrics.editMappings",payload:{status:"Completed"}})}catch(e){console.log(e)}},sendResponseMappingsCancelEvent:function(){if(window.QES_Global.saveSurvey(!1),this.sfClient&&window.Sfdc)try{window.Sfdc.canvas.client.publish(this.sfClient,{name:"qualtrics.cancelMappingsEdit",payload:{status:"Completed"}})}catch(e){console.log(e)}}}},1759:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"saveButtonID",function(){return c});var n=i(0),o=i(140),s=i(4),a=i(7),r=i(8),l=i(9),c=(i(266),"save"),d={performQuestionAction:function(e,t,i){var n=window.Toolbox.getInstance().questionObj;if(n[e])return n[e](t,i)},previewToggle:function(e,t){var i=t.getAttribute("p1");e.togglePreview(i),e.refreshQuestion()},highlightResponseScaleBox:function(e,t){if(Object(l.a)("ResponseScalesBox_"+e)){var i=t||"#7197F0";window.Effect.Queues.get("responsescales").each(function(e){e.cancel()}),new window.Effect.Highlight(Object(l.a)("ResponseScalesBox_"+e),{startcolor:i,endcolor:"#404F70",restorecolor:"#404F70",duration:.6,afterFinish:function(){Object(l.a)("ResponseScalesBox_"+e)&&Object(l.a)("ResponseScalesBox_"+e).setStyle({backgroundImage:"",backgroundColor:""})},queue:{position:"start",scope:"responsescales",limit:1}})}},addY:function(e){return d.addSelection(e,"Y")},addX:function(e){return d.addSelection(e,"X")},addSelection:function(e,t){if(window.Survey.getInstance().getPermission("editQuestions")){var i=e.getUndoPkg(),n=e["get"+t]().listType;return e.smartAddSelection(n),e.resetSelectionIdsIfNoResponses(n),e.refreshCanvas(),e.refreshDependencies(),e.updateSkipLogic(),e.checkForHeightShift(),window.Toolbox.getInstance().update(),e.addUndo(i,e.getUndoPkg()),!1}},removeY:function(e){return d.removeSelection(e,"Y")},removeX:function(e){return d.removeSelection(e,"X")},removeSelection:function(e,t){if(window.Survey.getInstance().getPermission("editQuestions")){var i=e.getUndoPkg(),n=e["get"+t]().listType;return!!e.smartRemoveSelection(n)&&(e.resetSelectionIdsIfNoResponses(n),e.refreshCanvas(),e.refreshDependencies(),e.updateSkipLogic(),e.checkForHeightShift(),window.Toolbox.getInstance().refresh(),e.addUndo(i,e.getUndoPkg()),!1)}},getSelectionToRemove:function(e,t){var i=null,n=void 0;if(t[e].length>0){for(var o=0,s=t[e].length;o<s;++o)n=t[e][o],0!==n.getEdited()||n.auto||(i=n);return i||n}},editMultipleX:function(e,t,i){e.gradingData=[],window.QES_Global.saveSurvey(!1),d.editMultiple("x",e,t,i)},editMultipleY:function(e,t,i){e.gradingData=[],window.QES_Global.saveSurvey(!1),d.editMultiple("y",e,t,i)},editMultiple:function(e,t,i,n){window.Survey.getInstance().getPermission("editQuestions")&&new window.FunnelEditBox(e,t,i,n)},toggleAutoResponseScalesY:function(e){d.toggleAutoResponseScales(e,"y")},toggleAutoResponseScalesX:function(e){d.toggleAutoResponseScales(e,"x")},toggleAutoResponseScales:function(e,t){e.toggleAutoResponseScales(t),e.refreshQuestion()},toggleReferenceListX:function(e){e.toggleReferenceList("X",!0)},toggleReferenceListY:function(e){e.toggleReferenceList("Y",!0)},showMoreOptions:function(e,t){var i=e.questionType,n=t.getAttribute("section"),o=window.QuestionTypes[i]&&window.QuestionTypes[i].questionOptions&&window.QuestionTypes[i].questionOptions.sections;o&&o[n]&&(o[n].showHidden=1,e.refreshQuestion())},showLessOptions:function(e,t){var i=e.questionType,n=t.getAttribute("section"),o=window.QuestionTypes[i]&&window.QuestionTypes[i].questionOptions&&window.QuestionTypes[i].questionOptions.sections;o&&o[n]&&(o[n].showHidden=0,e.refreshQuestion())},showCustomValidation:function(e){if(!window.BaseForm.getInstance().versionId&&!this.showingCustomValidation){if(e.isLocked())return void window.QES_Global.handleEditWhenSurveyLocked();this.showingCustomValidation=!0,e.setOption("validation","CustomValidation"),Object(l.a)("validation_CustomValidation").checked||Object(l.a)("validation_CustomValidation").click(),window.CPModules.loadLegacyModule("messageselector.js"),e.save({asynchronous:!1});var t=new o.a("CustomValidation",{title:Object(n.default)("CustomValidation"),width:"auto",buttons:[{text:Object(n.default)("SiteWide","Close"),className:"btn-hover",click:"ToolboxActions.closeCustomValidation"},{id:c,text:Object(n.default)("SiteWide","Save"),icon:"check",className:"btn-success",click:"ToolboxActions.saveCustomValidation",style:"disabled"}]}),i=e.options.CustomValidation,s=i&&i.Logic||{Type:"BooleanExpression",0:{Type:"If",0:{LogicType:"Question",QuestionID:e.questionId,QuestionIDFromLocator:e.questionId}}},a=new window.Q_LogicEditorSchema;a.addElement(window.Qualtrics.schemaElementLibrary.Question),this.validationLogicEditor=new window.Q_LogicEditor(this,this.validationLogicRefresh,s,{schema:a}),this.validationLogicEditor.blockId=e.parentObj.blockId,this.validationLogicEditor.useQMenus=!0,this.validationLogicEditor.useSmartAdd=!0,this.validationLogicEditor.minExpressions=1,this.validationLogicEditor.clearCache();var d=Object(r.a)("div",{className:"ValidationLogicEditor"},[Object(r.a)("div",{className:"HelpHeader",id:"ValidationConditionDiv"},Object(n.default)("EditSection","ValidationWillPass")),this.validationLogicEditor.build()]),u=i&&i.Message,h=null,p=null,w=null,f=Object(n.default)("DistributeSection","LoadSavedMessage");u&&(h=u.libraryID,p=u.messageID,w=u.subMessageID,f=u.description);var v={buttonText:f,lid:h,mid:p,smid:w,categories:["MVD"],className:"legacy-dropdown-menu",showSubMessages:!0,onSelect:this.getSubMessage};this.validationMessageSelector=new window.Qualtrics.MessageSelector(v);var b=Object(r.a)("div",{className:"ValidationMessageSelector"},[Object(r.a)("span",{className:"HelpHeader",id:"ValidationMessageSpan"},Object(n.default)("EditSection","ChooseFailureMessage")),this.validationMessageSelector.build()]),g=Object(r.a)("div",{className:"ValidationLogicDiv"},[d,b]);t.setContent(g),t.center()}},closeCustomValidation:function(){var e=window.Toolbox.getInstance().questionObj;e.options.CustomValidation||(e.setOption("validation","None"),e.refresh(),window.Toolbox.getInstance().refresh(),e.setSaved(!1)),o.a.closeWindow("CustomValidation"),this.validationLogicEditor=void 0,this.showingCustomValidation=void 0},saveCustomValidation:function(){var e=this.validationMessageSelector.getData(),t=this.validationLogicEditor.validate();if(e.subMessageID&&t){Object(l.a)("ValidationConditionDiv").removeClassName("errorBanner"),Object(l.a)("ValidationMessageSpan").removeClassName("errorBanner");var i=window.Toolbox.getInstance().questionObj;return i.options.CustomValidation={Logic:this.validationLogicEditor.getData(),Message:e},this.validationLogicEditor=void 0,this.validationMessageSelector=void 0,i.refresh(),i.setSaved(!1),o.a.closeWindow("CustomValidation"),void(this.showingCustomValidation=void 0)}e.subMessageID?Object(l.a)("ValidationMessageSpan").removeClassName("errorBanner"):Object(l.a)("ValidationMessageSpan").addClassName("errorBanner"),t?Object(l.a)("ValidationConditionDiv").removeClassName("errorBanner"):Object(l.a)("ValidationConditionDiv").addClassName("errorBanner")},validationLogicRefresh:function(e,t){if(t){e.getAllExpressions().length<1?e.generate():e.validate()&&Object(l.a)("ValidationConditionDiv").removeClassName("errorBanner")}o.a.getInstance().center(),e.validate()?o.a.getInstance().enableButton(c):o.a.getInstance().disableButton(c)},getSubMessage:function(e,t){var i=window.ToolboxActions.validationMessageSelector;i.subMessageID||new l.c.Request(s.a.getAjaxURL("getMessage",null,{SurveyID:a.a.User.currentSurveyId}),{parameters:{LID:e,MID:t},onSuccess:function(s){var a=window.Qualtrics.parseJSON(s.responseText,!0),l=a.Errors;if(void 0!==l.length)return void i.reset();var c=0,d=[];for(var u in l)d.push(u),c++;if(1==c){var h=void 0,p=d[0];h="CUSTOM_VALIDATION"!=p.substring(3,20)||isNaN(parseInt(p.substring(21,22)))?window.ValidationMessages?window.ValidationMessages.validationErrorDescriptions[p].Attributes.hint:window.MessageEditor.validationErrors[p].Attributes.hint:a.Custom[p],i.selectMessage(e,t,h,p)}else{window.ToolboxActions.customErrors=a;var w=new o.a("GetSubMessage",{title:Object(n.default)("SiteWide","SelectAMessage"),width:"auto",buttons:[{text:"Cancel",className:"btn-hover",click:"ToolboxActions.cancelSubMessage"}]}),f=Object(r.a)("div",{},[window.Qualtrics.Menu.buildMenuButton(Object(n.default)("EditSection","SelectValidationMessage")+"...","ToolboxActions.buildSubMessageMenu",{className:"SelectMenuButton legacy-dropdown-menu"})]);w.setContent(f),w.center()}}})},buildSubMessageMenu:function(){var e=[];for(var t in window.ToolboxActions.customErrors.Errors){var i=void 0;i="CUSTOM_VALIDATION"!=t.substring(3,20)||isNaN(parseInt(t.substring(21,22)))?window.ValidationMessages?window.ValidationMessages.validationErrorDescriptions[t].Attributes.hint:window.MessageEditor.validationErrors[t].Attributes.hint:window.ToolboxActions.customErrors.Custom[t],e.push({display:i,action:"ToolboxActions.selectSubMessage("+t+")"})}return{items:e}},selectSubMessage:function(e){var t=window.ToolboxActions.validationMessageSelector,i=t.getData(),n=void 0;n="CUSTOM_VALIDATION"!=e.substring(3,20)||isNaN(parseInt(e.substring(21,22)))?window.ValidationMessages?window.ValidationMessages.validationErrorDescriptions[e].Attributes.hint:window.MessageEditor.validationErrors[e].Attributes.hint:window.ToolboxActions.customErrors.Custom[e],t.selectMessage(i.libraryID,i.messageID,n,e),o.a.closeWindow("GetSubMessage")},cancelSubMessage:function(){delete window.ToolboxActions.customErrors,window.ToolboxActions.validationMessageSelector.reset(),o.a.closeWindow("GetSubMessage")},viewQuestion:function(e){var t=window.BaseForm.getInstance().defaultLanguage;e.openPreview(t)},setOptionAndRefreshQuestion:function(e){window.Toolbox.getInstance().questionObj.setOption(e.getAttribute("sectionname"),e.value,null,null,!0)},getOptionValue:function(e){return window.Toolbox.getInstance().questionObj.options[e]},addPageBreak:function(e){if(!window.BaseForm.getInstance().versionId){if(1===e.isLocked())return void window.QES_Global.handleEditWhenSurveyLocked();window.QES_Global.saveSurvey(!1);var t=e.getPosition(),i=new window.Question(null,!0);i.elementType="Page Break",e.parentObj.addQuestion(i,t+1),i.save(),i.render()}},addSkipLogic:function(e){e.addSkipLogic()},addDisplayLogic:function(e){e.addDisplayLogic(0,1)},copyQuestion:function(e){d.copyQuestions()},addQuestionNote:function(e){e.addNotes()},groupQuestions:function(){if(!window.QES_Global.suspendSelects){window.QES_Global.saveSurvey(!1);var e=window.QuestionActions.selectedRegistry,t=window.QuestionActions.lastSelected;if(t){for(var i=0,o=e.length;i<o;++i){var s=e[i];if(s.isLocked())return void window.msg(Object(n.default)("EditSection","Locked"),"locked");var a=s.getPosition(),r=s.parentObj;s.tmpMoveData||(s.tmpMoveData={oldBID:r.blockId,oldPos:a})}for(var l=window.QuestionActions.selectedRegistry.length-1,c=e[0].parentObj.id,d=!1,u=!1,h=0,p=e.length;h<p;++h){var w=e[h];w.hasSkipLogic()&&(d=!0),w.parentObj.id!=c&&(u=!0),c=w.parentObj.id,w.id==t.id&&(l=h)}if(u&&d)return window.msg(Object(n.default)("EditSection","CannotGroupQuestionsWithSkipLogicOutsideBlock")),!1;t=e[l];for(var f=t.parentObj,v=0,b=0,g=e.length;b<g;++b){var y=e[b],S=y.getPosition(),m=t.getPosition(),k=void 0;b<l?(y.parentObj.questions.splice(S,1),k=m,y.parentObj.id==f.id&&(k=m-1),k<0&&(k=0),t.parentObj.questions.splice(k,0,y),y.parentObj=t.parentObj,y.refreshQuestion(),window.QuestionActions.select(y,null,!0,!0)):b>l&&(v++,S=y.getPosition(),y.parentObj.questions.splice(S,1),k=m+v,t.parentObj.questions.splice(k,0,y),y.parentObj=t.parentObj,y.refreshQuestion(),window.QuestionActions.select(y,null,!0,!0)),window.QuestionActions.addToMoveQueue(y)}window.QuestionActions.executeMoves({batchMove:!0})}}},getMoveQuestionPlacementFunction:function(e){return function(){window.QuestionTopCache={},window.Toolbox.getInstance().updatePosition();var t=new window.PlacementChooser(e);window.QES_Global.suspendOvers=!1,t.onPlace=function(e){var t=e[0].tmpMoveData.oldBID,i=e[0].tmpMoveData.oldPos,n=window.Survey.getInstance().getBlockByBlockId(t),o=n.getPosition(),s=Number(o+"."+i),a=e[0].parentObj.getPosition(),r=e[0].getPosition();if(Number(a+"."+r)<s)for(var l=0,c=e.length;l<c;++l){var d=e[l];window.QuestionActions.addToMoveQueue(d),window.Survey.getInstance().checkForEmptyBlocks()}else for(var u=e.length-1;u>-1;--u){var h=e[u];window.QuestionActions.addToMoveQueue(h),window.Survey.getInstance().checkForEmptyBlocks()}window.QuestionActions.executeMoves({batchMove:!0})},t.beforeUpdate=function(e,i){for(var o=!1,s=0,a=e.length;s<a;++s){e[s].hasSkipLogic()&&(o=!0)}if(o){var r=e[0].parentObj;if(i.parentObj.id!=r.id)return t.color="#D64541",window.msg(Object(n.default)("EditSection","CannotMoveQuestionsWithSkipLogicOutsideBlock")),!1;t.color=null}}}},moveQuestion:function(){d.moveQuestions()},moveQuestions:function(){if(window.Survey.getInstance().getPermission("editQuestions")){window.QES_Global.saveSurvey(!1),window.QES_Global.suspendOvers=!0;for(var e=window.QuestionActions.selectedRegistry,t=0,i=e.length;t<i;++t){var o=e[t];if(o.parentObj.isLocked())return void window.msg(Object(n.default)("EditSection","Locked"),"locked");o.tmpMoveData||(o.tmpMoveData={oldBID:o.parentObj.blockId,oldPos:o.getPosition()})}for(var s=[],a=0,r=e.length;a<r;++a){var c=e[a];"Question"==c.elementType&&(c.height=null,c.selectConnector&&window.removeElement(c.selectConnector),Object(l.a)(c.element).setStyle({overflow:"hidden"}),c.questionCanvas&&s.push(new window.Effect.Fade(c.questionCanvas,{sync:!0})),s.push(new window.Effect.Morph(c.element,{sync:!0,style:"height:60px"})))}var u=window.getPageSize(),h=u[3];s.push(new window.Effect.ScrollTo(e[0].element,{sync:!0,offset:-.2*h})),new window.Effect.Parallel(s,{duration:.6,afterFinish:d.getMoveQuestionPlacementFunction(e)})}},copyQuestions:function(){if(!window.QES_Global.suspendSelects&&window.Survey.getInstance().getPermission("editQuestions")&&window.Survey.getInstance().getPermission("copySurveyQuestions")){for(var e=window.QuestionActions.selectedRegistry,t=e[e.length-1],i=t.getPosition(),o=[],s=!1,a=0;a<e.length;a++)if("DD"==e[a].questionType){s=!0;break}if(s)return void d.copyQuestionsAjax();for(var r=0,l=0,c=e.length;l<c;++l){var u=e[l];if(u.isLocked())return void window.msg(Object(n.default)("EditSection","Locked"),"locked");if("Question"==u.elementType){var h=u.clone();if(!window.BaseForm.getInstance().getPermission("addNewQuestion"))break;t.parentObj.addQuestion(h,i+r+1),h.unpackage(),h.render(),o.push(h),h.setSaved(0),window.Survey.getInstance().questionCount++,r++}}window.QuestionActions.unselectAll();for(var p=0,w=o.length;p<w;++p)window.QuestionActions.select(o[p],null,!0)}},copyQuestionsAjax:function(){if(!window.QES_Global.suspendSelects){window.QES_Global.saveSurvey(!1);for(var e=window.QuestionActions.selectedRegistry,t=e[e.length-1],i=t.getPosition(),o=[],a=[],r=e.length-1;r>-1;--r){var c=e[r];if("Question"==c.elementType){var d=new window.Question;t.parentObj.addQuestion(d,i+1),d.render(),d.setSaved(0),d.selected=0,o.push(d),a.push(c.questionId)}}var u=Object.toJSON(a),h=window.BaseForm.getInstance().id;new l.c.Request(s.a.getAjaxURL("CopyAndGetQuestionsJSON"),{method:"post",parameters:{SurveyID:h,QIDs:u,Pos:i+1,BID:t.parentObj.blockId},asynchronous:!1,onComplete:function(e){try{var t=e.responseText.evalJSON();if(!t)throw"Question could not be copied";for(var i=t.toArray(),s=0,a=i.length;s<a;++s){var r=o[s],l=null;i[s].Error&&(l=i[s].Error,delete i[s].Error);var c=i[s];r.generate(c),r.unpackage(),r.setSaved(!0,null,!0),r.refreshQuestion(),window.Toolbox.getInstance().render(),l&&window.QualtricsCPTools.showAlertDialog({id:"CopyQuestionFailure",message:l,title:Object(n.default)("EditSection","CopyQuestionFailure",r.exportTag)})}window.QES_Global.saveSurvey(!1)}catch(t){throw"Question could not be copied, response was: "+e.responseText}}}),window.QuestionActions.unselectAll();for(var p=0,w=o.length;p<w;++p){var f=o[p];window.QuestionActions.select(f,null,!0)}}},removeQuestions:function(){if(window.QES_Global.saveSurvey(!1),!window.QES_Global.suspendSelects){for(var e=window.QuestionActions.selectedRegistry,t=0,i=e.length;t<i;++t)e[t].isLocked()||e[t].tmpMoveData||(e[t].tmpMoveData={oldBID:e[t].parentObj.blockId,oldPos:e[t].getPosition()});for(var n=0,o=e.length;n<o;++n){var s=e[n];s.isLocked()||(s.elementType,s.sendToTrash(!0))}window.QuestionActions.executeMoves({batchMove:!0}),window.QuestionActions.unselectAll()}},moveQuestionsToNewBlock:function(){for(var e=window.QuestionActions.selectedRegistry,t=0,i=e.length;t<i;++t)if(e[t].isLocked())return void window.QES_Global.handleEditWhenSurveyLocked();if(!window.QES_Global.suspendSelects){window.QES_Global.saveSurvey(!1);var n=function(t){e=window.QuestionActions.selectedRegistry;for(var i=0,n=e.length;i<n;++i)e[i].tmpMoveData||(e[i].tmpMoveData={oldBID:e[i].parentObj.blockId,oldPos:e[i].getPosition()});for(var o=0,s=e.length;o<s;++o){var a=e[o];window.QuestionActions.moveToBlock(a,t),a.refreshQuestion({ignoreSkipLogic:!0})}for(var r=0,l=e.length;r<l;++r)e[r].refreshSkipLogic(!1,null);t.checkForEmptyBlock(),window.QuestionActions.executeMoves({batchMove:!0})};window.addBlock({afterFinish:n})}}};window.ToolboxActions=d,t.default=d},1760:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);window.PlacementChooser=window.Class.create(),window.PlacementChooser.placementChooserObj=null,window.PlacementChooser.scan=function(){if(window.QES_OverQuestion.questionObj){if(window.QES_OverQuestion.questionObj.placementTag)return;var e=window.QES_OverQuestion.questionObj.id,t=0;if("Question"==window.QES_OverQuestion.questionObj.objType){var i=window.QES_OverQuestion.questionObj.getTop();(window.mousePos[1]-i)/window.QES_OverQuestion.questionObj.getHeight()>.5&&(t=1)}window.PlacementChooser.placementChooserObj.currentId+window.PlacementChooser.placementChooserObj.currentDelta!=e+t&&(window.PlacementChooser.placementChooserObj.currentDelta=t,window.PlacementChooser.placementChooserObj.currentId=e,window.PlacementChooser.placementChooserObj.refresh())}},window.PlacementChooser.getPlaceFunction=function(){return function(){window.PlacementChooser.placementChooserObj.place()}},window.PlacementChooser.prototype={objectsToPlace:[],currentDelta:null,currentId:null,scroller:null,callbackRestore:null,color:null,clearCallbackRestore:null,initialize:function(e){if(!window.PlacementChooser.placementChooserObj){this.objectsToPlace=e,window.QES_Global.suspendSelects=!0,window.PlacementChooser.placementChooserObj=this,this.callbackRestore=window.QES_OverQuestion.callback,this.clearCallbackRestore=window.QES_OverQuestion.clearCallback,window.QES_OverQuestion.callback=["PlacementChooser","scan"],window.QES_OverQuestion.clearCallback=null,window.QES_OverQuestion.alwaysUpdate=!0,window.QES_Global.suspendOverBorders=!0;for(var t=0,i=this.objectsToPlace.length;t<i;++t)this.objectsToPlace[t].placementTag=1,this.objectsToPlace[t].height=null;this.lastY=window.mousePos[1],window.QuestionActions.clearIcons(),this.refresh(this.objectsToPlace[0])}},refresh:function(e){if(this.scroller&&this.scroller.cancel(),!this.objectsToPlace.length)return void this.endPlacement();if(this.objectsToPlace&&!this.objectsToPlace[0].element)return void this.endPlacement();var t=window.QES_OverQuestion.questionObj||e;if(t){if(window.QES_OverQuestion.questionObj&&window.QES_OverQuestion.questionObj.isLocked())return void window.msg(Object(n.default)("EditSection","Locked"),"locked");var i=!0;this.beforeUpdate&&!1===this.beforeUpdate(this.objectsToPlace,t)&&(i=!1);var o=void 0,s=void 0;if("Question"==t.objType)o=t.parentObj,s=t.getPosition(!0);else if("Block"==t.objType){if(o=t,o.questions.length>0)return;s=0}if(i){window.QualtricsCPTools.Highlighter.removeAll();for(var a=0,r=this.objectsToPlace.length;a<r;++a){var l=this.objectsToPlace[a].getPosition();this.objectsToPlace[a].parentObj.questions.splice(l,1),this.objectsToPlace[a].element&&this.objectsToPlace[a].removeQuestionDOM()}for(var c=0,d=this.objectsToPlace.length;c<d;++c){var u=s+this.currentDelta+c;o.questions.splice(u,0,this.objectsToPlace[c]),this.objectsToPlace[c].parentObj=o,this.objectsToPlace[c].collapsed=1}window.QES_OverQuestion.suspend=!0;for(var h=0,p=this.objectsToPlace.length;h<p;++h)this.objectsToPlace[h].render()}var w=this.objectsToPlace[this.objectsToPlace.length-1],f=window.Position.cumulativeOffset(this.objectsToPlace[0].element)[0],v=this.objectsToPlace[0].getTop(),b=window.$(this.objectsToPlace[0].element).getWidth(),g=w.getBottom()-v,y="#BEDDEE";this.color&&(y=this.color);var S={x:f,y:v,height:g,width:b,color:y,opacity:.6,caption:Object(n.default)("EditSection","MoveQuestionInstructions"),onclick:window.PlacementChooser.getPlaceFunction()};new window.QualtricsCPTools.Highlighter(S).render(),window.QuestionTopCache={},window.QES_OverQuestion.questionObj=t,window.QES_OverQuestion.suspend=!1}},place:function(){window.QES_Global.suspendSelects=!1;for(var e=0,t=this.objectsToPlace.length;e<t;++e)this.objectsToPlace[e].height=null,this.objectsToPlace[e].collapsed=this.objectsToPlace[e].parentObj.collapsedQuestionMode,this.objectsToPlace[e].placementTag=null,this.objectsToPlace[e].refreshQuestion();this.endPlacement(),window.Toolbox.getInstance().render(),this.onPlace&&this.onPlace(this.objectsToPlace)},endPlacement:function(){window.QES_Global.suspendSelects=!1,window.QualtricsCPTools.Highlighter.removeAll(),this.callbackRestore&&(window.QES_OverQuestion.callback=this.callbackRestore),this.clearCallbackRestore&&(window.QES_OverQuestion.clearCallback=this.clearCallbackRestore),window.QES_OverQuestion.alwaysUpdate=!1,window.QES_Global.suspendOverBorders=!1,window.PlacementChooser.placementChooserObj=null}}},1761:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),o=i(8),s=i(9);n.a.ResizeTE=window.Class.create({initialize:function(e,t,i){return this._gridSize=10,this.eventObserve(e),this.questionObj=t,void 0!=i&&(this._formItem=this.questionObj.getChoiceBySelectionId(i),null==this._formItem.meta&&(this._formItem.meta={})),this._resizing=!0,this._target=e.target,this._textEntry=e.target.previousSibling,this._startX=window.mousePos[0],this._startY=window.mousePos[1],this._catcher=Object(o.a)("div",{className:"ResizeTECatcher"}),Object(s.a)(this._target.parentNode).insert(this._catcher),n.a.Browser.IE&&n.a.Browser.Version<8?this._offsetX=this._target.offsetLeft-4:this._offsetX=this._target.offsetLeft,window.BaseForm.getInstance().isRTL()&&(this._offsetX=this._target.offsetRight),this._offsetY=this._target.offsetTop,"ML"==this.questionObj.selector||"ESTB"==this.questionObj.selector?Object(s.a)(document.body).addClassName("ResizeTEDraggingSE"):Object(s.a)(document.body).addClassName("ResizeTEDraggingE"),this._interval=setInterval(this.resize.bind(this),50),window.Event.stop(e),window.document.onselectstart=function(){return!1},this._target.ondragstart=function(){return!1},!1},eventObserve:function(e){this._startSnapBound=this.startSnap.bind(this),this._endSnapBound=this.endSnap.bind(this),this._endDragBound=this.endDrag.bind(this),window.Event.observe(document,"mouseup",this._endDragBound),e.shiftKey||e.altKey||e.ctrKey?(this._grid=!1,window.Event.observe(document,"keyup",this._startSnapBound)):(this._grid=!0,window.Event.observe(document,"keydown",this._endSnapBound))},endSnap:function(e){17!=e.keyCode&&18!=e.keyCode||(this._grid=!1,window.Event.observe(document,"keyup",this._startSnapBound),window.Event.stopObserving(document,"keydown",this._endSnapBound),window.Event.stop(e))},startSnap:function(e){this._grid=!0,window.Event.stopObserving(document,"keyup",this._startSnapBound),window.Event.observe(document,"keydown",this._endSnapBound),window.Event.stop(e)},endDrag:function(e,t){this._resizing&&(clearInterval(this._interval),this._resizing=!1,Object(s.a)(this._status).fade({afterFinish:function(e){Object(s.a)(e.element).remove()}}),Object(s.a)(this._catcher).remove(),window.Event.stopObserving(document,"mouseup",this._endDragBound),window.Event.stopObserving(document,"keydown",this._endSnapBound),window.Event.stopObserving(document,"keyup",this._startSnapBound),Object(s.a)(document.body).removeClassName("ResizeTEDraggingSE"),Object(s.a)(document.body).removeClassName("ResizeTEDraggingE"))},resize:function(){"TEXTAREA"==this._textEntry.tagName?this.multiLine():this.singleLine(),void 0==this._status?void 0!=this.outputDims()&&(this._message=Object(o.a)("div",{className:"message"},this.outputDims()),this._status=Object(o.a)("div",{className:"ResizeTEStatus"},[this._message]),Object(s.a)(document.body).insert(this._status)):(void 0!=this.outputDims()&&(this._message.innerHTML=this.outputDims()),this._status.style.top=window.mousePos[1]+10+"px",this._status.style.left=window.mousePos[0]+"px"),this.questionObj.setSaved(!1)},singleLine:function(){this._textEntry.offsetWidth,this._textEntry.clientWidth;this._textEntry.disabled?n.a.Browser.Gecko?this.xAxis(2):n.a.Browser.IE?this.xAxis(6):this.xAxis(4):this.xAxis(6)},multiLine:function(){var e=this._textEntry.offsetWidth-this._textEntry.clientWidth,t=this._textEntry.offsetHeight-this._textEntry.clientHeight;this.yAxis(e),this.xAxis(t)},xAxis:function(e){var t=window.mousePos,i=this._startX-t[0],n=void 0,o=void 0,a=!1;if(0!=i&&(void 0==this._constraint||this._constraint>t[0]||this._constraint<t[0]&&window.BaseForm.getInstance().isRTL())){this._constraint=void 0,"MA"!=this.questionObj.options.answers&&"SA"!=this.questionObj.options.answers||"HORZ"!=this.questionObj.options.position||(i*=2,a=!0),window.BaseForm.getInstance().isRTL()?(n=Object(s.a)(this._textEntry).getWidth()-e+i,o=this._offsetX+i):(n=Object(s.a)(this._textEntry).getWidth()-e-i,o=this._offsetX-i);var r=0;if(this._grid){var l=this.snapToGrid(n,o);n=l.inputDim,o=l.handlePos,r=l.gridDiff}if(this.isValidWidth(n))this._offsetX=o,a?window.BaseForm.getInstance().isRTL()?this._startX-=i/2-r/2:this._startX-=i/2+r/2:window.BaseForm.getInstance().isRTL()?this._startX-=i-r:this._startX-=i+r,this.updateXAxis(n,o);else if(n>10){var c=this.getHorizontalConstraint()-(Object(s.a)(this._textEntry).getWidth()-e);n=Object(s.a)(this._textEntry).getWidth()-e+c,o=this._offsetX+c,this.isValidWidth(n)&&(this._offsetX=o,this._constraint=this._startX+c,this._startX=this._startX+c,this.updateXAxis(n,o))}}},yAxis:function(e){var t=window.mousePos,i=this._startY-t[1];if(0!=i&&(void 0==this._yConstraint||this._yConstraint<t[1])){this._yConstraint=void 0;var n=Object(s.a)(this._textEntry).getHeight()-e-i,o=this._offsetY-i,a=0;if(this._grid){var r=this.snapToGrid(n,o);n=r.inputDim,o=r.handlePos,a=r.gridDiff}if(this.isValidHeight(n))this._offsetY=o,this._startY-=i+a,this.updateYAxis(n,o);else{var l=this.getVerticalConstraint()-(Object(s.a)(this._textEntry).getHeight()-e);n=Object(s.a)(this._textEntry).getHeight()-e+l,o=this._offsetY+l,this.isValidHeight(n)&&(this._offsetY=o,this._yConstraint=this._startY+l,this._startY=this._startY+l,this.updateYAxis(n,o))}}},updateXAxis:function(e,t){window.BaseForm.getInstance().isRTL()?this._target.style.right=e+"px":this._target.style.left=t+"px",this._textEntry.style.width=e+"px","HORZ"==this.questionObj.options.position&&(this._target.parentNode.style.margin="auto",this._target.parentNode.style.width=e+"px"),this.saveWidth(e)},updateYAxis:function(e,t){this._textEntry.style.height=e+"px",this._target.style.top=t+"px",this.saveHeight(e),this.questionObj.height=this.questionObj.element.getHeight(),window.QuestionActions.updateIcons()},snapToGrid:function(e,t){var i=0;return i=e%this._gridSize,t-=i,e-=i,{handlePos:t,inputDim:e,gridDiff:i}},isValidHeight:function(e){return e>=this.getVerticalConstraint()},isValidWidth:function(e){return e>10&&(!this._grid||e<=this.getHorizontalConstraint())},getVerticalConstraint:function(){return 15},getHorizontalConstraint:function(){return"FORM"==this.questionObj.selector?470:"Matrix"==this.questionObj.questionType?160:"SACOL"==this.questionObj.selector?300:"SAHR"==this.questionObj.selector?150:"RO"==this.questionObj.questionType&&"DND"==this.questionObj.selector?550:"RO"==this.questionObj.questionType&&"RB"==this.questionObj.selector?445:"RO"==this.questionObj.questionType&&"VR"==this.questionObj.selector?525:"SBS"==this.questionObj.questionType?200:"PGR"==this.questionObj.questionType?175:680},outputDims:function(){var e=void 0,t=void 0;return this._formItem?(e=this._formItem.meta.InputWidth,t=this._formItem.meta.InputHeight):(e=this.questionObj.options.InputWidth,t=this.questionObj.options.InputHeight),void 0==t&&void 0!=e?"width: "+e+"px":void 0==e&&void 0!=t?"height: "+t+"px":void 0!=e&&void 0!=t?e+"px X "+t+"px":void 0},saveHeight:function(e){this._formItem?this._formItem.meta.InputHeight=e:this.questionObj.options.InputHeight=e},saveWidth:function(e){void 0!=this._formItem?this._formItem.meta.InputWidth=e:this.questionObj.options.InputWidth=e}})},1762:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(1),s=i(4),a=i(7),r=i(109),l=i(54),c=i(9);window.strToPlural=function(e){var t=e+"s";return"y"==e.substring(e.length-1,e.length).toLowerCase()&&(t=e.substring(0,e.length-1)+"ies"),t},window.addQuestionToSurvey=function(){var e=window.createDefaultQuestion(),t=window.Survey.getInstance().blocks[window.Survey.getInstance().blocks.length-2];t.addQuestion(e),e.render(Object(c.a)(t.id))},a.a.createNewConjoint=function(){var e=new window.ConjointBlock;e.generate(),e.conjointEditor.setupDefaults(),window.Survey.getInstance().addBlock(e),e.render(),e.frameBlock(),new window.Ajax.Request(s.a.getAjaxURL("CreateConjoint",null,{SurveyID:a.a.User.currentSurveyId}),{parameters:{ConjointInfo:Object.toJSON(e.conjointEditor.conjointInfo),AddToFlow:!0},onComplete:e.handleCreateConjointResult.bind(e)})},window.addBlock=function(e,t){if(e=Object.extend({asynchronous:!0},e),window.Survey.getInstance().getPermission("editQuestions")&&window.Survey.getInstance().getPermission("useBlocks")){var i=o.default.getInstance().id,l={SurveyID:i};if(void 0!==t){var c=window.Survey.getInstance().blocks[t-1];c&&(l.BelowBlockID=c.blockId,l.CheckBranchUIRestrictions=!0),window.msg(Object(n.default)("EditSection","InsertingNewBlock"),"addblock")}else window.msg(Object(n.default)("EditSection","CreatingNewBlockBottomSurvey"),"addblock");var d=new window.Block;return d.type="Standard",e.subType?d.subType=e.subType:d.subType="",l.SubType=d.subType,void 0===t&&(t=1==window.Survey.getInstance().blocks.length?0:window.Survey.getInstance().blocks.length),window.Survey.getInstance().addBlock(d,t),d.blockNameObj.text="",d.render(),d.frameBlock(),t==window.Survey.getInstance().blocks.length-2&&window.Survey.getInstance().renderEndOfSurvey(),new window.Ajax.Request(s.a.getAjaxURL("NewBlock",null,{SurveyID:a.a.User.currentSurveyId}),{method:"post",parameters:l,asynchronous:e.asynchronous,onComplete:function(t){try{var i=t.responseText.evalJSON();if(!i.ID)throw"Error could not be saved";r.e.getInstance().surveyEdited(o.default.getInstance().id),d.blockId=i.ID,d.blockNameObj.text=i.Description,d.redrawHeader(),window.QuestionTopCache={},e&&e.afterFinish&&e.afterFinish(d)}catch(e){alert("Error creating block, server response was: "+t.responseText+","+e),window.Survey.getInstance().reload()}},onFailure:function(){window.QES_Error("Error Creating Block"),window.Survey.getInstance().reload()}}),d}},window.createDefaultQuestion=function(){var e=new window.Question;switch(e.text=Object(n.default)("EditSection","ClickToWriteQuestion"),e.text_Unsafe=e.text,e.addChoice.repeat(3,e),Object(l.getConfig)().defaultQuestionType){case"Matrix":e.questionType="Matrix",e.selector="Likert",e.subSelector="SingleAnswer",e.choicesWidth=25,e.addAnswer.repeat(3,e);for(var t=0;t<3;t++){var i=t+1;e.answers[t].text=Object(n.default)("EditSection","ClickToWrite")+"  "+Object(n.default)("EditSection","ScalePoint").capitalize()+" "+i}e.gradingData=[],e.setOption("TextPosition","inline"),e.setOption("RepeatHeaders","none"),e.setOption("WhiteSpace","OFF"),e.populateQuestionOptions()}return e},window.selectionListToString=function(e){var t="";if(e)for(var i=0,n=e.length;i<n;++i){var o=e[i];t+=o.text,i<n-1&&(t+="\r")}return t},window.toggleMobileCompatiblityChecker=function(){var e=window.Survey.getInstance();if(1!=e.mobileCompatibilityChecker){e.mobileCompatibilityChecker=1,window.QES_Global.checkMobileCompatibility();a.a.User&&1==a.a.User.offlineAppPermission&&window.QES_Global.checkMobileOfflineCompatibility()}else e.mobileCompatibilityChecker=0,window.QES_Global.removeMobileCompatibilityMessages();var t=o.default.getInstance().id;new window.Ajax.Request(s.a.getAjaxURL("SetMobileCompatibilityChecker",null,{SurveyID:a.a.User.currentSurveyId}),{method:"post",parameters:{SurveyID:t,value:e.mobileCompatibilityChecker}})},window.toggleSurveyPreviewMode=function(e){if(!window.QES_Global.suspendSelects){e||(e=window.event);var t=window.Survey.getInstance();t.renderCount=0,window.QuestionActions.unselectAll(),1==t.defaultPreviewMode?t.defaultPreviewMode=0:t.defaultPreviewMode=1,t.resetPreviewModes(),t.refresh();var i=o.default.getInstance().id;new c.c.Request(s.a.getAjaxURL("SetSurveyPreviewMode"),{method:"post",parameters:{SurveyID:i,value:t.defaultPreviewMode}})}},window.setChoiceMeta=function(e){var t=e.getAttribute("questionObjId"),i=e.getAttribute("choiceId"),n=e.name;if(t){var o=window.Question.getQuestionById(t),s=o.getChoiceByChoiceId(i);s&&(s.meta||(s.meta={}),s.meta[n]=e.value,o.setEdited())}},window.isInView=function(e){var t=window.getWindowSize()[1],i=window.Position.page(e)[1];return i>-1&&i<t},window.getWindowSize=function(){var e=document,t=void 0,i=void 0;return void 0!==window.innerWidth?(t=window.innerWidth,i=window.innerHeight):e.documentElement&&void 0!==e.documentElement.clientWidth&&0!=e.documentElement.clientWidth?(t=e.documentElement.clientWidth,i=e.documentElement.clientHeight):e.body&&void 0!==e.body.clientWidth&&(t=e.body.clientWidth,i=e.body.clientHeight),[t,i]},window.clearSelection=function(){var e=void 0;window.document.selection&&window.document.selection.empty?window.document.selection.empty():window.getSelection&&(e=window.getSelection())&&e.removeAllRanges&&e.removeAllRanges()}},1763:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(518),o=i(9);n.a.Bounce=window.Class.create(),Object.extend(Object.extend(n.a.Bounce.prototype,n.a.Base.prototype),{initialize:function(e){this.element=Object(o.a)(e);var t=Object.extend({x:0,y:22,acceleration:91.81,transition:n.a.Transitions.linear,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){window.Element.makePositioned(this.element),this.originalLeft=parseFloat(window.Element.getStyle(this.element,"left")||"0"),this.originalTop=parseFloat(window.Element.getStyle(this.element,"top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft)},singlebounce:function(e){var t=e<.5?.5-e:1-e+.5;return 8*(e<.5?this.options.acceleration/2*t*t:this.options.acceleration/2*(1-t)*(1-t))/this.options.acceleration-1},multibounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},update:function(e){window.Element.setStyle(this.element,{left:this.options.x*e+this.originalLeft+"px",top:this.originalTop+this.options.y*this.singlebounce(e)+"px"})}})},1764:function(e,t,i){"use strict";function n(){window.AnnotatorApp||(window.AnnotatorApp=window.Annotator.New({module:"editsurveys",projectID:a.a.User.currentSurveyId,user:a.a.User.userId,lang:a.a.User.language})),window.AnnotatorApp.sync()}function o(e,t,i){return"https://"+e+"/ControlPanel?LoginAction=EditSection&SID="+t}function s(){for(var e=document.querySelectorAll("#Survey .Question"),t=0;t<e.length;t++){var i=e[t].id?window.BaseQuestion.getQuestionById(e[t].id):null,n=document.querySelector("#"+i.id+" .QuestionSelect .annotations-target");i.questionId&&null!=n&&(n.id||(n.id=a.a.User.currentSurveyId+":"+i.questionId),n.getAttribute("project-comments-url")||n.setAttribute("project-comments-url",o(window.location.host,a.a.User.currentSurveyId,i.questionId)))}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(7);window.Annotator&&a.a.Features.project_comments&&(window.Event.observe(document,"Survey:syncAnnotation",n),window.Event.observe(document,"Survey:questionSaved",function(){s(),n()}))},1765:function(e,t,i){"use strict";var n=i(1766),o=(i.n(n),i(1767)),s=(i.n(o),i(1768)),a=(i.n(s),i(1769)),r=(i.n(a),i(1770)),l=(i.n(r),i(1771)),c=(i.n(l),i(1772)),d=(i.n(c),i(1773)),u=(i.n(d),i(1774)),h=(i.n(u),i(1775)),p=(i.n(h),i(1776)),w=(i.n(p),i(1777)),f=(i.n(w),i(1778)),v=(i.n(f),i(553));i.n(v)},1766:function(e,t){},1767:function(e,t){},1768:function(e,t){},1769:function(e,t){},1770:function(e,t){},1771:function(e,t){},1772:function(e,t){},1773:function(e,t){},1774:function(e,t){},1775:function(e,t){},1776:function(e,t){},1777:function(e,t){},1778:function(e,t){},335:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(1705),i(1765)},517:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1004);i(1005),i(1006);t.default=n.a},549:function(e,t,i){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,i=t(window.Class.create(e,{initialize:function($super,e,t,i){$super(t.Display),this.generate(t),this.parentObj=i,this.referenceListChoiceId=e,this.choiceId="x"+e,this.recodeValue="x"+t.RecodeValue,this.variableNaming=t.VariableNaming,this.choiceDataExportTag=i.exportTag+"_"+this.recodeValue,this.skipKeyTab=!0}}));return window.QuestionReferenceChoice=i,i}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"createQuestionReferenceChoice",function(){return n});var o=i(996),s=i(998);window.createQuestionReferenceChoice=n,t.default=n(o.default,s.a)},550:function(e,t,i){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,i=t(window.Class.create(e,{initialize:function($super,e,t,i){$super(t.Display),this.generate(t),this.parentObj=i,this.referenceListAnswerId=e,this.answerId="x"+e,this.recodeValue="x"+t.RecodeValue,this.answerDataExportTag=i.exportTag+"_"+this.recodeValue,this.skipKeyTab=!0}}));return window.QuestionReferenceAnswer=i,i}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"createQuestionReferenceAnswer",function(){return n});var o=i(997),s=i(998);window.createQuestionReferenceAnswer=n,t.default=n(o.default,s.a)},553:function(e,t){},994:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o={down:function(e,t){if(this.parentObj.skipAutoEdit=1,!this.proxie||void 0!==t&&null!==t){if(!window.Event.isLeftClick(e)){if(e.altKey)return;var i=this;return window.QMenu.showMenu.curry(i.buildMenu.bind(i),window.Event.element(e),{mousePosition:!0}).defer(),void window.Event.stop(e)}if(window.Event.element(e).getAttribute("selectionimage")){var o=this;return void function(){window.QMenu.showMenu(o.buildMenu.bind(o),window.Event.element(e),{mousePosition:!0})}.defer()}var s=this,a={lang:window.BaseForm.getInstance().defaultLanguage,validationFn:function(){var e=!1;return function(t,i){return!0===(s.parentObj&&s.parentObj.allowJavaScript)||!window.QualtricsCPTools.textHasIllegalScripting(t)||(e||(e=!0,window.QualtricsCPTools.showAlertDialog({message:Object(n.default)("EditSection","NoJavaScriptInChoiceText"),okCallBack:function(){e=!1}})),!1)}}()},r=this.edit(e,t,a);r&&(r.skipAnEvent=1)}}};window.BindedChoiceActions=o,t.default=o},995:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=i(0),s=i(8),a=i(443),r=i(140),l=i(4),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d={buildChangeChoiceIdBox:function(e,t){var i=document.createDocumentFragment(),n=!e.canEditRecodeValues();return 0===t&&i.appendChild(Object(s.a)("br")),i.appendChild(Object(s.a)("input",{title:"Change Choice ID",className:(n?"Disabled ":"")+"ChangeChoiceId Left",size:"2",clickcallback:"Form.Element.activate",keyupcallback:"Question.changeChoiceIdKeyUp",instanceid:e.parentObj.id,p1:"$el",p2:e.id,value:e.choiceId,disabled:n})),1===t&&i.appendChild(Object(s.a)("br")),i},buildRecodeValuesBox:function(e,t){var i=e.parentObj;if(!i.recodeValues)return document.createDocumentFragment();if(e.recodeValue||0===e.recodeValue||""===e.recodeValue){var n=!e.canEditRecodeValues(),o=document.createDocumentFragment();0===t&&o.appendChild(Object(s.a)("br"));var a=Object(s.a)("input",{title:"Recode Values",className:(n?"Disabled ":"")+"RecodeValues Left",id:"RecodeChoice_"+e.getAnyId(),size:"2",keyupcallback:"Question.recodeKeyUp",instanceid:i.id,p1:"$el",p2:e.id,p3:e.seriesIndex,value:e.recodeValue,disabled:n});return o.appendChild(a),1===t&&o.appendChild(Object(s.a)("br")),o}return document.createDocumentFragment()},buildVariableNamingBox:function(e,t){var i=e.parentObj;if(!i.variableNaming)return document.createDocumentFragment();if(e.variableNaming||0===e.variableNaming||""===e.variableNaming){if("string"!=typeof e.variableNaming&&0===e.variableNaming.length)return document.createDocumentFragment();var n=!e.canEditRecodeValues(),o=document.createDocumentFragment();return 0===t&&o.appendChild(Object(s.a)("br")),o.appendChild(Object(s.a)("input",{title:"Variable Name",className:(n?"Disabled ":"")+" VariableNaming Left",size:"25",keyupcallback:"Question.variableNamingKeyUp",instanceid:i.id,p1:"$el",p2:e.id,p3:e.seriesIndex,value:e.variableNaming||"",disabled:n})),1===t&&o.appendChild(Object(s.a)("br")),o}return document.createDocumentFragment()},buildChoiceDataExportTagBox:function(e,t){var i=e.parentObj;if(!i.choiceDataExportTags)return document.createDocumentFragment();if(e.choiceDataExportTag||0===e.choiceDataExportTag||""===e.choiceDataExportTag){var n=!e.canEditRecodeValues(),o=document.createDocumentFragment();return 0===t&&o.appendChild(Object(s.a)("br")),o.appendChild(Object(s.a)("input",{title:"Answer Data Export Tag",className:(n?"Disabled":"")+" ChoiceDataExportTags Left",size:"10",keyupcallback:"Question.choiceDataExportTagKeyUp",instanceid:i.id,p1:"$el",p2:e.id,value:e.choiceDataExportTag||"",disabled:n})),1===t&&o.appendChild(Object(s.a)("br")),o}if(e.answerDataExportTag||0===e.answerDataExportTag||""===e.answerDataExportTag){var a=document.createDocumentFragment();return 0===t&&a.appendChild(Object(s.a)("br")),a.appendChild(Object(s.a)("input",{title:"Answer Data Export Tag",className:"ChoiceDataExportTags Left",size:"10",keyupcallback:"Question.answerDataExportTagKeyUp",instanceid:e.parentObj.id,p1:"$el",p2:e.id,value:e.answerDataExportTag||""})),1===t&&a.appendChild(Object(s.a)("br")),a}return document.createDocumentFragment()},parseAjaxResponse:function(e){var t=e,i=null;if("object"==(void 0===t?"undefined":c(t)))if(void 0!=t.responseText){if(t.responseText)try{i=t.responseText.evalJSON()}catch(e){}}else i=e;if(i){var n=null,d=!1;i.Error&&(i.Error.ErrorMessage?n=new Array(i.Error.ErrorMessage,i.Error.ErrorCode,i.Error.SyncError):i.Error[0]&&(n=i.Error));var u=null;if(n&&n.each(function(e){if(e.ErrorMessage&&(Object(a.default)(e.ErrorMessage),u=e.ErrorMessage),e.SyncError&&(d=!0),"ECP07"==e.ErrorCode)return window.document.Page.action="./",l.a.post("Logout","","",""),!1}),u&&!d){var h=new r.a;h.appendChild(Object(s.a)("h2",null,Object(o.default)("ValidationErrorCodes","VE_ERROR"))),h.appendChild(Object(s.a)("div",null,u)),h.center()}if(d&&window.Survey.getInstance().reload(),!u)return!1}},showNetworkConnectivityDialog:function(e){window.inlineEditor&&window.inlineEditor.getInstance()&&window.inlineEditor.getInstance().removeInlineEditor(),r.a.getInstance("NetworkConnectivityDialog")&&r.a.closeWindow("NetworkConnectivityDialog");var t=new r.a("NetworkConnectivityDialog",{title:Object(s.a)("span",null,["Cannot Save",d.getNetworkStatusNode()]),buttons:[{text:Object(o.default)("EditSection","Ignore"),className:"negative",click:"Q_Window.closeWindow"},{id:"TryAgainButton",text:Object(o.default)("EditSection","TryAgain"),className:"positive",click:e||"Q_FormHelpers.trySave"}]}),i=window.BaseForm.getInstance().getUnsavedQuestions(),n=Object(s.a)("div",{},[Object(s.a)("p",{},["Your browser cannot connect to qualtrics and you have ",Object(s.a)("strong",null,i.length)," unsaved questions"]),Object(s.a)("p",null,"Check your network connection and try again")]);t.setContent(n),t.center()},getNetworkStatusNode:function(){var e=Object(s.a)("span"),t="Your network status is: ";return!0===navigator.onLine?(e.innerHTML="Online",e.addClassName("Online")):!1===navigator.onLine?(e.innerHTML="Offline",e.addClassName("Offline")):t="",Object(s.a)("span",{className:"NetworkStatus"},[t,e])},trySave:function(){window.BaseForm.getInstance().save(),Object(n.a)("TryAgainButton")&&(Object(n.a)("TryAgainButton").innerHTML=Object(o.default)("SiteWide","Saving")+"...",Object(n.a)("TryAgainButton").addClassName("Disabled"),Object(n.a)("TryAgainButton").setAttribute("clickcallback",""))},onlineEventHandler:function(){r.a.getInstance("NetworkConnectivityDialog")&&window.Q_FormHelpers.showNetworkConnectivityDialog(),d.trySave()},offlineEventHandler:function(){window.Q_FormHelpers.showNetworkConnectivityDialog()},questionExistsInSurvey:function(e){var t=window.BaseQuestion.getQuestionByQuestionId(e);return!(!t||!t.parentObj||"Trash"==t.parentObj.type)}};window.Q_FormHelpers=d,t.default=d},996:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(208),o=window.Class.create(n.default,{objType:"choice",parentList:"choices",axis:"y",getPrevGroup:function(){if(this.parentObj.answers.length>0){var e=this.parentObj.answers.last();if(e.series&&e.series.length){return new(0,window.SelectionSeriesIndexMapper)(e,e.series.length-1)}return this.parentObj.answers[this.parentObj.answers.length-1]}return this.parentObj.getQuestionTextObj()},getNextGroup:function(){var e=this.parentObj.getNext(!0,!0);return e?e.getFirstEditable():null},getRight:function(){if(this.parentObj.answers.length>0)return this.parentObj.answers[0]},insertBelow:function(e){var t=this.getPosition();if(null!==t){var i=this.parentObj.addChoiceAndRender(null,t+1,this.parentGroupId);return i.edit(void 0,void 0,e),i}}});window.Choice=o,t.default=o},997:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),o=i(208),s=i(8),a=window.Class.create(o.default,{objType:"answer",parentList:"answers",textEntry:null,axis:"x",buildInlineEditorMenuButton:function(e){return Object(s.a)("div",{className:"inlineEditorOptions",editordowncallback:"showMenu"},[Object(s.a)("b",{bubbleup:!0},[Object(s.a)("b",{bubbleup:!0})])])},getPrevGroup:function(e){if(null!=e){var t=this.parentObj[this.parentList].last();if(t)return t}return this.parentObj.getQuestionTextObj()},getNextGroup:function(e){if(null==e){var t=this.parentObj[this.parentList][0];if(t.series&&t.series.length)return new window.SelectionSeriesIndexMapper(t,0)}return this.parentObj.choices.length>0?this.parentObj.choices[0]:null},getLeft:function(){return Object(n.a)(this.id)&&Object(n.a)(this.id).offsetLeft<5?this.parentObj.choices.length>0?this.parentObj.choices[0]:void 0:this.getPrev()},getRight:function(){return this.getNext()},insertBelow:function(e){var t=this.getPosition();if(null!==t){var i=this.parentObj.addAnswerAndRender(null,t+1);return i&&i.edit(null,null,e),i}}});window.Answer=a,t.default=a},998:function(e,t,i){"use strict";var n=i(0);t.a=function(e){return window.Class.create(e,{buildMenu:function(){var e={items:[]},t=this.parentObj.questionType,i=this.parentObj.getAxisDef(this.axis);return this.addDisplayLogicMenuItems(e.items,t,i),e},exportData:function(){return this.displayLogic?{DisplayLogic:this.displayLogic.getData()}:null},edit:function(e){if(e){var t=window.Qualtrics.Menu.findMenu(this.buildMenu);if(t&&t.isOpen()){t.options.choiceId===this.id||t.destroy()}window.QMenu.showMenu(this.buildMenu,e.target,{scope:this,choiceId:this.id,p1:this.seriesIndex,p2:this.lang},e),window.inlineEditor.clear()}},canEditRecodeValues:function(){return!1},buildProxySymbol:function(){return'<span class="CarryForwardSymbol" title="'+Object(n.default)("CarryForward")+'">&raquo;&nbsp;</span>'}})}},999:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),r=i(210),l=i(54),c=i(8),d=i(4),u=i(7),h=i(9),p=i(939),w=(i.n(p),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),v=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.unsavedTimer=null,e.initialize(),e}return s(t,e),f(t,[{key:"build",value:function(){}},{key:"createQuestion",value:function(e,t){return new window.Question(this,t,e)}},{key:"redraw",value:function(){window.deleteChildren(this.element),this.element.appendChild(this.buildBlockInner()),this.element.appendChild(Object(c.a)("div",{className:"BlockShadow"})),this.renderQuestions()}},{key:"render",value:function(e,t){this.isReferenceSurveyBlock()&&(this.collapsed=!0);var n=i(1).default,o=n.getInstance();this.parentId&&(e=this.parentId);var s=Object(h.a)(e);this.realQuestionCount>this.collapsedQuestionThreshold&&(this.collapsedQuestionMode=1);var r="";this.getStatusClassName&&(r=this.getStatusClassName());var l=null;if(o.collapsedBlockMode&&!o.isLastRenderedBlock(this.id)||"Trash"!=this.type&&n.getInstance().getPermission("addBlocks",!0)&&!this.isReferenceSurveyBlock()&&(l=Object(c.a)("div",{className:"TheAddBlockLink",clickcallback:"Block.addBlockBelow",instanceid:this.id},Object(a.default)("EditSection","AddBlock"))),this.element=Object(c.a)("div",{className:"BlockOuter"+r},[this.buildBlockInner(),l]),"Trash"==this.type){var d=Object(c.a)("div",{className:"TrashBottom"},[Object(c.a)("div",{className:"LeftCap"}),Object(c.a)("div",{className:"RightCap"})]),u=Object(c.a)("div",{id:"TrashArea"},[this.element,d]);d=null,Object(h.a)(e).parentNode.appendChild(u)}else if(this.element.appendChild(Object(c.a)("div",{className:"BlockShadow"})),t)s.appendChild(this.element);else{var p=this.getSibling(1,!1);p&&p.element&&p.element.parentNode&&p.element.parentNode.parentNode?s.insertBefore(this.element,p.element):s.appendChild(this.element)}"Trash"==this.type||!this.questions||this.questions.length||this.shell||this.addEmptyClass()}},{key:"getQuestionOverlay",value:function(){return""}},{key:"getAdditionalClassNames",value:function(){return""}},{key:"hasReferenceListQuestion",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,o=this.questions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;if(s.usesSelectionReferenceListForAxis("X")||s.usesSelectionReferenceListForAxis("Y"))return!0}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}return!1}},{key:"getBlockEDKeys",value:function(){var e={},t=/e:\/\/Field\/([^\u0000-\u001F\u007F-\u00BF\/`<>\[\]\{\}?]+)/g,i={parentObj:!0,questionObj:!0,block:!0},n=function(t){var i=t.getAllExpressions(),n=!0,o=!1,s=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c=l.data,d=c.LogicType,u=c.LeftOperand;"EmbeddedField"===d&&(e[u]=!0)}}catch(e){o=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}},o=!0,s=!1,a=void 0;try{for(var r,l=this.questions[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var c=r.value;!function o(s,a){if(a>20)return void console.warn("getBlockEDKeys broke: the block definition is recursive",s);if(s)if("string"==typeof s)for(var r=void 0,l=void 0;r=t.exec(s);)try{l=decodeURIComponent(r[1]),e[l]=!0}catch(e){console.warn('Failed to comprehend ed "'+r[1]+'"',e)}else if("object"===(void 0===s?"undefined":w(s))&&void 0!==s.length){var c=!0,d=!1,u=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;o(f,a+1)}}catch(e){d=!0,u=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw u}}}else if("object"===(void 0===s?"undefined":w(s))){if(s.className)return;for(var v in s)i[v]||("logicEditor"===v?n(s[v]):o(s[v],a+1))}}(c,0)}}catch(e){s=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}return Object.keys(e)}},{key:"getBlockEDValue",value:function(e){return this.ED[e]}},{key:"setBlockED",value:function(e,t){t?this.ED[e]!=t&&this.changeBlockEDValue(e,t):this.ED[e]&&this.changeBlockEDValue(e)}},{key:"changeBlockEDValue",value:function(e,t){t?this.ED[e]=t:delete this.ED[e],this.blockEDChanged()}},{key:"saveBlockED",value:function(){window.msg(Object(a.default)("SiteWide","Saving")+"...","SaveBlock"),new h.c.Request(d.a.getAjaxURL("SaveBlockED",null,{SurveyID:u.a.User.currentSurveyId}),{method:"post",parameters:{BlockId:this.blockId,ED:Object.toJSON(this.getBlockED())},onSuccess:function(){window.msg(Object(a.default)("SiteWide","Saved"),"SaveBlock")}})}},{key:"blockEDChanged",value:function(){var e=this;clearTimeout(this.unsavedTimer),this.unsavedTimer=setTimeout(function(){e.saveBlockED()},500)}},{key:"buildEmbeddedDataEditorRow",value:function(e){var t=this,n={type:"text",placeholder:Object(a.default)("EditSection","BlockEmbeddedDataValuePlaceholder",e),id:"EDValue-"+e,value:this.getBlockEDValue(e)||""};i(1).default.getInstance().versionId&&(n.readOnly=!0);var o=Object(c.a)("input",n);return window.Event.observe(o,"keyup",function(){t.setBlockED(e,this.value)}),Object(c.a)("tr",null,[Object(c.a)("td",{className:"EDKey"},[Object(c.a)("label",{htmlFor:"EDValue-"+e},[e+":"])]),Object(c.a)("td",{className:"EDValue"},[o])])}},{key:"buildEmbeddedDataEditor",value:function(){var e=this.getBlockEDKeys(),t=Object(c.a)("div",{className:"ReferenceEDEditor"});if(e.length){t.appendChild(Object(c.a)("h4",{className:"Title"},[Object(a.default)("EditSection","BlockEmbeddedDataEditorTitle")]));var i=Object(c.a)("table",{className:"EDEditor"}),n=Object(c.a)("tbody");i.appendChild(n);var o=!0,s=!1,r=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var u=l.value;n.appendChild(this.buildEmbeddedDataEditorRow(u))}}catch(e){s=!0,r=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}t.appendChild(i)}else window.Element.addClassName(t,"Empty");return t}},{key:"buildReferenceBlockDescription",value:function(){return Object(c.a)("div",null,[Object(c.a)("div",{className:"block-options-button btn btn-sm btn-select btn-hover",downcallback:"QMenu.showMenu(Block.buildReferenceBlockOptionsMenu:"+this.id+', $el, {"checkForFixed":1}, $evt)'},[Object(c.a)("span",{},Object(a.default)("EditSection","BlockOptions")),Object(c.a)("span",{className:"caret"})]),Object(c.a)("div",{className:"reference-block-description"},[Object(c.a)("span",{className:"icon icon-ghostblock-filled-lg"}),Object(c.a)("span",{},Object(a.default)("EditSection","LibraryReferenceBlockDescription"))])])}},{key:"buildReferenceSurveyBlockDescription",value:function(){return Object(c.a)("div",null,[Object(c.a)("div",{className:"block-options-button btn btn-sm btn-select btn-hover",downcallback:"QMenu.showMenu(Block.buildReferenceSurveyBlockOptionsMenu:"+this.id+', $el, {"checkForFixed":1}, $evt)'},[Object(c.a)("span",{},Object(a.default)("EditSection","BlockOptions")),Object(c.a)("span",{className:"caret"})]),Object(c.a)("div",{className:"reference-survey-block-description"},[Object(c.a)("span",{className:"icon icon-ghostsurvey-filled"}),Object(c.a)("span",{},Object(a.default)("EditSection","LibraryReferenceSurveyBlockDescription"))])])}},{key:"buildBlockInner",value:function(){var e="";1===this.getDefaultPreviewMode()&&(e=" BlockPreview");var t="";this.collapsed&&(t=" Collapsed"),this.loading&&(t=" BlockLoading"),this.locked&&(t+=" Locked");var i=this.getAdditionalClassNames(),n=Object(c.a)("div",{id:this.id,className:"Block "+this.type+e+t+i}),o=Object(c.a)("div",{className:"BlockBorder"}),s=Object(c.a)("div",{className:"QuestionsDiv"},[this.getQuestionOverlay()]);if(o.appendChild(this.buildHeader()),this.isReferenceBlock()&&o.appendChild(this.buildEmbeddedDataEditor()),o.appendChild(s),this.loading&&o.appendChild(Object(c.a)("div",{className:"loadingImage"})),"Trash"!=this.type){var a=this.buildFooterButtons();o.appendChild(a),o.appendChild(this.buildBlockOptionsFooter()),this.getfooterMouseOverFunction&&(a.onmouseover=this.getfooterMouseOverFunction()),o.appendChild(Object(c.a)("div",{className:"clear"}))}return this.questionsDiv=s,n.appendChild(o),n}},{key:"buildFooterButtons",value:function(){if(this.isReferenceSurveyBlock())return Object(c.a)("div",{className:"BlockFooter"});var e=this.buildCopyQuestionsFromButton();return Object(c.a)("div",{className:"BlockFooter"},[Object(c.a)("div",{className:"left-side-footer"},[e]),Object(c.a)("div",{className:"right-side-footer"},[this.buildAddQuestionButton()]),Object(c.a)("div",{className:"clear"})])}},{key:"buildCopyQuestionsFromButton",value:function(){var e=i(1).default,t=e.getInstance(),n="";return(t&&("0"==t.getPermission("editQuestions",!0)||!t.getPermission("copySurveyQuestions",!0))||this.isReferenceElement())&&(n=" disabled"),Object(c.a)("div",{className:"btn btn-default"+n,clickcallback:"QES_Global.addQuestionsFromLibrary("+this.id+")"},[Object(c.a)("span",{className:"icon icon-squarestack"}),Object(c.a)("span",{},Object(a.default)("EditSection","ImportQuestionsFrom")+"...")])}},{key:"buildAddQuestionButton",value:function(){var e=i(1).default,t=e.getInstance();return(t&&"0"==t.getPermission("editQuestions",!0)||this.locked)&&!1,Object(c.a)("div",{className:"CombinedButton"},[Object(c.a)("div",{className:"btn btn-success",clickcallback:"QES_Global.addFirstQuestionToBlock("+this.id+")"},[Object(c.a)("span",{className:"icon btn-icon-plus"}),Object(c.a)("span",{},Object(a.default)("EditSection","CreateANewQuestion"))]),Object(c.a)("div",{className:"btn btn-success",downcallback:"QES_Global.showQuestionTypeMenu($el, $evt, "+this.id+")"},[Object(c.a)("span",{className:"icon icon-angle-down-sm"})])])}},{key:"buildBlockOptionsFooter",value:function(){var e=Object(c.a)("div",{clickcallback:"Block.collapseAndScroll",instanceid:this.id,className:"icon icon-angle-up-sm MinimizeBlock"});return Object(c.a)("div",{className:"BlockOptionsFooter"},[e])}},{key:"redrawHeader",value:function(){window.deleteChildren(this.headerDom),this.headerDom.appendChild(this.buildHeaderInner())}},{key:"buildHeader",value:function(){return this.headerDom=Object(c.a)("div",{className:"HeaderContainer"},[this.buildHeaderInner()]),this.headerDom}},{key:"buildHeaderInner",value:function(){return Object(c.a)("div",{className:"BlockHeader "+this.type+"Block",clickcallback:"BaseBlock.expand",instanceid:this.id},[window.Q.buildExpandButton(),Object(c.a)("span",{className:"BlockTitle Editable",clickcallback:"BlockActions.headerClick($evt)",id:this.blockNameObj.id},[this.blockNameObj.text]),Object(h.a)(Object(c.a)("span",{className:"BlockMetaTitle",id:this.id+"_TitleMeta"})).update(this.getMetaTitle()),this.isReferenceElement()?this.isReferenceBlock()?this.buildReferenceBlockDescription():this.buildReferenceSurveyBlockDescription():Object(c.a)("div",{className:"block-options-button btn btn-sm btn-select btn-hover",downcallback:"QMenu.showMenu(Block.buildBlockOptionsMenu:"+this.id+', $el, {"checkForFixed":1}, $evt)'},[Object(c.a)("span",{},Object(a.default)("EditSection","BlockOptions")),Object(c.a)("span",{className:"caret"})]),this.buildBlockStatusIcons()])}},{key:"buildBlockStatusIcons",value:function(){var e="";return"Standard"!=this.type&&"Default"!=this.type||(e=Object(c.a)("div",{className:"StatusIcons"}),"false"==this.flow&&e.appendChild(this.buildBlockStatusIcon("btn-danger",Object(a.default)("EditSection","NotInSurveyFlow"),"BlockActions.openSurveyFlow("+this.id+")",null,null,"icon-arrow-down-strikeout")),this.locked&&this.passwordProtected?e.appendChild(this.buildBlockStatusIcon("btn-danger",Object(a.default)("EditSection","BlockPasswordLock"),"BlockActions.confirmUnlock("+this.id+")",null,null,"icon-lock")):(1===this.locked&&e.appendChild(this.buildBlockStatusIcon("btn-danger",Object(a.default)("EditSection","Locked"),"BlockActions.confirmUnlock("+this.id+")",null,null,"icon-lock")),2===this.locked&&e.appendChild(this.buildBlockStatusIcon("btn-danger",Object(a.default)("EditSection","Partially Locked"),"BlockActions.confirmUnlock("+this.id+")",null,null,"icon-lock")),3===this.locked&&e.appendChild(this.buildBlockStatusIcon("btn-danger",Object(a.default)("EditSection","Benchmark"),"BlockActions.setBenchmarkVariables("+this.id+")",null,null,"icon-lock"))),"false"!=this.randomizeQuestions&&null!=this.randomizeQuestions&&e.appendChild(this.buildBlockStatusIcon("btn-default",Object(a.default)("EditSection","RandomizedBlock"),"BlockActions.openBlockOptions("+this.id+", 1)",null,null,"icon-arrow-swivel-right")),this.looping&&"None"!=this.looping&&e.appendChild(this.buildBlockStatusIcon("btn-default",Object(a.default)("EditSection","LoopAndMerge"),"BlockActions.openBlockOptions("+this.id+", 2)",null,null,"icon-arrow-counterclockwise")),e.appendChild(Object(c.a)("div",{className:"clear"})),e.children.length>1&&e.addClassName("HasIcons")),e}},{key:"refresh",value:function(){window.removeElement(this.element),this.render()}},{key:"renderQuestions",value:function(e,t){var i=this;this.questions&&this.questions.length&&new window.QuestionRenderer(this.questions,{onComplete:function(){i.parentObj.renderNextBlock(),t&&t()}})}},{key:"getfooterMouseOverFunction",value:function(){var e=this;return function(){window.QES_OverQuestion.questionObj=e,window.QES_OverQuestion.execute()}}},{key:"openQuestionRandomization",value:function(){this.QuestionRandomization||(this.QuestionRandomization=new window.QuestionRandomization(this,this.id)),this.QuestionRandomization.show()}},{key:"buildReferenceBlockOptionsMenu",value:function(){var e=this,t=this.id;return{items:[{display:Object(a.default)("EditSection","ViewBlock")+"...",action:"QES_Global.viewBlock("+t+")"},{checked:!!e.collapsedQuestionMode,display:Object(a.default)("EditSection","CollapseQuestions")+"...",action:"Block.toggleLargeBlockMode:"+t},{separator:1},{className:"MoveUp",display:Object(a.default)("EditSection","MoveBlockUp")+"...",action:"Block.move:"+t+"(-1)"},{className:"MoveDown",display:Object(a.default)("EditSection","MoveBlockDown")+"...",action:"Block.move:"+t+"(1)"},{separator:1},{display:Object(a.default)("EditSection","DeleteBlock")+"...",action:"BlockActions.confirmDeleteBlock("+t+")",defer:1}]}}},{key:"buildReferenceSurveyBlockOptionsMenu",value:function(){var e=this,t=this.id;return{items:[{display:Object(a.default)("EditSection","ViewBlock")+"...",action:"QES_Global.viewBlock("+t+")"},{checked:!!e.collapsedQuestionMode,display:Object(a.default)("EditSection","CollapseQuestions")+"...",action:"Block.toggleLargeBlockMode:"+t}]}}},{key:"buildBlockOptionsMenu",value:function(e){var t=this;e=this.id;var n=" Disabled",o=i(1).default,s={display:Object(a.default)("EditSection","ViewBlock")+"...",action:"QES_Global.viewBlock("+e+")"},r={display:Object(a.default)("EditSection","ViewBlockInSurveyFlowEllipsis"),action:"QES_Global.openSurveyFlow(null, null,"+this.blockId+")"},c={checked:!!t.collapsedQuestionMode,display:Object(a.default)("EditSection","CollapseQuestions")+"...",action:"Block.toggleLargeBlockMode:"+e},d={checked:!!t.locked,display:Object(a.default)("EditSection","LockBlock")+"...",action:"BlockActions.lockMenuItemClicked("+e+")"},u={display:Object(a.default)("EditSection","QuestionRandomization")+"...",action:"BlockActions.openBlockOptions("+e+",1)"},h=null;Object(l.getConfig)().loopAndMergeEnabled&&(h={display:Object(a.default)("EditSection","BlockLooping")+"...",action:"BlockActions.openBlockOptions("+e+",2)"});var p={display:Object(a.default)("SiteWide","NextPreviousButtonText")+"...",action:"BlockActions.openBlockOptions("+e+",3)"},w={className:"MoveUp",display:Object(a.default)("EditSection","MoveBlockUp")+"...",action:"Block.move:"+e+"(-1)"},f={className:"MoveDown",display:Object(a.default)("EditSection","MoveBlockDown")+"...",action:"Block.move:"+e+"(1)"},v={display:Object(a.default)("EditSection","AddBlockBelow"),action:"Block.addBlockBelow:"+e+"()",disabled:!(o.getInstance().getPermission("addBlocks",!0)&&!this.isReferenceSurveyBlock())},b={display:Object(a.default)("EditSection","CopyBlock")+"...",action:"BlockActions.copyBlock("+e+")",defer:1},g=null;1==window.Qualtrics.User.canUploadBlock&&(g={display:Object(a.default)("EditSection","CopyBlockToLibrary")+"...",action:"BlockActions.copyBlockToLibrary("+e+")",defer:1});var y={display:Object(a.default)("EditSection","CopyQuestionsToLibrary")+"...",action:"BlockActions.copyQuestionsToLibrary("+e+")",defer:1},S={display:Object(a.default)("EditSection","DeleteBlock")+"...",action:"BlockActions.confirmDeleteBlock("+e+")",defer:1};t.isLocked()&&(S={display:Object(a.default)("EditSection","DeleteBlock")+"...",className:n});var m=o.getInstance();m&&(m.getPermission("lockBlocks",!0)||(d.className=n),m.getPermission("blockLooping",!0)||(h.className=n),m.getPermission("moveBlocks",!0)||(w.className=n,f.className=n),m.getPermission("copyBlock",!0)||(b.className=n),m.getPermission("copyBlockToLibrary",!0)||g&&(g.className=n),m.getPermission("copySurveyQuestionsToLibrary",!0)||(y.className=n),m.getPermission("deleteBlocks",!0)||(S.className=n));var k={items:[s,r,{separator:1},c,{separator:1},d,u,h,p,{separator:1},w,f,{separator:1},v,b,g,y,S]};if(o.getInstance().versionId){var O=!0,C=!1,j=void 0;try{for(var E,x=k.items[Symbol.iterator]();!(O=(E=x.next()).done);O=!0){var B=E.value;B.className&&-1===B.className.indexOf("Disabled")?B.className+=n:B.className=n}}catch(e){C=!0,j=e}finally{try{!O&&x.return&&x.return()}finally{if(C)throw j}}}return k}}]),t}(r.default);v.getInstance=function(e){return r.default.getInstance(e)},v.getBlockByBlockId=function(e){return r.default.getBlockByBlockId(e)},window.Block=v,t.default=v}});